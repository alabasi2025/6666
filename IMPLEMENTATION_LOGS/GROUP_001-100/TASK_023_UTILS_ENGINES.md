# โ Task 023: ุฅููุงู TODOs ูู Utils ู Engines

**ุงูุชุงุฑูุฎ:** 2026-01-08  
**ุงูุญุงูุฉ:** โ **ููุชูู**

---

## ๐ ุงูููุฎุต:

```
โ TODOs ุงูููุชููุฉ: 9 TODO
โ ุงููููุงุช: consumption-calculator.ts, smart-assignment-engine.ts, preventive-scheduling-engine.ts
โ ุงููุชูุฌุฉ: 0 TODOs ูุชุจูู ูู Utils ู Engines
```

---

## โ ุงูููุงู ุงูููุชููุฉ:

### 1. **Consumption Calculator** (4 TODOs) โ

#### ุฃ. ุญุณุงุจ ุงูุงุณุชููุงู ุงูุชุฑุงููู (ุงูุณุทุฑ 148) โ
- โ ุงุณุชุฏุนุงุก `getCumulativeConsumption()` ุนูุฏ ุชูุนูู `useCumulative`
- โ ุงุณุชุฎุฏุงู ุงููููุฉ ุงููุญุณูุจุฉ ูู ุญุณุงุจ ุงูุชุนุฑูุฉ ุงูุชุฑุงูููุฉ

#### ุจ. ุฌูุจ ุงูุฑุณูู ุงูุฃุณุงุณูุฉ (ุงูุณุทุฑ 195) โ
- โ ุฌูุจ `fixedCharge` ูู ุฌุฏูู `tariffs`
- โ ุงุณุชุฎุฏุงู ุงููููุฉ ุงููุญุณูุจุฉ ูู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

#### ุฌ. ุฏุงูุฉ `getCumulativeConsumption` (ุงูุณุทุฑ 224) โ
- โ ุฌูุจ ุฌููุน ุงููุฑุงุกุงุช ูู ุจุฏุงูุฉ ุงูุณูุฉ ุญุชู ุงููุชุฑุฉ ุงูุญุงููุฉ
- โ ุฌูุน ุงูุงุณุชููุงู ูู ุงููุฑุงุกุงุช ุงููุนุชูุฏุฉ
- โ ุฅุฑุฌุงุน ุงูุฅุฌูุงูู

#### ุฏ. ุฏุงูุฉ `getAverageConsumption` (ุงูุณุทุฑ 241) โ
- โ ุฌูุจ ุขุฎุฑ N ูุฑุงุกุงุช ูุนุชูุฏุฉ
- โ ุญุณุงุจ ุงููุชูุณุท ูู ุงููุฑุงุกุงุช
- โ ุฅุฑุฌุงุน ุงููุชูุณุท

---

### 2. **Smart Assignment Engine** (1 TODO) โ

#### ููุชุฑุฉ ุญุณุจ ุงูููุงุฑุงุช (ุงูุณุทุฑ 177) โ
- โ ุฌูุจ ุฌููุน ุงูุนุงูููู ูุน ููุงุฑุงุชูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ููุชุฑุฉ ุงูุนุงูููู ุงูุฐูู ูุฏููู ุฌููุน ุงูููุงุฑุงุช ุงููุทููุจุฉ
- โ ุฏุนู JSON skills field ูุน parsing
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุน fallback

---

### 3. **Preventive Scheduling Engine** (3 TODOs) โ

#### ุฃ. ุงูุฌุฏููุฉ ุญุณุจ ุงูุญุงูุฉ (ุงูุณุทุฑ 114) โ
- โ ุฌูุจ ุฌููุน ุงูุฃุตูู ุงููุฑุชุจุทุฉ ุจุงูุฎุทุฉ
- โ ุงูุชุญูู ูู ุญุงูุฉ ุงูุฃุตู ููุงุจู threshold
- โ ุฅูุดุงุก ุฃูุฑ ุนูู ุนูุฏ ุงูุญุงุฌุฉ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

#### ุจ. ุฌูุจ ุขุฎุฑ ูุฑุงุกุฉ ููุนุฏุงุฏ (ุงูุณุทุฑ 354) โ
- โ ุงูุจุญุซ ูู `meter_readings_enhanced` ุนู ุขุฎุฑ ูุฑุงุกุฉ ูุนุชูุฏุฉ
- โ ุฌูุจ ุงูุนุฏุงุฏ ุงููุฑุชุจุท ุจุงูุฃุตู
- โ ุฌูุจ ุขุฎุฑ ูููุฉ PM ูุญููุธุฉ
- โ ุฅุฑุฌุงุน ุงููููุฉ ู lastPMValue

#### ุฌ. ุญูุธ ุขุฎุฑ ูููุฉ PM (ุงูุณุทุฑ 363) โ
- โ ุญูุธ ูููุฉ PM ูู `metadata` ุงูุฎุงุต ุจุงูุฃุตู
- โ ุชุญุฏูุซ `lastPMUpdate` timestamp
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

---

## ๐ ููุงุญุธุงุช ุชูููุฉ:

1. **Consumption Calculator:**
   - ุฅุถุงูุฉ imports ููู `billingPeriods`, `meterReadingsEnhanced`, `sql`, `asc`, `desc`
   - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุน fallback ููููู ุงูุงูุชุฑุงุถูุฉ

2. **Smart Assignment Engine:**
   - ููุชุฑุฉ ุงูููุงุฑุงุช ูู JSON field
   - ุฏุนู array ู object formats ููููุงุฑุงุช

3. **Preventive Scheduling Engine:**
   - ุงุณุชุฎุฏุงู `db.generateWorkOrdersFromPlan` ูุฅูุดุงุก ุฃูุงูุฑ ุงูุนูู
   - ุญูุธ PM values ูู metadata ููุฃุตู
   - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุดุงูู

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

```
Utils & Engines: 0 TODOs ูุชุจูู โ
```
