# โ Task 022: ุฅููุงู TODOs ูู Notification Channels

**ุงูุชุงุฑูุฎ:** 2026-01-08  
**ุงูุญุงูุฉ:** โ **ููุชูู**

---

## ๐ ุงูููุฎุต:

```
โ TODOs ุงูููุชููุฉ: 5 TODO
โ ุงููููุงุช: SMS, Email, WhatsApp channels
โ ุงููุชูุฌุฉ: 0 TODOs ูุชุจูู ูู Notification Channels
```

---

## โ ุงูููุงู ุงูููุชููุฉ:

### 1. **SMS Channel - businessId** (ุงูุณุทุฑ 159) โ
**ุงููุตู:** ุงูุญุตูู ุนูู businessId ูู context ุฃู ุงูุนููู

**ุงูุชุบููุฑุงุช:**
- ุชุญุฏูุซ `logMessage` method ููุจูู `businessId` ููุนุงูู ุงุฎุชูุงุฑู
- ูุญุงููุฉ ุงูุญุตูู ุนูู businessId ูู ุงูุนููู ุจุงุณุชุฎุฏุงู ุฑูู ุงููุงุชู
- Fallback ุฅูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ (1) ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนููู
- ุชูุฑูุฑ businessId ูู recipient metadata

---

### 2. **Email Channel - businessId** (ุงูุณุทุฑ 271) โ
**ุงููุตู:** ุงูุญุตูู ุนูู businessId ูู context ุฃู ุงูุนููู

**ุงูุชุบููุฑุงุช:**
- ุชุญุฏูุซ `logMessage` method ููุจูู `businessId` ููุนุงูู ุงุฎุชูุงุฑู
- ูุญุงููุฉ ุงูุญุตูู ุนูู businessId ูู ุงูุนููู ุจุงุณุชุฎุฏุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- Fallback ุฅูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ (1) ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนููู
- ุชูุฑูุฑ businessId ูู recipient metadata ูู ุฌููุน ุงุณุชุฏุนุงุกุงุช logMessage

---

### 3. **WhatsApp Channel - businessId** (ุงูุณุทุฑ 341) โ
**ุงููุตู:** ุงูุญุตูู ุนูู businessId ูู context ุฃู ุงูุนููู

**ุงูุชุบููุฑุงุช:**
- ุชุญุฏูุซ `logMessage` method ููุจูู `businessId` ููุนุงูู ุงุฎุชูุงุฑู
- ุชูุธูู ุฑูู ุงููุงุชู ูู ุจุงุฏุฆุฉ `whatsapp:` ูุจู ุงูุจุญุซ
- ูุญุงููุฉ ุงูุญุตูู ุนูู businessId ูู ุงูุนููู ุจุงุณุชุฎุฏุงู ุฑูู ุงููุงุชู
- Fallback ุฅูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ (1) ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนููู
- ุชูุฑูุฑ businessId ูู recipient metadata

---

### 4. **WhatsApp Channel - verifyMoyasarSignature** (ุงูุณุทุฑ 363) โ
**ุงููุตู:** ุชูููุฐ ุงูุชุญูู ุงููุนูู ูู ุชูููุน Moyasar ุจุงุณุชุฎุฏุงู HMAC SHA256

**ุงูุชุบููุฑุงุช:**
- ุงุณุชุฎุฏุงู `MoyasarGateway.verifyWebhookSignature()` ููุชุญูู ูู ุงูุชูููุน
- ุงูุญุตูู ุนูู webhook secret ูู environment variables
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุน fallback ูุจูุฆุฉ ุงูุชุทููุฑ

---

### 5. **WhatsApp Channel - verifySadadSignature** (ุงูุณุทุฑ 371) โ
**ุงููุตู:** ุชูููุฐ ุงูุชุญูู ุงููุนูู ูู ุชูููุน Sadad

**ุงูุชุบููุฑุงุช:**
- ุงุณุชุฎุฏุงู `SadadGateway.verifyWebhookSignature()` ููุชุญูู ูู ุงูุชูููุน
- ุงูุญุตูู ุนูู webhook secret ูู environment variables
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุน fallback ูุจูุฆุฉ ุงูุชุทููุฑ

---

## ๐ ููุงุญุธุงุช ุชูููุฉ:

1. **businessId Detection:** ุฌููุน Channels ุชุญุงูู ุงูุญุตูู ุนูู businessId ูู:
   - recipient metadata (ุฅุฐุง ูุงู ููุฌูุฏุงู)
   - ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงูุจุญุซ ุนู ุงูุนููู)
   - ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ (1) ูู fallback

2. **HMAC Verification:** ุงูุชุญูู ูู ุงูุชูููุนุงุช ูุณุชุฎุฏู:
   - Payment Gateway Services (MoyasarGateway, SadadGateway)
   - Environment variables ููุฃุณุฑุงุฑ
   - Fallback ูุจูุฆุฉ ุงูุชุทููุฑ

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

```
Notification Channels: 0 TODOs ูุชุจูู โ
```
