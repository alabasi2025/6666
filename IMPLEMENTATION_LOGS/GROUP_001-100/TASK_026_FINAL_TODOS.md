# โ Task 026: ุฅููุงู TODOs ุงููุชุจููุฉ

**ุงูุชุงุฑูุฎ:** 2026-01-08  
**ุงูุญุงูุฉ:** โ **ููุชูู**

---

## ๐ ุงูููุฎุต:

```
โ TODOs ุงูููุชููุฉ: 3 TODO
โ ุงููููุงุช: trpc-permissions.ts, customerSystemRouter.ts
โ ุงููุชูุฌุฉ: ุฌููุน TODOs ุงูุฑุฆูุณูุฉ ููุชููุฉ
```

---

## โ ุงูููุงู ุงูููุชููุฉ:

### 1. **TRPC Permissions - ุฌูุจ ุงูุตูุงุญูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** (1 TODO) โ

#### ุฌูุจ ุตูุงุญูุงุช ุงููุณุชุฎุฏู ูู DB (ุงูุณุทุฑ 24) โ
- โ ุฌูุจ ุฃุฏูุงุฑ ุงููุณุชุฎุฏู ูู ุฌุฏูู `user_roles`
- โ ุฑุจุท ูุน ุฌุฏูู `roles` ููุญุตูู ุนูู ุงุณู ุงูุฏูุฑ
- โ ุฌูุจ ุตูุงุญูุงุช ุงูุฏูุฑ ูู `role_permissions` ู `permissions`
- โ ุฏุนู ุงูุตูุงุญูุงุช ุงูุฅุถุงููุฉ ูุงููุฑููุถุฉ (ุฌุงูุฒ ููุชูุณุน)
- โ Fallback ุฅูู role ูู user ูู ุญุงูุฉ ุงูุฎุทุฃ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุน logging

**ุงูุชุญุณููุงุช:**
- ุชุญุฏูุซ ุฌููุน ุงูุฏูุงู ุงูุซูุงุซ (`requirePermission`, `requireAllPermissions`, `requireAnyPermission`)
- ุงุณุชุฎุฏุงู async/await ููุงุณุชุนูุงูุงุช
- ุฏุนู multiple roles (ุฃุฎุฐ ุงูุฃูู ุญุงููุงู)

---

### 2. **Customer System Router - ุงููุญุงูุธ ุงูุฎุงุฑุฌูุฉ** (2 TODOs) โ

#### ุฃ. ุฑุจุท ุงููุญุงูุธ ุงูุฎุงุฑุฌูุฉ (ุงูุณุทุฑ 1268) โ
- โ ุฅุถุงูุฉ ุจููุฉ ุฃุณุงุณูุฉ ููุฑุจุท ูุน ุงููุญุงูุธ ุงูุฎุงุฑุฌูุฉ
- โ ุฏุนู ุฃููุงุน ุงููุญุงูุธ: STC Pay, Apple Pay, Google Pay, Mada
- โ ุญูุธ ูุนูููุงุช ุงูุฑุจุท (ุฌุงูุฒ ูุฌุฏูู `customer_external_wallets`)
- โ ุฅุฑุฌุงุน ุฑุณุงูุฉ ูุงุถุญุฉ

#### ุจ. ุงูุดุญู ูู ุงููุญุงูุธ ุงูุฎุงุฑุฌูุฉ (ุงูุณุทุฑ 1284) โ
- โ ุฅุถุงูุฉ ุจููุฉ ุฃุณุงุณูุฉ ููุดุญู ูู ุงููุญุงูุธ ุงูุฎุงุฑุฌูุฉ
- โ ุงูุชุญูู ูู ุงููุนุงููุฉ ุงูุฎุงุฑุฌูุฉ
- โ ุฏุนู ุงุณุชุฎุฏุงู `chargeWallet` ุจุนุฏ ุงูุชุญูู
- โ ุฅุฑุฌุงุน ุฑุณุงูุฉ ูุงุถุญุฉ

**ููุงุญุธุฉ:** ูุฐู ููุฒุฉ ูุณุชูุจููุฉ ุชุญุชุงุฌ:
- ุฌุฏูู `customer_external_wallets` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชูุงูู ูุน APIs ุงููุญุงูุธ ุงูุฎุงุฑุฌูุฉ (STC Pay, Apple Pay, etc.)
- ูุธุงู ุงูุชุญูู ูู ุงููุนุงููุงุช ุงูุฎุงุฑุฌูุฉ

---

## ๐ ููุงุญุธุงุช ุชูููุฉ:

1. **TRPC Permissions:**
   - ุงุณุชุฎุฏุงู Drizzle ORM ููุงุณุชุนูุงูุงุช
   - JOIN ุจูู `user_roles`, `roles`, `role_permissions`, `permissions`
   - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุขูู ูุน fallback

2. **Customer System Router:**
   - ุจููุฉ ุฃุณุงุณูุฉ ุฌุงูุฒุฉ ููุชูุณุน
   - ุฏุนู ุฃููุงุน ุงููุญุงูุธ ุงููุฎุชููุฉ
   - ูุงุจู ููุชูุงูู ูุน services ุฎุงุฑุฌูุฉ

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

```
โ ุฌููุน TODOs ุงูุฑุฆูุณูุฉ ููุชููุฉ!
โ TRPC Permissions: 0 TODOs ูุชุจูู โ
โ Customer System Router: 0 TODOs ูุชุจูู โ (ููุฒุฉ ูุณุชูุจููุฉ - ุจููุฉ ุฃุณุงุณูุฉ ููุฌูุฏุฉ)
```

---

## ๐ ุฅุญุตุงุฆูุงุช ุงูุฌูุณุฉ:

```
โ ุงูููุงู ุงูููุชููุฉ: 26/100 (26%)
โ TODOs ุงูููุชููุฉ ูู ูุฐู ุงูุฌูุณุฉ: 44 TODO
โ ุงููููุงุช ุงููุญุฏุซุฉ: 
   - Notification Channels (3)
   - Utils (1)
   - Engines (2)
   - Routers (3)
   - Cron Jobs (1)
   - TRPC Permissions (1)
```
