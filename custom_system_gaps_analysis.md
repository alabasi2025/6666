# ๐ ุชุญููู ุงููุฌูุงุช ูุงูููุงูุต ูู ุงููุธุงู ุงููุฎุตุต

> **ุชุงุฑูุฎ ุงูุชุญููู:** 24 ุฏูุณูุจุฑ 2025  
> **ุงูุบุฑุถ:** ุชุญุฏูุฏ ุงูุฃุฌุฒุงุก ุงููุงูุตุฉ ุฃู ุบูุฑ ุงูููุชููุฉ ูู ููุฑุฉ ุงููุธุงู ุงููุฎุตุต

---

## ๐ ููุฎุต ุชูููุฐู

ุจุนุฏ ุงููุญุต ุงูุนููู ูููุธุงู ุงููุฎุตุตุ ุชู ุชุญุฏูุฏ **ูุฌูุงุช ุฌููุฑูุฉ** ูู ุงูููุฑุฉ ุงูุฃุณุงุณูุฉ ุชุญุชุงุฌ ุฅูู ูุนุงูุฌุฉ ูุจู ุฃู ูุตุจุญ ุงููุธุงู ุฌุงูุฒุงู ููุงุณุชุฎุฏุงู ุงููุนูู.

### ุงูุญุงูุฉ ุงูุญุงููุฉ

| ุงููููู | ุงูููุฌูุฏ | ุงููุงูุต | ูุณุจุฉ ุงูุงูุชูุงู |
|:---|:---:|:---:|:---:|
| ูุงุนุฏุฉ ุงูุจูุงูุงุช | 12 ุฌุฏูู | 5 ุฌุฏุงูู | 70% |
| Backend API | 66 ูุธููุฉ | 25 ูุธููุฉ | 72% |
| Frontend UI | 9 ุดุงุดุงุช | 4 ุดุงุดุงุช | 69% |
| ููุทู ุงูุฃุนูุงู | ุฌุฒุฆู | ูุจูุฑ | 50% |

---

## ๐จ ุงููุฌูุงุช ุงูุฌููุฑูุฉ (Critical Gaps)

### 1. โ ุบูุงุจ ุฌุฏูู ุงูุชุญูููุงุช ุจูู ุงูุฎุฒุงุฆู (Treasury Transfers)

**ุงููุดููุฉ:**
- ุฌุฏูู `customTreasuryTransfers` ููุฌูุฏ ูู Schema ููู **ุบูุฑ ูุณุชุฎุฏู** ูู ุงูู API
- ุงูู Router ุงูุญุงูู (`customTransfersRouter`) ูุชุนุงูู ูุน ุงูุชุญูููุงุช ุจูู **ุงูุฃูุธูุฉ ุงููุฑุนูุฉ** ููุท
- ูุง ููุฌุฏ ุฏุนู ููุชุญูููุงุช ุจูู ุงูุฎุฒุงุฆู **ุฏุงุฎู ููุณ ุงููุธุงู ุงููุฑุนู**

**ุงูุชุฃุซูุฑ:**
- ูุง ูููู ุชุญููู ุฃููุงู ูู ุตูุฏูู ุฅูู ุจูู ุฏุงุฎู ููุณ ุงููุธุงู
- ูุง ูููู ุชุชุจุน ุงูุชุญูููุงุช ุงูุฏุงุฎููุฉ

**ุงูุญู ุงููุทููุจ:**
```
- ุฅูุดุงุก customTreasuryTransfersRouter ูููุตู
- ุฏุนู ุงูุชุญูููุงุช ุฏุงุฎู ููุณ ุงููุธุงู ุงููุฑุนู
- ุฏุนู ุงูุชุญูููุงุช ุจูู ุฃูุธูุฉ ูุฑุนูุฉ ูุฎุชููุฉ
```

---

### 2. โ ุนุฏู ุฑุจุท ุงูุฎุฒุงุฆู ุจุงููุธุงู ุงููุฑุนู ุจุดูู ุตุญูุญ

**ุงููุดููุฉ:**
- ูู `customTreasuriesRouter.create`ุ ุงูุญูู `subSystemId` ูุนุฑูู ูู `optional`
- ูุฐุง ูุนูู ูููู ุฅูุดุงุก ุฎุฒููุฉ **ุจุฏูู ุฑุจุทูุง ุจูุธุงู ูุฑุนู**
- ูุชุนุงุฑุถ ูุน ููุฑุฉ ุฃู ูู ุฎุฒููุฉ ุชูุชูู ููุธุงู ูุฑุนู

**ุงูููุฏ ุงูุญุงูู:**
```typescript
subSystemId: z.number().optional(), // โ ูุฌุจ ุฃู ูููู required
```

**ุงูุญู ุงููุทููุจ:**
```typescript
subSystemId: z.number(), // โ ูุทููุจ
```

---

### 3. โ ุบูุงุจ ุณุฌู ุญุฑูุงุช ุงูุฎุฒููุฉ (Treasury Movements Log)

**ุงููุดููุฉ:**
- ูุง ููุฌุฏ ุฌุฏูู ูุชุณุฌูู **ูู ุญุฑูุฉ** ุนูู ุงูุฎุฒููุฉ
- ุงูุฃุฑุตุฏุฉ ุชูุญุฏูุซ ูุจุงุดุฑุฉ ุจุฏูู ุชุงุฑูุฎ ููุญุฑูุงุช
- ูุง ูููู ูุนุฑูุฉ **ูู ุฃูู ุฌุงุก ุงููุจูุบ** ุฃู **ุฅูู ุฃูู ุฐูุจ**

**ุงูุชุฃุซูุฑ:**
- ูุง ูููู ุฅูุดุงุก ูุดู ุญุณุงุจ ููุฎุฒููุฉ
- ูุง ูููู ุชุชุจุน ุงูุญุฑูุงุช
- ูุง ูููู ุงูุชุฏููู

**ุงูุญู ุงููุทููุจ:**
```sql
CREATE TABLE custom_treasury_movements (
  id INT PRIMARY KEY AUTO_INCREMENT,
  treasury_id INT NOT NULL,
  movement_type ENUM('receipt', 'payment', 'transfer_in', 'transfer_out', 'adjustment'),
  amount DECIMAL(18,2) NOT NULL,
  balance_before DECIMAL(18,2),
  balance_after DECIMAL(18,2),
  reference_type VARCHAR(50), -- 'receipt_voucher', 'payment_voucher', 'transfer'
  reference_id INT,
  description TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

---

### 4. โ ุบูุงุจ ูุธุงู ุงูุฃุทุฑุงู (Parties/Contacts)

**ุงููุดููุฉ:**
- ุงูุณูุฏุงุช ุชุณุชุฎุฏู `sourceName` ู `destinationName` ููุต ุญุฑ
- ูุง ููุฌุฏ ุฌุฏูู ููุฃุทุฑุงู (ุนููุงุกุ ููุฑุฏููุ ููุธูููุ ุฌูุงุช)
- ูุง ูููู ุชุชุจุน ุงููุนุงููุงุช ูุน ุทุฑู ูุนูู

**ุงูุชุฃุซูุฑ:**
- ูุง ูููู ูุนุฑูุฉ ุฅุฌูุงูู ุงููุจุงูุบ ุงููุณุชููุฉ ูู ุดุฎุต ูุนูู
- ูุง ูููู ุฅูุดุงุก ูุดู ุญุณุงุจ ูุทุฑู
- ุชูุฑุงุฑ ุงูุจูุงูุงุช ูุฃุฎุทุงุก ุงููุชุงุจุฉ

**ุงูุญู ุงููุทููุจ:**
```sql
CREATE TABLE custom_parties (
  id INT PRIMARY KEY AUTO_INCREMENT,
  business_id INT NOT NULL,
  sub_system_id INT,
  code VARCHAR(20) NOT NULL,
  name_ar VARCHAR(255) NOT NULL,
  name_en VARCHAR(255),
  party_type ENUM('customer', 'supplier', 'employee', 'partner', 'other'),
  phone VARCHAR(50),
  email VARCHAR(255),
  address TEXT,
  tax_number VARCHAR(50),
  credit_limit DECIMAL(18,2) DEFAULT 0,
  current_balance DECIMAL(18,2) DEFAULT 0,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

---

### 5. โ ุบูุงุจ ูุธุงู ุงูุจููุฏ/ุงูุชุตูููุงุช (Categories)

**ุงููุดููุฉ:**
- ุงูุณูุฏุงุช ูุง ุชุญุชูู ุนูู **ุชุตููู** ุฃู **ุจูุฏ**
- ูุง ูููู ูุนุฑูุฉ ุณุจุจ ุงููุจุถ ุฃู ุงูุตุฑู
- ูุง ูููู ุฅูุดุงุก ุชูุงุฑูุฑ ุญุณุจ ุงูุชุตููู

**ูุซุงู:**
- ุณูุฏ ูุจุถ 1000 ุฑูุงู - ูู ุฃููุ ุฅูุฌุงุฑุ ูุจูุนุงุชุ ูุฑุถุ
- ุณูุฏ ุตุฑู 500 ุฑูุงู - ููุงุฐุงุ ุฑูุงุชุจุ ูุดุชุฑูุงุชุ ุฅูุฌุงุฑุ

**ุงูุญู ุงููุทููุจ:**
```sql
CREATE TABLE custom_categories (
  id INT PRIMARY KEY AUTO_INCREMENT,
  business_id INT NOT NULL,
  sub_system_id INT,
  code VARCHAR(20) NOT NULL,
  name_ar VARCHAR(255) NOT NULL,
  name_en VARCHAR(255),
  category_type ENUM('income', 'expense', 'both'),
  parent_id INT,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ุฅุถุงูุฉ ุญูู ูู ุงูุณูุฏุงุช
ALTER TABLE custom_receipt_vouchers ADD COLUMN category_id INT;
ALTER TABLE custom_payment_vouchers ADD COLUMN category_id INT;
```

---

### 6. โ ุบูุงุจ ูุธุงู ุทุฑู ุงูุฏูุน (Payment Methods)

**ุงููุดููุฉ:**
- ุงูุณูุฏุงุช ูุง ุชุญุฏุฏ **ุทุฑููุฉ ุงูุฏูุน**
- ูุง ูููู ุงูุชูููุฒ ุจูู ููุฏูุ ุดููุ ุชุญูููุ ุดุจูุฉ

**ุงูุญู ุงููุทููุจ:**
```sql
-- ุฅุถุงูุฉ ุญูู ูู ุงูุณูุฏุงุช
ALTER TABLE custom_receipt_vouchers ADD COLUMN payment_method ENUM('cash', 'check', 'transfer', 'card', 'wallet');
ALTER TABLE custom_receipt_vouchers ADD COLUMN check_number VARCHAR(50);
ALTER TABLE custom_receipt_vouchers ADD COLUMN check_date DATE;
ALTER TABLE custom_receipt_vouchers ADD COLUMN bank_reference VARCHAR(100);

ALTER TABLE custom_payment_vouchers ADD COLUMN payment_method ENUM('cash', 'check', 'transfer', 'card', 'wallet');
ALTER TABLE custom_payment_vouchers ADD COLUMN check_number VARCHAR(50);
ALTER TABLE custom_payment_vouchers ADD COLUMN check_date DATE;
ALTER TABLE custom_payment_vouchers ADD COLUMN bank_reference VARCHAR(100);
```

---

## ๐ก ุงููุฌูุงุช ุงููุชูุณุทุฉ (Medium Gaps)

### 7. โ๏ธ ุบูุงุจ ุงูุชูุงุฑูุฑ

**ุงููุงูุต:**
- ูุดู ุญุณุงุจ ุงูุฎุฒููุฉ
- ูุดู ุญุณุงุจ ุงูุทุฑู
- ุชูุฑูุฑ ุงูุณูุฏุงุช ุงููููู
- ุชูุฑูุฑ ุงูุณูุฏุงุช ุญุณุจ ุงูุชุตููู
- ุชูุฑูุฑ ุงูููุงุฑูุฉ ุจูู ุงููุชุฑุงุช
- ุชูุฑูุฑ ุงูุฃุฑุตุฏุฉ

---

### 8. โ๏ธ ุบูุงุจ ุงูุฅุญุตุงุฆูุงุช ูู ุงูู API

**ุงููุงูุต:**
- `getStats` ูููุธุงู ุงููุฑุนู
- `getStats` ููุฎุฒููุฉ
- `getDailyTotals` ููุณูุฏุงุช
- `getMonthlyTotals` ููุณูุฏุงุช

---

### 9. โ๏ธ ุบูุงุจ ุงูุจุญุซ ุงููุชูุฏู

**ุงููุงูุต:**
- ุงูุจุญุซ ูู ุงูุณูุฏุงุช ุจุงูุชุงุฑูุฎ
- ุงูุจุญุซ ูู ุงูุณูุฏุงุช ุจุงููุจูุบ
- ุงูุจุญุซ ูู ุงูุณูุฏุงุช ุจุงูุทุฑู
- ุงูุจุญุซ ุงูุดุงูู

---

### 10. โ๏ธ ุบูุงุจ ุงูุชุตุฏูุฑ

**ุงููุงูุต:**
- ุชุตุฏูุฑ ุฅูู Excel
- ุชุตุฏูุฑ ุฅูู PDF
- ุทุจุงุนุฉ ุงูุณูุฏุงุช

---

## ๐ข ุงููุฌูุงุช ุงูุจุณูุทุฉ (Minor Gaps)

### 11. ๐ก ุชุญุณููุงุช ุงููุงุฌูุฉ

- ุฅุถุงูุฉ ุฑุณูู ุจูุงููุฉ ูู ููุญุฉ ุงูุชุญูู
- ุฅุถุงูุฉ ุชูุจููุงุช ููุฃุฑุตุฏุฉ ุงูููุฎูุถุฉ
- ุฅุถุงูุฉ ูุถุน ุฏุงูู/ูุงุชุญ
- ุชุญุณูู ุชุฌุฑุจุฉ ุงููุงุชู

### 12. ๐ก ุชุญุณููุงุช ุงูุฃุฏุงุก

- ุฅุถุงูุฉ ููุงุฑุณ ุนูู ุงูุฌุฏุงูู
- ุฅุถุงูุฉ ุชุฎุฒูู ูุคูุช (Caching)
- ุชุญุณูู ุงูุงุณุชุนูุงูุงุช

---

## ๐ ููุฎุต ุงููุฌูุงุช

| ุงูุฑูู | ุงููุฌูุฉ | ุงูููุน | ุงูุฃููููุฉ | ุงูุฌูุฏ |
|:---:|:---|:---:|:---:|:---:|
| 1 | ุฌุฏูู ุงูุชุญูููุงุช ุจูู ุงูุฎุฒุงุฆู | ุฌููุฑู | ๐ด ุนุงููุฉ | 3 ุฃูุงู |
| 2 | ุฑุจุท ุงูุฎุฒุงุฆู ุจุงููุธุงู ุงููุฑุนู | ุฌููุฑู | ๐ด ุนุงููุฉ | 1 ุณุงุนุฉ |
| 3 | ุณุฌู ุญุฑูุงุช ุงูุฎุฒููุฉ | ุฌููุฑู | ๐ด ุนุงููุฉ | 2 ููู |
| 4 | ูุธุงู ุงูุฃุทุฑุงู | ุฌููุฑู | ๐ด ุนุงููุฉ | 3 ุฃูุงู |
| 5 | ูุธุงู ุงูุจููุฏ/ุงูุชุตูููุงุช | ุฌููุฑู | ๐ด ุนุงููุฉ | 2 ููู |
| 6 | ุทุฑู ุงูุฏูุน | ุฌููุฑู | ๐ด ุนุงููุฉ | 1 ููู |
| 7 | ุงูุชูุงุฑูุฑ | ูุชูุณุท | ๐ก ูุชูุณุทุฉ | 5 ุฃูุงู |
| 8 | ุงูุฅุญุตุงุฆูุงุช | ูุชูุณุท | ๐ก ูุชูุณุทุฉ | 2 ููู |
| 9 | ุงูุจุญุซ ุงููุชูุฏู | ูุชูุณุท | ๐ก ูุชูุณุทุฉ | 2 ููู |
| 10 | ุงูุชุตุฏูุฑ | ูุชูุณุท | ๐ก ูุชูุณุทุฉ | 3 ุฃูุงู |
| 11 | ุชุญุณููุงุช ุงููุงุฌูุฉ | ุจุณูุท | ๐ข ููุฎูุถุฉ | 3 ุฃูุงู |
| 12 | ุชุญุณููุงุช ุงูุฃุฏุงุก | ุจุณูุท | ๐ข ููุฎูุถุฉ | 2 ููู |

**ุฅุฌูุงูู ุงูุฌูุฏ ุงูููุฏุฑ:** ~29 ููู ุนูู

---

## ๐ฏ ุฎุทุฉ ุงูุนูู ุงูููุชุฑุญุฉ

### ุงููุฑุญูุฉ 1: ุฅุตูุงุญ ุงููุฌูุงุช ุงูุฌููุฑูุฉ (ุฃุณุจูุนูู)

**ุงูุฃุณุจูุน 1:**
1. ุฅูุดุงุก ุฌุฏูู `custom_parties` (ุงูุฃุทุฑุงู)
2. ุฅูุดุงุก ุฌุฏูู `custom_categories` (ุงูุชุตูููุงุช)
3. ุฅูุดุงุก ุฌุฏูู `custom_treasury_movements` (ุญุฑูุงุช ุงูุฎุฒููุฉ)
4. ุชุนุฏูู ุฌุฏุงูู ุงูุณูุฏุงุช ูุฅุถุงูุฉ ุงูุญููู ุงููุงูุตุฉ

**ุงูุฃุณุจูุน 2:**
5. ุฅูุดุงุก `customPartiesRouter`
6. ุฅูุดุงุก `customCategoriesRouter`
7. ุฅูุดุงุก `customTreasuryMovementsRouter`
8. ุชุนุฏูู `customTreasuryTransfersRouter`
9. ุชุนุฏูู ุงูู Routers ุงูุญุงููุฉ ูุฏุนู ุงูุญููู ุงูุฌุฏูุฏุฉ

### ุงููุฑุญูุฉ 2: ุฅุถุงูุฉ ุงูููุฒุงุช ุงููุชูุณุทุฉ (ุฃุณุจูุนูู)

**ุงูุฃุณุจูุน 3:**
1. ุฅูุดุงุก ุดุงุดุฉ ุงูุฃุทุฑุงู
2. ุฅูุดุงุก ุดุงุดุฉ ุงูุชุตูููุงุช
3. ุชุนุฏูู ุดุงุดุงุช ุงูุณูุฏุงุช ูุฏุนู ุงูุญููู ุงูุฌุฏูุฏุฉ

**ุงูุฃุณุจูุน 4:**
4. ุฅูุดุงุก ุงูุชูุงุฑูุฑ ุงูุฃุณุงุณูุฉ
5. ุฅุถุงูุฉ ุงูุฅุญุตุงุฆูุงุช
6. ุฅุถุงูุฉ ุงูุจุญุซ ุงููุชูุฏู

### ุงููุฑุญูุฉ 3: ุงูุชุญุณููุงุช (ุฃุณุจูุน)

**ุงูุฃุณุจูุน 5:**
1. ุฅุถุงูุฉ ุงูุชุตุฏูุฑ
2. ุชุญุณููุงุช ุงููุงุฌูุฉ
3. ุชุญุณููุงุช ุงูุฃุฏุงุก
4. ุงูุงุฎุชุจุงุฑุงุช

---

## ๐ ุงูุชุบููุฑุงุช ุงููุทููุจุฉ ุนูู Schema

### ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ (5 ุฌุฏุงูู):

1. **custom_parties** - ุงูุฃุทุฑุงู
2. **custom_categories** - ุงูุชุตูููุงุช
3. **custom_treasury_movements** - ุญุฑูุงุช ุงูุฎุฒููุฉ
4. **custom_party_transactions** - ุญุฑูุงุช ุงูุฃุทุฑุงู
5. **custom_settings** - ุฅุนุฏุงุฏุงุช ุงููุธุงู ุงููุฎุตุต

### ุงูุชุนุฏููุงุช ุนูู ุงูุฌุฏุงูู ุงูุญุงููุฉ:

1. **custom_receipt_vouchers:**
   - ุฅุถุงูุฉ `party_id`
   - ุฅุถุงูุฉ `category_id`
   - ุฅุถุงูุฉ `payment_method`
   - ุฅุถุงูุฉ `check_number`, `check_date`, `bank_reference`

2. **custom_payment_vouchers:**
   - ุฅุถุงูุฉ `party_id`
   - ุฅุถุงูุฉ `category_id`
   - ุฅุถุงูุฉ `payment_method`
   - ุฅุถุงูุฉ `check_number`, `check_date`, `bank_reference`

3. **custom_treasuries:**
   - ุชุบููุฑ `sub_system_id` ูู optional ุฅูู required

---

## โ ุงูุฎูุงุตุฉ

ุงููุธุงู ุงููุฎุตุต ุงูุญุงูู ูุญุชูู ุนูู **ุจููุฉ ุฃุณุงุณูุฉ ุฌูุฏุฉ** ูููู **ุบูุฑ ููุชูู** ููุงุณุชุฎุฏุงู ุงููุนูู.

**ุงููุฌูุงุช ุงูุฑุฆูุณูุฉ:**
1. โ ูุง ููุฌุฏ ูุธุงู ุฃุทุฑุงู (ุนููุงุก/ููุฑุฏูู)
2. โ ูุง ููุฌุฏ ูุธุงู ุชุตูููุงุช (ุจููุฏ)
3. โ ูุง ููุฌุฏ ุณุฌู ุญุฑูุงุช ููุฎุฒููุฉ
4. โ ูุง ููุฌุฏ ุฏุนู ูุทุฑู ุงูุฏูุน
5. โ ุงูุชุญูููุงุช ุจูู ุงูุฎุฒุงุฆู ุบูุฑ ููุชููุฉ

**ุงูุชูุตูุฉ:**
ูุฌุจ ุฅููุงู ุงููุฌูุงุช ุงูุฌููุฑูุฉ (1-6) ูุจู ุงูุจุฏุก ูู ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงููุนููุฉ.

---

**ุขุฎุฑ ุชุญุฏูุซ:** 24 ุฏูุณูุจุฑ 2025
