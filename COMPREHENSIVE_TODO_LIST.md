# ๐ ูุงุฆูุฉ ุงูููุงู ุงูุดุงููุฉ ูุงุณุชููุงู ุงููุธุงู

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-01-29  
**ุงููุณุฎุฉ:** 1.0  
**ุงููุตุฏุฑ:** ุงูุชูุงุฑูุฑ ุงูุชูุตูููุฉ (TASK_1-4 + TASKS_11-33)

---

## ๐ฏ ููุงุญุธุงุช ูุงูุฉ:

- โ = ููุชูู
- โ๏ธ = ุฌุฒุฆู (ูุญุชุงุฌ ุงุณุชููุงู)
- โ = ุบูุฑ ููุฌูุฏ (ูุญุชุงุฌ ุจูุงุก ูู ุงูุตูุฑ)
- ๐ด = ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู
- ๐ก = ุฃููููุฉ ุนุงููุฉ
- ๐ข = ุฃููููุฉ ูุชูุณุทุฉ
- ๐ต = ุฃููููุฉ ููุฎูุถุฉ

---

# ุงููููุฉ 1: ุจูุงุก ุงูุฃุณุงุณ ุงููุนูุงุฑู (75% ููุชูู)

## 1.1: ุชุตููู ูุชูููุฐ ุจููุฉ ูุชุนุฏุฏุฉ ุงููุณุชุฃุฌุฑูู (Multi-Tenant Architecture)

### โ ููุชูู:
- โ ุฌุฏูู `businesses` ูู `drizzle/schema.ts`
- โ ุฌุฏูู `branches` ูู `drizzle/schema.ts`
- โ ุฌุฏูู `stations` ูู `drizzle/schema.ts`
- โ APIs ูุฅุฏุงุฑุฉ ุงููุญุทุงุช ูุงููุฑูุน

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- โ๏ธ **1.1.1** ุชุญุณูู ููุชุฑุฉ ุงูุจูุงูุงุช ุนูู ูุณุชูู Multi-Tenant (๐ด ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุถูุงู ุฃู ูู ูุณุชุฎุฏู ูุฑู ููุท ุจูุงูุงุช businessId/branchId/stationId ุงูุฎุงุตุฉ ุจู
  - **ุงูููู:** `server/middleware/auth.ts` ุฃู middleware ุฌุฏูุฏ
  - **ุงูุชูุงุตูู:**
    - ุฅุถุงูุฉ middleware ูุถูู `businessId`, `branchId`, `stationId` ุฅูู context ุชููุงุฆูุงู ูู token
    - ุชุนุฏูู ุฌููุน APIs ูููุชุฑุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู
    - ุฅุถุงูุฉ ูุญุต ุตูุงุญูุงุช ูููุตูู ุฅูู ุจูุงูุงุช ูุญุทุฉ/ูุฑุน ุขุฎุฑ

---

## 1.2: ุฅูุดุงุก ูุธุงู ูุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช

### โ ููุชูู:
- โ ุฌุฏูู `users` ูู `drizzle/schema.ts`
- โ ูุธุงู ุฃุณุงุณู ููุฃุฏูุงุฑ (roles)
- โ APIs ูุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- โ๏ธ **1.2.1** ุชุญุณูู ูุธุงู ุงูุตูุงุญูุงุช (๐ด ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ูุธุงู ุตูุงุญูุงุช ูุชูุฏู (Permission-Based) ุจุฏูุงู ูู Role-Based ููุท
  - **ุงููููุงุช:**
    - ุฅูุดุงุก `server/core/permissions.ts`
    - ุฅูุดุงุก ุฌุฏูู `permissions` ูู `drizzle/schema.ts`
    - ุฅูุดุงุก ุฌุฏูู `user_permissions` ูู `drizzle/schema.ts`
    - ุฅูุดุงุก ุฌุฏูู `role_permissions` ูู `drizzle/schema.ts`
  - **ุงูุชูุงุตูู:**
    - ุชุนุฑูู ุฌููุน ุงูุตูุงุญูุงุช (ูุซูุงู: `customers.create`, `customers.update`, `invoices.view`, etc.)
    - ุฑุจุท ุงูุตูุงุญูุงุช ุจุงูุฃุฏูุงุฑ
    - ุฑุจุท ุงูุตูุงุญูุงุช ุจุงููุณุชุฎุฏููู (ูููุณุชุฎุฏููู ุงูุฎุงุตูู)
    - middleware ููุชุญูู ูู ุงูุตูุงุญูุงุช
    - ูุงุฌูุฉ ูุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช

---

## 1.3: ุชุทููุฑ ุงููุงุฌูุงุช ุงูุฃุณุงุณูุฉ ูุฅุฏุงุฑุฉ ุงููุญุทุงุช

### โ ููุชูู:
- โ ูุงุฌูุงุช ุฅุฏุงุฑุฉ ุงููุญุทุงุช ุงูุฃุณุงุณูุฉ
- โ APIs ูููุญุทุงุช

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- โ๏ธ **1.3.1** ุชุญุณูู ูุงุฌูุงุช ุฅุฏุงุฑุฉ ุงููุญุทุงุช (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุฅุถุงูุฉ ููุฒุงุช ูุชูุฏูุฉ (ุฅุญุตุงุฆูุงุชุ ุชูุงุฑูุฑุ ุฅูุฎ)
  - **ุงููููุงุช:**
    - `client/src/pages/settings/StationsManagement.tsx`
  - **ุงูุชูุงุตูู:**
    - ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ููู ูุญุทุฉ (ุนุฏุฏ ุงูุนููุงุกุ ุงูููุงุชูุฑุ ุฅูุฎ)
    - ุฅุถุงูุฉ ุชูุงุฑูุฑ ูููุญุทุฉ
    - ุฅุถุงูุฉ ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุฎุงุตุฉ ุจูู ูุญุทุฉ

---

## 1.4: ุจูุงุก ุงููุญุฏุฉ ุงูุฃุณุงุณูุฉ ูุฅุฏุงุฑุฉ ุงููุดุชุฑููู ูุงูุนุฏุงุฏุงุช

### โ ููุชูู:
- โ ุฌุฏุงูู `customersEnhanced`, `metersEnhanced` ูู `drizzle/schema.ts`
- โ APIs ูุฅุฏุงุฑุฉ ุงูุนููุงุก ูุงูุนุฏุงุฏุงุช
- โ ูุงุฌูุงุช ุฅุฏุงุฑุฉ ุงูุนููุงุก

---

# ุงููููุฉ 2: ุฃุชูุชุฉ ุนูููุงุช ุงูุนุฏุงุฏุงุช ุงูุชูููุฏูุฉ (42% ููุชูู)

## 2.1: ุจูุงุก ูุงุฌูุฉ ุฅุฏุฎุงู ุงููุฑุงุกุงุช ุงููุฏููุฉ

### โ ููุชูู:
- โ ูุงุฌูุฉ ุฅุฏุฎุงู ุงููุฑุงุกุงุช (`MeterReadingsManagement.tsx`)
- โ ุงูุจุญุซ ุนู ุงููุดุชุฑู
- โ ุฅุฏุฎุงู ุงููุฑุงุกุฉ ุงูุญุงููุฉ
- โ ุญุณุงุจ ุงููุฑู ุชููุงุฆูุงู
- โ ุญูุธ ุงููุฑุงุกุฉ

### โ ุบูุฑ ููุฌูุฏ (ูุญุชุงุฌ ุจูุงุก):
- โ **2.1.1** ุชุทููุฑ ุชุทุจูู ุฌูุงู ูุฅุฏุฎุงู ุงููุฑุงุกุงุช (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุชุทุจูู React Native ุฃู Flutter ูููุธูู ูุฑุงุกุฉ ุงูุนุฏุงุฏุงุช
  - **ุงููููุงุช:**
    - ุฅูุดุงุก `mobile-apps/meter-reading-app/`
    - `mobile-apps/meter-reading-app/src/screens/LoginScreen.tsx`
    - `mobile-apps/meter-reading-app/src/screens/DashboardScreen.tsx`
    - `mobile-apps/meter-reading-app/src/screens/ReadingEntryScreen.tsx`
    - `mobile-apps/meter-reading-app/src/screens/ReadingsListScreen.tsx`
    - `mobile-apps/meter-reading-app/src/services/api.ts`
    - `mobile-apps/meter-reading-app/src/services/location.ts`
    - `mobile-apps/meter-reading-app/src/services/camera.ts`
  - **ุงูููุฒุงุช ุงููุทููุจุฉ:**
    - ุชุณุฌูู ุฏุฎูู
    - ูุงุฆูุฉ ุงูุนุฏุงุฏุงุช ุงููุทููุจุฉ ูุฑุงุกุชูุง
    - ูููุฐุฌ ุฅุฏุฎุงู ุงููุฑุงุกุฉ
    - ุงูุชูุงุท ุตูุฑุฉ ููุนุฏุงุฏ (2.1.5)
    - ุญูุธ ุงููุฑุงุกุฉ (ูุน/ุจุฏูู ุฅูุชุฑูุช - offline mode)
    - ูุฒุงููุฉ ุงููุฑุงุกุงุช ุนูุฏ ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
    - GPS tracking ูุชุณุฌูู ูููุน ุงููุฑุงุกุฉ

- โ **2.1.5** ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุชูุงุท ุตูุฑุฉ ูู ุงูุนุฏุงุฏ (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุฅุถุงูุฉ ุฅููุงููุฉ ุงูุชูุงุท ุตูุฑุฉ ุนูุฏ ุฅุฏุฎุงู ุงููุฑุงุกุฉ
  - **ุงููููุงุช:**
    - `client/src/pages/billing/invoicing/MeterReadingsManagement.tsx`
    - `server/billingRouter.ts` - ุชุญุฏูุซ schema `createMeterReading`
  - **ุงูุชูุงุตูู:**
    - ุฅุถุงูุฉ ุฒุฑ "ุงูุชูุงุท ุตูุฑุฉ" ูู ูููุฐุฌ ุฅุฏุฎุงู ุงููุฑุงุกุฉ
    - ุงุณุชุฎุฏุงู `navigator.mediaDevices.getUserMedia` ุฃู ููุชุจุฉ ูุซู `react-webcam`
    - ุญูุธ ุงูุตูุฑุฉ (base64 ุฃู upload ุฅูู S3/cloud storage)
    - ุชุญุฏูุซ ุฌุฏูู `meter_readings_enhanced` ูุฅุถุงูุฉ ุนููุฏ `images` (JSON array)
    - ุนุฑุถ ุงูุตูุฑ ูู ูุงุฆูุฉ ุงููุฑุงุกุงุช

- โ๏ธ **2.1.6** ุชุญุณูู ุงูุชุญูู ูู ุตุญุฉ ุงููุฑุงุกุฉ (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุฅุถุงูุฉ ููุทู ุชุญูู ุชููุงุฆู ูู ุงููุฑุงุกุฉ
  - **ุงููููุงุช:**
    - `server/billingRouter.ts` - `createMeterReading`
    - `server/core/meter-reading-validator.ts` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุญุณุงุจ ูุชูุณุท ุงูุงุณุชููุงู ุงูุดูุฑู ููุนููู (ุขุฎุฑ 12 ุดูุฑ)
    - ููุงุฑูุฉ ุงููุฑุงุกุฉ ุงูุญุงููุฉ ูุน ุงููุชูุณุท
    - ุชุญุฐูุฑ ุฅุฐุง ูุงูุช ุงููุฑุงุกุฉ ุฃุนูู ุจู 50% ูู ุงููุชูุณุท
    - ุชุญุฐูุฑ ุฅุฐุง ูุงูุช ุงููุฑุงุกุฉ ุฃูู ูู ุงููุฑุงุกุฉ ุงูุณุงุจูุฉ (ุนุฏุงุฏ ุนูุณู)
    - ุชุญุฐูุฑ ุฅุฐุง ูุงู ุงูุงุณุชููุงู = 0 (ูุญุชูู ุฎุทุฃ)
    - ุฅุถุงูุฉ ุญุงูุฉ `needs_review` ูููุฑุงุกุงุช ุงููุดููู ูููุง
    - ูุงุฌูุฉ ูููุฑุงุฌุนุฉ ูุงูููุงููุฉ ุนูู ุงููุฑุงุกุงุช ุงููุดููู ูููุง

- โ **2.1.9** ุจูุงุก ุชูุฑูุฑ ูููู ููููุธู (๐ข ุฃููููุฉ ูุชูุณุทุฉ)
  - **ุงููุตู:** ุชูุฑูุฑ ูููู ูุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูููุธู
  - **ุงููููุงุช:**
    - `client/src/pages/reports/EmployeeDailyReport.tsx` (ุฌุฏูุฏ)
    - `server/reportsRouter.ts` - `getEmployeeDailyReport` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุนุฏุฏ ุงููุฑุงุกุงุช ุงููุฏุฎูุฉ ุงูููู
    - ุนุฏุฏ ุงููุฑุงุกุงุช ุงููุนููุฉ (pending)
    - ุนุฏุฏ ุงููุฑุงุกุงุช ุงููุฑููุถุฉ
    - ุนุฏุฏ ุงููุฑุงุกุงุช ุงูุชู ุชุญุชุงุฌ ูุฑุงุฌุนุฉ
    - ูุชูุณุท ุงูุงุณุชููุงู ูููุฑุงุกุงุช ุงููุฏุฎูุฉ
    - ุฎุฑูุทุฉ ุชูุฒูุน ุงููุฑุงุกุงุช (ุฅุฐุง ูุงู GPS ูุชุงุญ)

---

## 2.2: ุชุทููุฑ ูุญุฏุฉ ุงูููุชุฑุฉ ุงูุฏูุฑูุฉ ุงูุชููุงุฆูุฉ

### โ ููุชูู:
- โ ููุทู ุงูููุชุฑุฉ ููุฌูุฏ ูู `billingRouter.ts`
- โ ุญุณุงุจ ุงูุงุณุชููุงู ุชููุงุฆูุงู
- โ ุญุณุงุจ ุงููุจูุบ ุงููุณุชุญู
- โ ุฅุถุงูุฉ ุงูุฑุณูู ูุงูุถุฑุงุฆุจ
- โ ุฅูุดุงุก ุณุฌู ุงููุงุชูุฑุฉ

### โ ุบูุฑ ููุฌูุฏ (ูุญุชุงุฌ ุจูุงุก):
- ๐ด **2.2.2** ุชูุนูู Cron Job ููููุชุฑุฉ ุงูุชููุงุฆูุฉ (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุชูุนูู Cron Job ุงูุฐู ูููุฐ ุงูููุชุฑุฉ ูู 10 ุฃูุงู ุชููุงุฆูุงู
  - **ุงูููู:** `server/core/cron-jobs.ts` (ุงูุณุทุฑ 65-73)
  - **ุงูุชูุงุตูู:**
    - ุฅุฒุงูุฉ `// TODO: ุชูููุฐ ุงูููุชุฑุฉ ุงูุชููุงุฆูุฉ`
    - ุงุณุชุฏุนุงุก `billingRouter.generateInvoices` ุฃู ุฅูุดุงุก ูุธููุฉ ูููุตูุฉ `autoBillingService.run()`
    - ุฌูุจ ุฌููุน ุงูุนุฏุงุฏุงุช ุงูุชู ุชุญุชุงุฌ ููุชุฑุฉ (ุขุฎุฑ ูุฑุงุกุฉ ูุจู 10 ุฃูุงู ุฃู ุฃูุซุฑ)
    - ุฅูุดุงุก ููุงุชูุฑ ููู ุนุฏุงุฏ
    - ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนูุฏ ูุฌุงุญ/ูุดู ุงูููุชุฑุฉ
    - ุชุณุฌูู log ููู ุนูููุฉ ููุชุฑุฉ
  - **ุงูููุฏ ุงููุทููุจ:**
    ```typescript
    // ูู cron-jobs.ts
    this.scheduleJob("auto-billing", "0 0 */10 * *", async () => {
      logger.info("Running auto-billing job...");
      try {
        const billingService = await import("../services/auto-billing-service");
        await billingService.default.run();
        logger.info("Auto-billing job completed");
      } catch (error: any) {
        logger.error("Auto-billing job failed", { error: error.message });
      }
    }, 10 * 24 * 60 * 60 * 1000);
    ```

- โ๏ธ **2.2.7** ุชุญุณูู ุชุญุฏูุซ ุญุงูุฉ ุงููุดุชุฑู (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุชุญุฏูุซ ุญุงูุฉ ุงููุดุชุฑู ุจูุงุกู ุนูู ุงูุฏููู ูุงูููุชุฑุฉ
  - **ุงููููุงุช:**
    - `server/billingRouter.ts` - `generateInvoices`
    - `server/services/customer-status-service.ts` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุญุณุงุจ ุฅุฌูุงูู ุงูุฏููู ูููุดุชุฑู
    - ุชุญุฏูุซ ุญุงูุฉ ุงููุดุชุฑู:
      - `active` ุฅุฐุง ูุงู ุงูุฑุตูุฏ <= 0
      - `suspended` ุฅุฐุง ูุงู ุงูุฑุตูุฏ > 0 ู <= ุญุฏ ุงูุชุนููู
      - `disconnected` ุฅุฐุง ูุงู ุงูุฑุตูุฏ > ุญุฏ ุงููุตู
    - ุฅุถุงูุฉ ุฌุฏูู `customer_status_history` ูุชุณุฌูู ุชุบููุฑุงุช ุงูุญุงูุฉ
    - ุฅุฑุณุงู ุฅุดุนุงุฑ ูููุดุชุฑู ุนูุฏ ุชุบููุฑ ุงูุญุงูุฉ

- โ๏ธ **2.2.8** ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุงุณุชุซูุงุกุงุช (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก ูู ุงูููุชุฑุฉ
  - **ุงููููุงุช:**
    - `server/services/auto-billing-service.ts` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ูุนุงูุฌุฉ ุญุงูุฉ: ูุฑุงุกุฉ ููููุฏุฉ โ ุชุณุฌูู ุฎุทุฃ ูุชุฎุทู ุงูุนุฏุงุฏ
    - ูุนุงูุฌุฉ ุญุงูุฉ: ุชุนุฑูุฉ ุบูุฑ ููุฌูุฏุฉ โ ุงุณุชุฎุฏุงู ุงูุชุนุฑูุฉ ุงูุงูุชุฑุงุถูุฉ ุฃู ุชุณุฌูู ุฎุทุฃ
    - ูุนุงูุฌุฉ ุญุงูุฉ: ุนุฏุงุฏ ุบูุฑ ูุฑุจูุท ุจูุดุชุฑู โ ุชุณุฌูู ุฎุทุฃ
    - ูุนุงูุฌุฉ ุญุงูุฉ: ูุดู ูู ุฅูุดุงุก ุงูููุฏ ุงููุญุงุณุจู โ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุฃู ุชุณุฌูู ุฎุทุฃ
    - ุฅูุดุงุก ุฌุฏูู `billing_errors` ูุชุณุฌูู ุฌููุน ุงูุฃุฎุทุงุก
    - ุชูุฑูุฑ ูููู ููุฃุฎุทุงุก ูููุญุงุณุจ

---

## 2.3: ุจูุงุก ูุญุฏุฉ ุงูุชูุงูู ูุน ุจูุงุจุงุช ุงูุฏูุน ุงูุฅููุชุฑูููุฉ

### โ ููุชูู:
- โ ุฅุฏุงุฑุฉ ุจูุงุจุงุช ุงูุฏูุน
- โ ุฅูุดุงุก ูุนุงููุงุช ุงูุฏูุน
- โ ุงูุชุนุงูู ูุน ุงูุฏูุนุงุช ุงููุงุฌุญุฉ/ุงููุงุดูุฉ
- โ ุชุณุฌูู ุงููุฏููุนุงุช
- โ ุฅูุดุงุก ุงูุฅูุตุงูุงุช

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- ๐ด **2.3.2** ุฅููุงู ุงูุชูุงูู ุงููุนูู ูุน ุจูุงุจุงุช ุงูุฏูุน (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุฅููุงู ุงูุชูุงูู ูุน ุจูุงุจุงุช ุงูุฏูุน (Moyasar, Sadad, etc.)
  - **ุงูููู:** `server/paymentGatewaysRouter.ts` (ุงูุณุทุฑ 163-229)
  - **ุงูุชูุงุตูู:**
    - ุฅุฒุงูุฉ `// TODO: ุงุณุชุฏุนุงุก API ุจูุงุจุฉ ุงูุฏูุน ูุฅูุดุงุก ุงููุนุงููุฉ`
    - ุฅูุดุงุก `server/services/payment-gateways/moyasar.ts` (ูุซุงู)
    - ุฅูุดุงุก `server/services/payment-gateways/sadad.ts` (ูุซุงู)
    - ุฏุงูุฉ `createTransaction(gateway, amount, customer, ...)` ููู ุจูุงุจุฉ
    - ูุนุงูุฌุฉ ุงุณุชุฌุงุจุฉ ุงูุจูุงุจุฉ
    - ุญูุธ `gateway_transaction_id` ูู ุฌุฏูู `payment_transactions`
    - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (rejected, timeout, etc.)

- ๐ด **2.3.8** ุฅููุงู ูุธุงู ุงูุชุญูู ูู ุงูุฏูุน (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุงูุชุญูู ูู ุญุงูุฉ ุงูุฏูุน ูู ุจูุงุจุฉ ุงูุฏูุน
  - **ุงูููู:** `server/paymentGatewaysRouter.ts` - `verification.verify` (ุงูุณุทุฑ 430-504)
  - **ุงูุชูุงุตูู:**
    - ุฅุฒุงูุฉ `// TODO: ุชูููุฐ ุงุณุชุฏุนุงุก API ูุนูู ุญุณุจ ููุน ุงูุจูุงุจุฉ`
    - ุงุณุชุฏุนุงุก API ุงูุจูุงุจุฉ ููุชุญูู ูู ุญุงูุฉ ุงููุนุงููุฉ
    - ุชุญุฏูุซ ุญุงูุฉ ุงููุนุงููุฉ ุจูุงุกู ุนูู ุงูุงุณุชุฌุงุจุฉ
    - ุฅุฐุง ูุงู ุงูุฏูุน ูุฌุญ โ ุงุณุชุฏุนุงุก `handleSuccess`
    - ุฅุฐุง ูุงู ุงูุฏูุน ูุดู โ ุงุณุชุฏุนุงุก `handleFailure`
    - ุฅุถุงูุฉ Cron Job ููุชุญูู ูู ุงููุนุงููุงุช ุงููุนููุฉ ูู ุณุงุนุฉ

---

## 2.4: ุจูุงุก ูุญุฏุฉ ุงูุชูุงูู ูุน SMS ู WhatsApp

### โ ููุชูู:
- โ ูููู SMS/WhatsApp ููุฌูุฏ
- โ APIs ููุชูุงูู ููุฌูุฏุฉ
- โ ููุงูุจ ุงูุฑุณุงุฆู ููุฌูุฏุฉ

### โ ุบูุฑ ููุฌูุฏ (ูุญุชุงุฌ ุจูุงุก):
- ๐ด **2.4.1** ุชูุนูู ุงูุชูุงูู ุงููุนูู ูุน SMS (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุชูุงูู ูุนูู ูุน ุฎุฏูุฉ SMS (Twilio, Nexmo, Unifonic, etc.)
  - **ุงูููู:** `server/notifications/channels/sms.ts`
  - **ุงูุชูุงุตูู:**
    - ุฅุฒุงูุฉ `logger.debug` ูู `send()` function
    - ุงุฎุชูุงุฑ ุฎุฏูุฉ SMS (ูุซูุงู: Twilio)
    - ุฅุถุงูุฉ ูุชุบูุฑุงุช ุจูุฆุฉ: `SMS_PROVIDER`, `SMS_API_KEY`, `SMS_API_SECRET`
    - ุชูููุฐ `sendSms(phoneNumber, message)` ุจุงุณุชุฎุฏุงู API ุงูุฎุฏูุฉ
    - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุฅุนุงุฏุฉ ุงููุญุงููุฉ
    - ุชุณุฌูู ุญุงูุฉ ุงูุฅุฑุณุงู (success/failed)
    - ุฅุถุงูุฉ ุฌุฏูู `sms_logs` ูุชุณุฌูู ุฌููุน ุงูุฑุณุงุฆู ุงููุฑุณูุฉ

- ๐ด **2.4.2** ุชูุนูู ุงูุชูุงูู ุงููุนูู ูุน WhatsApp (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุชูุงูู ูุนูู ูุน ุฎุฏูุฉ WhatsApp (Twilio, Infobip, etc.)
  - **ุงูููู:** `server/notifications/channels/whatsapp.ts`
  - **ุงูุชูุงุตูู:**
    - ุฅุฒุงูุฉ `// TODO: ุชูุงูู ูุนูู ูุน Twilio`
    - ุฅุถุงูุฉ ูุชุบูุฑุงุช ุจูุฆุฉ: `WHATSAPP_PROVIDER`, `WHATSAPP_API_KEY`, etc.
    - ุชูููุฐ `sendWhatsApp(phoneNumber, message, template)` ุจุงุณุชุฎุฏุงู API ุงูุฎุฏูุฉ
    - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุฅุนุงุฏุฉ ุงููุญุงููุฉ
    - ุชุณุฌูู ุญุงูุฉ ุงูุฅุฑุณุงู

- ๐ด **2.4.5** ุฅุถุงูุฉ ุฅุฑุณุงู ุงููุงุชูุฑุฉ ุชููุงุฆูุงู (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุฅุฑุณุงู ุงููุงุชูุฑุฉ ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุฆูุง
  - **ุงููููุงุช:**
    - `server/billingRouter.ts` - `invoices.create`
    - `server/services/invoice-notification-service.ts` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุจุนุฏ ุฅูุดุงุก ุงููุงุชูุฑุฉุ ุงุณุชุฏุนุงุก `sendInvoiceNotification(invoiceId)`
    - ุฌูุจ ุจูุงูุงุช ุงูุนููู (ุงููุงุชูุ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู)
    - ุฅุฑุณุงู SMS ุจุงููุงุชูุฑุฉ (ููุฎุต: ุฑูู ุงููุงุชูุฑุฉุ ุงููุจูุบุ ุชุงุฑูุฎ ุงูุงุณุชุญูุงู)
    - ุฅุฑุณุงู WhatsApp ุจุงููุงุชูุฑุฉ (ุตูุฑุฉ/PDF ุงููุงุชูุฑุฉ ุฅุฐุง ูุงู ูุชุงุญ)
    - ุฅุฑุณุงู Email ุจุงููุงุชูุฑุฉ (PDF ูุฑูู)
    - ุชุณุฌูู ุญุงูุฉ ุงูุฅุฑุณุงู ูู ุฌุฏูู `invoice_notifications`

- ๐ด **2.4.6** ุชูุนูู ุฅุฑุณุงู ุงูุชุฐููุฑุงุช (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุฅุฑุณุงู ุชุฐููุฑุงุช ุชููุงุฆูุฉ ููููุงุชูุฑ ุงููุชุฃุฎุฑุฉ
  - **ุงูููู:** `server/core/cron-jobs.ts` (ุงูุณุทุฑ 231-287)
  - **ุงูุชูุงุตูู:**
    - ุฅุฒุงูุฉ `// TODO: ุงุณุชุฏุนุงุก SMS Service`
    - ุฌูุจ ุฌููุน ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ (overdue)
    - ุฅุฑุณุงู ุชุฐููุฑ ููู ูุงุชูุฑุฉ (SMS + WhatsApp + Email)
    - ุชุฌูุจ ุฅุฑุณุงู ุชุฐููุฑ ุฃูุซุฑ ูู ูุฑุฉ ูู ุงูููู
    - ุชุณุฌูู ุงูุชุฐููุฑุงุช ุงููุฑุณูุฉ ูู ุฌุฏูู `payment_reminders`

- โ๏ธ **2.4.7** ุชุญุณูู ุฅุฑุณุงู ุชุฃููุฏ ุงูุฏูุน (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุงูุชุฃูุฏ ูู ุฅุฑุณุงู ุชุฃููุฏ ุงูุฏูุน ูุนููุงู
  - **ุงูููู:** `server/paymentGatewaysRouter.ts` (ุงูุณุทุฑ 346-365)
  - **ุงูุชูุงุตูู:**
    - ุงูุชุฃูุฏ ูู ุฃู `notificationService.sendPaymentConfirmation` ูุนูู ูุนููุงู
    - ุฅุฑุณุงู SMS + WhatsApp + Email
    - ุชุถููู: ุฑูู ุงูุฅูุตุงูุ ุงููุจูุบุ ุงูุชุงุฑูุฎุ ุฑูู ุงููุงุชูุฑุฉ
    - ุชุณุฌูู ุญุงูุฉ ุงูุฅุฑุณุงู

- โ **2.4.8** ุจูุงุก ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุนูุฏ ูุดู ุงูุฅุฑุณุงู
  - **ุงููููุงุช:**
    - `server/services/notification-queue.ts` (ุฌุฏูุฏ)
    - ุฌุฏูู `notification_queue` ูู `drizzle/schema.ts`
  - **ุงูุชูุงุตูู:**
    - ุนูุฏ ูุดู ุงูุฅุฑุณุงูุ ุญูุธ ุงูุทูุจ ูู ุฌุฏูู `notification_queue`
    - ุฅุถุงูุฉ ุญูู `retry_count` (ุนุฏุฏ ุงููุญุงููุงุช)
    - ุฅุถุงูุฉ ุญูู `next_retry_at` (ููุนุฏ ุงููุญุงููุฉ ุงูุชุงููุฉ)
    - Cron Job ูุนูุฏ ุงููุญุงููุฉ ูู ุณุงุนุฉ
    - ุจุนุฏ 3 ูุญุงููุงุช ูุงุดูุฉุ ุชุณุฌูู ุงูุฎุทุฃ ูุฅุฑุณุงู ุฅุดุนุงุฑ ูููุณุคูู
    - ุฏุนู exponential backoff (ุฒูุงุฏุฉ ุงูููุช ุจูู ุงููุญุงููุงุช)

---

# ุงููููุฉ 3: ุฃุชูุชุฉ ุนูููุงุช ุนุฏุงุฏุงุช STS (50% ููุชูู)

## 3.1: ุชุทููุฑ ูุญุฏุฉ ุงูุชูุงูู ูุน API ููุฏู ุฎุฏูุฉ STS

### โ ููุชูู:
- โ STS API Client ููุฌูุฏ
- โ STS Service ููุฌูุฏ
- โ ูุธููุฉ ุฅูุดุงุก ุทูุจ ุดุญู
- โ ุงุณุชูุจุงู ุงูุชููู

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- ๐ด **3.1.3** ุชูุนูู ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุงููุนูู (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุงููุนูู ูุน API ููุฏู ุฎุฏูุฉ STS
  - **ุงูููู:** `server/stsRouter.ts` - `api.testConnection` (ุงูุณุทุฑ 683-727)
  - **ุงูุชูุงุตูู:**
    - ุฅุฒุงูุฉ `// TODO: ุชูููุฐ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุงููุนูู ูุน API ููุฏู ุงูุฎุฏูุฉ`
    - ุงุณุชุฏุนุงุก `stsApiClient.testConnection()` ุฃู API endpoint ููุงุฎุชุจุงุฑ
    - ุงูุชุญูู ูู ุงูุฑุฏ (success/timeout/error)
    - ุชุญุฏูุซ ุญุงูุฉ ุงูุงุชุตุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    - ุฅุฑุณุงู ุฅุดุนุงุฑ ูููุณุคูู ุนูุฏ ูุดู ุงูุงุชุตุงู

- โ๏ธ **3.1.6** ุฅููุงู ุงูุชุญูู ูู ุญุงูุฉ ุงูุดุญู (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุงูุชุญูู ูู ุญุงูุฉ ุงูุดุญู ูู API
  - **ุงูููู:** `server/stsRouter.ts` - `charging.verifyCharge` (ุงูุณุทุฑ 556-590)
  - **ุงูุชูุงุตูู:**
    - ุฅุฒุงูุฉ `// TODO: ุงุณุชุฏุนุงุก API ููุชุญูู ูู ุญุงูุฉ ุงูุดุญู`
    - ุงุณุชุฏุนุงุก API STS ููุชุญูู ูู ุญุงูุฉ ุงูุดุญู
    - ุชุญุฏูุซ ุญุงูุฉ ุงูุดุญู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    - ุฅุฐุง ูุงู ุงูุดุญู ูุฌุญ โ ุชุญุฏูุซ ุญุงูุฉ ุงูุนุฏุงุฏ
    - ุฅุฐุง ูุงู ุงูุดุญู ูุดู โ ุฅุฑุณุงู ุฅุดุนุงุฑ ูุชุฑุงุฌุน ุงูุฏูุน (ุฅู ุฃููู)

- โ **3.1.7** ุจูุงุก ูุธููุฉ ุฅูุบุงุก ุงูุดุญู (๐ข ุฃููููุฉ ูุชูุณุทุฉ)
  - **ุงููุตู:** ุฅูุบุงุก ุทูุจ ุดุญู ุชู ุฅูุดุงุคู
  - **ุงููููุงุช:**
    - `server/stsRouter.ts` - `charging.cancelCharge` (ุฌุฏูุฏ)
    - `server/developer/integrations/sts-api-client.ts` - `cancelCharge` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุงุณุชุฏุนุงุก API STS ูุฅูุบุงุก ุงูุดุญู
    - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ุฅูู `cancelled`
    - ุฅุฐุง ูุงู ุงูุฏูุน ุชู โ ุฅุฑุฌุงุน ุงููุจูุบ (refund)
    - ุฅูุดุงุก ููุฏ ูุญุงุณุจู ูุฅูุบุงุก ุงูุดุญู
    - ุฅุฑุณุงู ุฅุดุนุงุฑ ููุนููู

- โ๏ธ **3.1.8** ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก ูู STS
  - **ุงููููุงุช:**
    - `server/services/sts-error-handler.ts` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุชุตููู ุงูุฃุฎุทุงุก (network error, API error, validation error, etc.)
    - ูุนุงูุฌุฉ ูู ููุน ุฎุทุฃ ุจุดูู ููุงุณุจ
    - ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ ููุฃุฎุทุงุก ุงููุคูุชุฉ (network timeout)
    - ุชุณุฌูู ุฌููุน ุงูุฃุฎุทุงุก ูู ุฌุฏูู `sts_errors`
    - ุฅุดุนุงุฑุงุช ูููุณุคูู ุนูุฏ ุฃุฎุทุงุก ุญุฑุฌุฉ

---

## 3.2: ุชุทููุฑ ูุงุฌูุฉ "ุดุญู ุงูุฑุตูุฏ"

### โ ููุชูู:
- โ ุตูุญุฉ ุงูุดุญู ููุฌูุฏุฉ
- โ ุฅุฏุฎุงู ุงููุจูุบ
- โ ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน
- โ ุนุฑุถ ุงูุชููู

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- ๐ด **3.2.4** ุฅููุงู ูุนุงูุฌุฉ ุงูุฏูุน ุงููุนูู (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ูุนุงูุฌุฉ ุงูุฏูุน ุงููุนูู ูุจู ุชูููุฏ ุงูุชููู
  - **ุงูููู:** `server/stsRouter.ts` (ุงูุณุทุฑ 370-376)
  - **ุงูุชูุงุตูู:**
    - ุฅุฒุงูุฉ `// TODO: ุงูุชุญูู ูู ุงูุฏูุน ูู ุจูุงุจุฉ ุงูุฏูุน`
    - ุฅุฐุง ูุงูุช ุทุฑููุฉ ุงูุฏูุน = `bank_transfer` โ ุงูุงูุชุธุงุฑ ุญุชู ูุชู ุงูุชุญูู ูู ุงูุฅูุฏุงุน ุงูุจููู
    - ุฅุฐุง ูุงูุช ุทุฑููุฉ ุงูุฏูุน = `card` โ ุงุณุชุฏุนุงุก ุจูุงุจุฉ ุงูุฏูุน ูุจุงุดุฑุฉ
    - ุฅุฐุง ูุงูุช ุทุฑููุฉ ุงูุฏูุน = `wallet` โ ุงูุชุญูู ูู ุฑุตูุฏ ุงููุญูุธุฉ ูุฎุตู ุงููุจูุบ
    - ููุท ุจุนุฏ ุงูุชุญูู ูู ุงูุฏูุน ุงููุงุฌุญ โ ุงุณุชุฏุนุงุก STS API

- โ๏ธ **3.2.6** ุฅุถุงูุฉ ุฎูุงุฑ ูุณุฎ ุงูุชููู (๐ข ุฃููููุฉ ูุชูุณุทุฉ)
  - **ุงููุตู:** ุฅููุงููุฉ ูุณุฎ ุงูุชููู ุฅูู ุงูุญุงูุธุฉ
  - **ุงููููุงุช:**
    - `client/src/pages/sts/STSCharging.tsx`
    - ุฃู ุตูุญุฉ ุนุฑุถ ุงูุชูููุงุช
  - **ุงูุชูุงุตูู:**
    - ุฒุฑ "ูุณุฎ" ุจุฌุงูุจ ุงูุชููู
    - ุงุณุชุฎุฏุงู `navigator.clipboard.writeText(token)`
    - ุนุฑุถ ุฑุณุงูุฉ ุชุฃููุฏ "ุชู ูุณุฎ ุงูุชููู"

- ๐ด **3.2.7** ุชูุนูู ุฅุฑุณุงู ุงูุชููู ุนุจุฑ SMS (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุฅุฑุณุงู ุงูุชููู ูุนููุงู ุนุจุฑ SMS
  - **ุงูููู:** `server/stsRouter.ts` (ุงูุณุทุฑ 469-491)
  - **ุงูุชูุงุตูู:**
    - ุงูุชุฃูุฏ ูู ุฃู `notificationService.send()` ูุนูู ูุนููุงู (ูุฑุงุฌุน 2.4.1)
    - ุฅุฑุณุงู SMS ูุญุชูู ุนูู: ุฑูู ุงูุนุฏุงุฏุ ุงูุชูููุ ุงููุจูุบุ ุงููููููุงุช ุงููููุฏุฉ
    - ุชุณุฌูู ุญุงูุฉ ุงูุฅุฑุณุงู

- โ **3.2.8** ุฅุถุงูุฉ ุฅุฑุณุงู ุงูุชููู ุนุจุฑ Email (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุฅุฑุณุงู ุงูุชููู ุนุจุฑ Email
  - **ุงููููุงุช:**
    - `server/notifications/channels/email.ts` (ุฌุฏูุฏ)
    - `server/stsRouter.ts` - ุชุญุฏูุซ `createCharge`
  - **ุงูุชูุงุตูู:**
    - ุฅูุดุงุก `emailChannel.ts` ูุน ุชูุงูู ูุน ุฎุฏูุฉ Email (SendGrid, AWS SES, etc.)
    - ุฅุฑุณุงู Email ูุญุชูู ุนูู: ุฑูู ุงูุนุฏุงุฏุ ุงูุชูููุ ุงููุจูุบุ ุงููููููุงุชุ QR Code (ุงุฎุชูุงุฑู)
    - ุฅุฑูุงู PDF ุจุงูุชููู (ุฅู ุฃููู)
    - ุชุณุฌูู ุญุงูุฉ ุงูุฅุฑุณุงู

---

## 3.3: ุจุฑูุฌุฉ ููุทู ุงูุฃุชูุชุฉ ุงูููุฑู

### โ ููุชูู:
- โ ุชุตููู ุณูุฑ ุงูุนูููุฉ
- โ ุงุณุชูุจุงู ุงูุชููู ูู API
- โ ุชุณุฌูู ุงูุนูููุฉ
- โ ุชุณุฌูู ุงูุนูููุฉ ุงููุงููุฉ

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- ๐ด **3.3.2** ุฅููุงู ุงูุฏูุน ุงููุงุฌุญ โ ุงุณุชุฏุนุงุก API (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุงูุชุฃูุฏ ูู ุงุณุชุฏุนุงุก API ููุท ุจุนุฏ ูุฌุงุญ ุงูุฏูุน
  - **ุงูููู:** `server/stsRouter.ts` (ุงูุณุทุฑ 378-504)
  - **ุงูุชูุงุตูู:**
    - ุฅููุงู ุงูุชุญูู ูู ุงูุฏูุน (ูุฑุงุฌุน 3.2.4)
    - ููุท ุจุนุฏ `paymentVerified === true` โ ุงุณุชุฏุนุงุก STS API
    - ุฅุฐุง ูุดู ุงูุฏูุน โ ุฅูุบุงุก ุงูุทูุจ ูุฅุฑุฌุงุน ุงููุจูุบ

- ๐ด **3.3.4** ุชูุนูู ุฅุฑุณุงู ุงูุชููู ููุนููู (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุงูุชุฃูุฏ ูู ุฅุฑุณุงู ุงูุชููู ูุนููุงู
  - **ุงูููู:** `server/stsRouter.ts` (ุงูุณุทุฑ 469-491)
  - **ุงูุชูุงุตูู:**
    - ุงูุชุฃูุฏ ูู ุชูุนูู SMS/Email (ูุฑุงุฌุน 3.2.7, 3.2.8)
    - ุฅุฑุณุงู ุชููุงุฆู ุจุนุฏ ูุฌุงุญ ุงูุดุญู
    - ุชุณุฌูู ุญุงูุฉ ุงูุฅุฑุณุงู

- โ๏ธ **3.3.6** ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก ูุน rollback
  - **ุงูููู:** `server/stsRouter.ts`
  - **ุงูุชูุงุตูู:**
    - ุฅุฐุง ูุดู ุงุณุชุฏุนุงุก STS API ุจุนุฏ ูุฌุงุญ ุงูุฏูุน:
      - ุฅูุบุงุก ุงูุฏูุน (refund)
      - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ุฅูู `failed`
      - ุฅุฑุณุงู ุฅุดุนุงุฑ ููุนููู ูุงููุญุงุณุจ
    - ูุง ุงุณุชุฎุฏุงู `generateMockToken` ูู ุงูุฅูุชุงุฌ
    - ุชุณุฌูู ุฌููุน ุงูุฃุฎุทุงุก

- โ **3.3.8** ุฅุถุงูุฉ ุฅุดุนุงุฑ ุงููุญุงุณุจ (๐ข ุฃููููุฉ ูุชูุณุทุฉ)
  - **ุงููุตู:** ุฅุฑุณุงู ุฅุดุนุงุฑ ูููุญุงุณุจ ุนูุฏ ูุฌุงุญ ุงูุดุญู
  - **ุงููููุงุช:**
    - `server/stsRouter.ts` - ุชุญุฏูุซ `createCharge`
    - `server/services/accountant-notification-service.ts` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุฌูุจ ุฌููุน ุงููุญุงุณุจูู (role = 'accountant')
    - ุฅุฑุณุงู Email/WhatsApp ูููุญุงุณุจูู ุจุชูุงุตูู ุงูุดุญู
    - ููุฎุต ูููู ูู ููุงูุฉ ุงูููู ูุฌููุน ุนูููุงุช ุงูุดุญู

---

# ุงููููุฉ 4: ุจูุงุก ูุญุฏุฉ ุงูุฑุจุท ุงููุญุงุณุจู ุงูุชููุงุฆู (58% ููุชูู)

## 4.1: ุชุตููู ุดุฌุฑุฉ ุงูุญุณุงุจุงุช

### โ ููุชูู:
- โ ุฌุฏูู `accounts` ูู `drizzle/schema.ts`
- โ ูุงุฌูุฉ `ChartOfAccounts.tsx`
- โ ุฅูุดุงุก ุญุณุงุจุงุช ุงูุฃุตูู/ุงูุฅูุฑุงุฏุงุช/ุงูุฑุณูู

### โ ุบูุฑ ููุฌูุฏ (ูุญุชุงุฌ ุจูุงุก):
- ๐ด **4.1.5** ุฅูุดุงุก ุชูุซูู ุดุฌุฑุฉ ุงูุญุณุงุจุงุช (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุชูุซูู ูุดุฑุญ ูููู ุดุฌุฑุฉ ุงูุญุณุงุจุงุช
  - **ุงููููุงุช:**
    - `docs/accounting/chart-of-accounts.md` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุดุฑุญ ูููู ุงูุญุณุงุจุงุช (ุงูุฃุตููุ ุงูุฎุตููุ ุงูุฅูุฑุงุฏุงุชุ ุงููุตุฑููุงุช)
    - ูุงุฆูุฉ ุงูุญุณุงุจุงุช ุงูุงูุชุฑุงุถูุฉ ุงููุทููุจุฉ
    - ุดุฑุญ ูุธุงู ุงูุชุฑููุฒ (ูุซูุงู: 1xxx ููุฃุตููุ 2xxx ููุฎุตููุ etc.)
    - ุฃูุซูุฉ ุนูู ููููุฉ ุงุณุชุฎุฏุงู ูู ุญุณุงุจ

- ๐ด **4.1.6** ุฅูุดุงุก ุญุณุงุจุงุช ูุญุงุณุจูุฉ ุงูุชุฑุงุถูุฉ (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุฅูุดุงุก ุญุณุงุจุงุช ูุญุงุณุจูุฉ ุงูุชุฑุงุถูุฉ ุนูุฏ ุจุฏุก ุงููุธุงู
  - **ุงููููุงุช:**
    - `server/seed-accounts.ts` (ุฌุฏูุฏ)
    - `server/seed-complete.ts` - ุงุณุชุฏุนุงุก `seedAccounts`
  - **ุงูุชูุงุตูู:**
    - ุฅูุดุงุก ุญุณุงุจุงุช ุงูุฃุตูู:
      - `1100` - ุงูููุฏูุฉ (Cash)
      - `1110` - ุงูุจูู ุงูุนุงู (Bank Account)
      - `1111` - ุจูู ุงูุฑุงุฌุญู
      - `1112` - ุจูู ุงูุฃููู
      - `1200` - ุงูุนููุงุก (Customers)
      - `1300` - ุงููุฎุฒูู (Inventory)
    - ุฅูุดุงุก ุญุณุงุจุงุช ุงูุฅูุฑุงุฏุงุช:
      - `4100` - ุฅูุฑุงุฏุงุช ุงูููุฑุจุงุก (Electricity Revenue)
      - `4101` - ุฅูุฑุงุฏ ุงูุฏูุน ุงููุณุจู (Prepaid Revenue)
      - `4102` - ุฅูุฑุงุฏ ุงูุงุดุชุฑุงูุงุช (Subscription Revenue)
      - `4200` - ูุจูุนุงุช ุงููุนุฏุงุช (Equipment Sales)
    - ุฅูุดุงุก ุญุณุงุจุงุช ุงููุตุฑููุงุช:
      - `5100` - ุงููุตุฑููุงุช ุงูุนุงูุฉ (General Expenses)
      - `5101` - ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ (COGS)
    - ุฅูุดุงุก ุญุณุงุจุงุช ุงูุฎุตูู:
      - `2100` - ุงูููุฑุฏูู (Suppliers)
      - `2200` - ุจุถุงุนุฉ ูุงุฑุฏุฉ (Goods Received)
      - `2300` - ุงููุฎุตุตุงุช (Provisions)
    - ุฏุงูุฉ `seedAccounts(businessId)` ุชูุดุฆ ูุฐู ุงูุญุณุงุจุงุช ุชููุงุฆูุงู

---

## 4.2: ุจุฑูุฌุฉ ุขููุฉ ุฅูุดุงุก ุงููููุฏ ุงููุญุงุณุจูุฉ ุงูุชููุงุฆูุฉ

### โ ููุชูู:
- โ ููุทู ุงูููุฏ (`AutoJournalEngine`)
- โ ููุฏ ุงูุฏูุน ูู ุนุฏุงุฏ ุชูููุฏู
- โ ููุฏ ุงูุดุญู ูู ุนุฏุงุฏ STS
- โ ุชุณุฌูู ุงูุชูุงุตูู
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ ุงูุชุญูู ูู ุงูุชูุงุฒู

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- โ๏ธ **4.2.4** ุชุญุณูู ูุนุงูุฌุฉ ุงูุฑุณูู ูุงูุถุฑุงุฆุจ ูู ุงููููุฏ (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุชุณุฌูู ุชูุตูู ุงูุฑุณูู ูุงูุถุฑุงุฆุจ ูู ุงูููุฏ ุงููุญุงุณุจู
  - **ุงูููู:** `server/core/auto-journal-engine.ts` - `onInvoiceCreated`
  - **ุงูุชูุงุตูู:**
    - ุจุฏูุงู ูู ุชุณุฌูู ุงููุจูุบ ุงูุฅุฌูุงูู ููุทุ ุชุณุฌูู ุชูุงุตูู:
      - ุจูุฏ: ุฅูุฑุงุฏ ุงูููุฑุจุงุก (ูุจู ุงูุถุฑูุจุฉ)
      - ุจูุฏ: ุงูุฑุณูู (ูุซูุงู: ุฑุณูู ุฎุฏูุฉ)
      - ุจูุฏ: ุงูุถุฑูุจุฉ (VAT 15%)
    - ุญุณุงุจ ุงูุญุณุงุจุงุช ุงูููุงุณุจุฉ ููู ููุน ุฑุณูู
    - ูุซุงู:
      ```
      ูุฏูู: ุงูุนููุงุก (1200) - 1150 ุฑูุงู
      ุฏุงุฆู: ุฅูุฑุงุฏ ุงูููุฑุจุงุก (4100) - 1000 ุฑูุงู
      ุฏุงุฆู: ุฑุณูู ุงูุฎุฏูุฉ (4103) - 50 ุฑูุงู
      ุฏุงุฆู: ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ (2301) - 100 ุฑูุงู
      ```

- ๐ด **4.2.8** ุฅุถุงูุฉ ุฅูุดุงุก ุชููุงุฆู ููุญุณุงุจุงุช ุงููุทููุจุฉ (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุฅูุดุงุก ุญุณุงุจุงุช ุชููุงุฆูุงู ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
  - **ุงูููู:** `server/core/auto-journal-engine.ts` - `getAccountByCode`
  - **ุงูุชูุงุตูู:**
    - ุฅุฐุง ูุงู ุงูุญุณุงุจ ุบูุฑ ููุฌูุฏุ ุฅูุดุงุคู ุชููุงุฆูุงู:
      - ุชุญุฏูุฏ ููุน ุงูุญุณุงุจ ูู ุงูููุฏ (1xxx = ุฃุตูู, 2xxx = ุฎุตูู, 4xxx = ุฅูุฑุงุฏุงุช, 5xxx = ูุตุฑููุงุช)
      - ุชุญุฏูุฏ ุทุจูุนุฉ ุงูุญุณุงุจ (debit/credit)
      - ุฅูุดุงุก ุงูุญุณุงุจ ุชููุงุฆูุงู
      - ุชุณุฌูู warning log
    - ุฃู: ุฅุถุงูุฉ fallback ูุญุณุงุจุงุช ุงูุชุฑุงุถูุฉ (ูุซูุงู: ุฅุฐุง ูู ููุฌุฏ 1200ุ ุงุณุชุฎุฏุงู ุญุณุงุจ ุนุงู)

---

## 4.3: ุชุทููุฑ ูุงุฌูุฉ ูุนุฑุถ ูููุฏ ุงูููููุฉ

### โ ููุชูู:
- โ ุดุงุดุฉ ุนุฑุถ ุงููููุฏ (`JournalEntries.tsx`)
- โ ุชูุงุตูู ุงูููุฏ
- โ ุงูุชุตุฏูู ุนูู ุงููููุฏ

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- โ๏ธ **4.3.3** ุฅุถุงูุฉ ููุชุฑุฉ ูุชูุฏูุฉ (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ููุชุฑุฉ ูุชูุฏูุฉ ูููููุฏ
  - **ุงูููู:** `client/src/pages/accounting/JournalEntries.tsx`
  - **ุงูุชูุงุตูู:**
    - ููุชุฑ ุญุณุจ ุงูุชุงุฑูุฎ (startDate, endDate) - DatePicker
    - ููุชุฑ ุญุณุจ ุงูููุน (`type`: manual, auto, invoice, payment, etc.)
    - ููุชุฑ ุญุณุจ ุงููุญุฏุฉ ุงููุตุฏุฑ (`sourceModule`)
    - ููุชุฑ ุญุณุจ ุงูุญุงูุฉ (`status`: draft, posted, reversed)
    - ุจุญุซ ูู ุงููุตู (`description`)
    - ุจุญุซ ูู ุฑูู ุงูููุฏ (`entryNumber`)
    - ุญูุธ ุงูููุงุชุฑ ุงูููุถูุฉ (favorite filters)

- โ **4.3.5** ุฅุถุงูุฉ ุชุตุฏูุฑ ุงููููุฏ (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุชุตุฏูุฑ ุงููููุฏ ุฅูู Excel ุฃู PDF
  - **ุงููููุงุช:**
    - `client/src/pages/accounting/JournalEntries.tsx` - ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุงูุชุตุฏูุฑ
    - `server/exportRouter.ts` - `exportJournalEntries` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุฒุฑ "ุชุตุฏูุฑ Excel" โ ุงุณุชุฏุนุงุก API ูุนูุฏ Excel file
    - ุฒุฑ "ุชุตุฏูุฑ PDF" โ ุงุณุชุฏุนุงุก API ูุนูุฏ PDF file
    - ุงุณุชุฎุฏุงู ููุชุจุงุช: `xlsx` ููู Excelุ `pdfkit` ุฃู `puppeteer` ููู PDF
    - ุชุถููู: ุฌููุน ุงููููุฏ ุงููููุชุฑุฉ ูุน ุจููุฏูุง
    - ุชุตููู ุงุญุชุฑุงูู ููู PDF (header, footer, table format)

- โ **4.3.6** ุจูุงุก ุชูุฑูุฑ ูููู ูููููุฏ (๐ข ุฃููููุฉ ูุชูุณุทุฉ)
  - **ุงููุตู:** ุชูุฑูุฑ ูููู ูุนุฑุถ ููุฎุต ุงููููุฏ
  - **ุงููููุงุช:**
    - `client/src/pages/reports/DailyJournalReport.tsx` (ุฌุฏูุฏ)
    - `server/reportsRouter.ts` - `getDailyJournalReport` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุนุฏุฏ ุงููููุฏ ุงูููุดุฃุฉ ุงูููู
    - ุนุฏุฏ ุงููููุฏ ุงููุฑุญูุฉ
    - ุฅุฌูุงูู ุงููุฏูู
    - ุฅุฌูุงูู ุงูุฏุงุฆู
    - ุนุฏุฏ ุงููููุฏ ููู ููุน
    - ุนุฏุฏ ุงููููุฏ ููู ูุญุฏุฉ
    - ูุงุฆูุฉ ุงููููุฏ ุงููุนููุฉ (draft)

---

## 4.4: ุชุทููุฑ ูุงุฌูุฉ "ูุทุงุจูุฉ ุงูุฅูุฏุงุนุงุช ุงูุจูููุฉ"

### โ ููุชูู:
- โ `ReconciliationEngine` ููุฌูุฏ (ููู ููุณ ูุฎุตุตุงู ููุทุงุจูุฉ ุงูุจูู)

### โ ุบูุฑ ููุฌูุฏ (ูุญุชุงุฌ ุจูุงุก):
- ๐ด **4.4.1** ุจูุงุก ุดุงุดุฉ ูุทุงุจูุฉ ุงูุฅูุฏุงุนุงุช ุงูุจูููุฉ (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุดุงุดุฉ ูุฎุตุตุฉ ููุทุงุจูุฉ ุงูุฅูุฏุงุนุงุช ุงูุจูููุฉ ูุน ุงูููุงุชูุฑ
  - **ุงููููุงุช:**
    - `client/src/pages/accounting/BankReconciliation.tsx` (ุฌุฏูุฏ)
    - `server/accountingRouter.ts` - `bankReconciliation` router (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุนููุฏุงู (panels):
      - ุงูุนููุฏ ุงูุฃูุณุฑ: ุงูุฅูุฏุงุนุงุช ุงูุจูููุฉ ุบูุฑ ุงููุทุงุจูุฉ
      - ุงูุนููุฏ ุงูุฃููู: ุงูููุงุชูุฑ ุงูููุชูุญุฉ
    - ุนุฑุถ ุจูุงูุงุช ูู ุฅูุฏุงุน: ุงูุชุงุฑูุฎุ ุงููุจูุบุ ุฑูู ุงููุฑุฌุนุ ุงููุตู
    - ุนุฑุถ ุจูุงูุงุช ูู ูุงุชูุฑุฉ: ุฑูู ุงููุงุชูุฑุฉุ ุงูุนูููุ ุงููุจูุบุ ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
    - ุฅููุงููุฉ ุงูุณุญุจ ูุงูุฅููุงุช (drag & drop) ููุทุงุจูุฉ ุงูุฅูุฏุงุน ูุน ุงููุงุชูุฑุฉ
    - ุฅููุงููุฉ ุงููุทุงุจูุฉ ุงููุฏููุฉ (ุชุญุฏูุฏ ุฅูุฏุงุน + ูุงุชูุฑุฉ โ ุฒุฑ "ูุทุงุจูุฉ")
    - ุฅููุงููุฉ ุงููุทุงุจูุฉ ุงูุชููุงุฆูุฉ (ุฒุฑ "ูุทุงุจูุฉ ุชููุงุฆูุฉ") - ุจูุงุกู ุนูู ุงููุจูุบ ูุงูุนููู
    - ุนุฑุถ ุญุงูุฉ ุงููุทุงุจูุฉ (ูุทุงุจู/ุบูุฑ ูุทุงุจู/ุฌุฒุฆู)
    - ุฒุฑ "ุฅูุดุงุก ููุฏ" ุจุนุฏ ุงููุทุงุจูุฉ

- โ **4.4.2** ุจูุงุก ุฌุฏูู ููุฅูุฏุงุนุงุช ุงูุจูููุฉ (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุฌุฏูู ูุฎุตุต ููุฅูุฏุงุนุงุช ุงูุจูููุฉ
  - **ุงููููุงุช:**
    - ุฌุฏูู `bank_deposits` ูู `drizzle/schema.ts` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุงูุญููู ุงููุทููุจุฉ:
      - `id`, `business_id`, `bank_account_id`
      - `deposit_date`, `amount`, `reference_number`
      - `description`, `customer_name` (ูู ุงูุจูู)
      - `status` (unmatched, matched, partially_matched)
      - `matched_with_invoice_id`, `matched_amount`
      - `created_at`, `updated_at`
    - APIs: `list`, `getById`, `create`, `update`, `match`

- โ **4.4.3** ุฅุถุงูุฉ ุนุฑุถ ุงูููุงุชูุฑ ุงูููุชูุญุฉ (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุนุฑุถ ุงูููุงุชูุฑ ุงูููุชูุญุฉ ูู ุดุงุดุฉ ุงููุทุงุจูุฉ
  - **ุงูููู:** `client/src/pages/accounting/BankReconciliation.tsx`
  - **ุงูุชูุงุตูู:**
    - ุฌูุจ ุฌููุน ุงูููุงุชูุฑ ูุน `status = 'unpaid'` ุฃู `balanceDue > 0`
    - ุนุฑุถ: ุฑูู ุงููุงุชูุฑุฉุ ุงุณู ุงูุนูููุ ุงููุจูุบ ุงููุณุชุญูุ ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
    - ููุชุฑุฉ ุญุณุจ: ุงูุนูููุ ุงููุจูุบุ ุงูุชุงุฑูุฎ
    - ุฅุจุฑุงุฒ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ (overdue)

- โ **4.4.6** ุจูุงุก ุชูุฑูุฑ ุงููุทุงุจูุฉ (๐ข ุฃููููุฉ ูุชูุณุทุฉ)
  - **ุงููุตู:** ุชูุฑูุฑ ูุนุฑุถ ุฅุญุตุงุฆูุงุช ุงููุทุงุจูุฉ
  - **ุงููููุงุช:**
    - `client/src/pages/reports/ReconciliationReport.tsx` (ุฌุฏูุฏ)
    - `server/reportsRouter.ts` - `getReconciliationReport` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุนุฏุฏ ุงูุฅูุฏุงุนุงุช ุงููุทุงุจูุฉ
    - ุนุฏุฏ ุงูุฅูุฏุงุนุงุช ุบูุฑ ุงููุทุงุจูุฉ
    - ุฅุฌูุงูู ุงููุจุงูุบ ุงููุทุงุจูุฉ
    - ุฅุฌูุงูู ุงููุจุงูุบ ุบูุฑ ุงููุทุงุจูุฉ
    - ูุงุฆูุฉ ุงูุฅูุฏุงุนุงุช ุบูุฑ ุงููุทุงุจูุฉ (ุฃูุซุฑ ูู 30 ููู)
    - ุชูุฑูุฑ ุดูุฑู/ุณููู

---

# ุงูููุงู 11-33: ุงูุฃูุธูุฉ ุงููุชูุฏูุฉ (12% ููุชูู)

## ุงููููุฉ 11: ูุธุงู ุงููุนูููุงุช ุงูุฌุบุฑุงููุฉ (GIS)

### โ ุบูุฑ ููุฌูุฏ (ูุญุชุงุฌ ุจูุงุก ูู ุงูุตูุฑ):
- โ **11.1** ุจูุงุก ูุธุงู GIS ูุจุณุท (๐ต ุฃููููุฉ ููุฎูุถุฉ - ูููู ุชุฃุฌููู)
  - **ุงููุตู:** ูุงุฌูุฉ ุฎุฑูุทุฉ ูุนุฑุถ ุงููุดุชุฑููู ูุงูุทุจูููุงุช
  - **ุงููููุงุช:**
    - `client/src/pages/gis/GISView.tsx` (ุฌุฏูุฏ)
    - `server/gisRouter.ts` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุงุณุชุฎุฏุงู `Map.tsx` component ุงูููุฌูุฏ
    - ุฌูุจ ุฌููุน ุงููุดุชุฑููู ูุน ุฅุญุฏุงุซูุงุช GPS (`latitude`, `longitude`)
    - ุฌูุจ ุฌููุน ุงูุทุจูููุงุช ูุน ุฅุญุฏุงุซูุงุช GPS
    - ุนุฑุถ markers ุนูู ุงูุฎุฑูุทุฉ ููู ูุดุชุฑู/ุทุจููู
    - ุนูุฏ ุงูููุฑ ุนูู marker โ ุนุฑุถ ูุนูููุงุช ุงููุดุชุฑู/ุงูุทุจููู
    - ุฑุณู ุฎุทูุท ุจูู ุงููุดุชุฑู ูุงูุทุจููู ุงูุฎุงุต ุจู

- โ **11.2** ุจูุงุก ุฃุฏุงุฉ ุชุฎุทูุท ุงูุดุจูุฉ ุงูุฐููุฉ (๐ต ุฃููููุฉ ููุฎูุถุฉ)
  - **ุงููุตู:** ุฃุฏุงุฉ ุชุณูุญ ุจุชุฎุทูุท ุงูุดุจูุฉ ุนูู ุงูุฎุฑูุทุฉ
  - **ุงููููุงุช:**
    - `client/src/pages/gis/SmartGridPlanner.tsx` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุฅุถุงูุฉ marker ุฌุฏูุฏ (ุทุจููู ููุจุฑ) ุนูู ุงูุฎุฑูุทุฉ
    - Drag & Drop ูุฑุจุท ุงููุดุชุฑููู ุจุงูุทุจููู ุงูุฌุฏูุฏ
    - ุญุณุงุจ ุงููุณุงูุฉ ุชููุงุฆูุงู ุจูู ุงููุดุชุฑู ูุงูุทุจููู
    - ุฅูุดุงุก "ุฎุทุฉ ุชุฑุญูู" ุฑูููุฉ
    - ูุงุฆูุฉ ุงูููููุงุช ุงููุทููุจุฉ (ุทุจูููุ ุนุฏุงุฏุงุชุ ุฃุณูุงู)

---

## ุงููููุฉ 12: ูุชุงููุฌ ุงูุฎุฏูุงุช

### โ ุบูุฑ ููุฌูุฏ (ูุญุชุงุฌ ุจูุงุก ูู ุงูุตูุฑ):
- โ **12.1** ุจูุงุก ูุชุงููุฌ ุงูุฎุฏูุงุช (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุชุนุฑูู ุงูุฎุฏูุงุช ุงููุงุจูุฉ ููุชุณุนูุฑ
  - **ุงููููุงุช:**
    - ุฌุฏูู `services_catalog` ูู `drizzle/schema.ts` (ุฌุฏูุฏ)
    - `client/src/pages/services/ServicesCatalog.tsx` (ุฌุฏูุฏ)
    - `server/servicesRouter.ts` (ุฌุฏูุฏ)
  - **ุงูุชูุงุตูู:**
    - ุงูุญููู: `code`, `name_ar`, `name_en`, `description`, `default_cost`, `category`
    - ุฃูุซูุฉ: INSTALL-METER (5000), INSTALL-DP (15000), REPLACE-CIU (1000), etc.
    - APIs: `list`, `getById`, `create`, `update`, `delete`
    - ูุงุฌูุฉ ูุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช

- โ **12.2** ุฏูุฌ ูุชุงููุฌ ุงูุฎุฏูุงุช ูู ุฃูุงูุฑ ุงูุนูู (๐ก ุฃููููุฉ ุนุงููุฉ)
  - **ุงููุตู:** ุฑุจุท ุงูุฎุฏูุงุช ุจุฃูุงูุฑ ุงูุนูู
  - **ุงููููุงุช:**
    - ุฌุฏูู `work_order_services` ูู `drizzle/schema.ts` (ุฌุฏูุฏ)
    - ุชุญุฏูุซ `client/src/pages/maintenance/WorkOrders.tsx`
  - **ุงูุชูุงุตูู:**
    - ุนูุฏ ุฅูุดุงุก ุฃูุฑ ุนููุ ุงุฎุชูุงุฑ ุงูุฎุฏูุงุช ุงููุทููุจุฉ
    - ุญุณุงุจ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ (ุงูููุงุฏ + ุงูุฎุฏูุงุช)
    - ุฑุจุท ุงูุฎุฏูุงุช ุจุงูููุงุฏ ุงููุณุชุฎุฏูุฉ

---

## ุงูููุงู 30-33: ุงูุชุทุจููุงุช ุงูุฌูุงูุฉ ูุงูุฃูุธูุฉ ุงููุชูุฏูุฉ

### โ๏ธ ูุญุชุงุฌ ุงุณุชููุงู:
- ๐ด **30.1** ุจูุงุก ุชุทุจูู ุงูุนููู ุงููุนูู (React Native/Flutter) (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุชุทุจูู ุฌูุงู ูุนูู ููุนููุงุก
  - **ุงููููุงุช:**
    - `mobile-apps/customer-app/` (ูุดุฑูุน React Native ุฌุฏูุฏ)
    - `mobile-apps/customer-app/src/screens/DashboardScreen.tsx`
    - `mobile-apps/customer-app/src/screens/InvoicesScreen.tsx`
    - `mobile-apps/customer-app/src/screens/PaymentScreen.tsx`
    - `mobile-apps/customer-app/src/screens/MetersScreen.tsx`
    - `mobile-apps/customer-app/src/screens/WalletScreen.tsx`
    - `mobile-apps/customer-app/src/screens/ComplaintsScreen.tsx`
    - `mobile-apps/customer-app/src/screens/ProfileScreen.tsx`
  - **ุงูููุฒุงุช:**
    - ุชุณุฌูู ุฏุฎูู
    - ุนุฑุถ ุงูููุงุชูุฑ ูุงูุฏูุน
    - ุนุฑุถ ุงูุงุณุชููุงู (ูุนุฏุงุฏุงุช IoT)
    - ุดุญู ุงููุญูุธุฉ
    - ุฑูุน ุดูุงูู
    - ุงูุฅุดุนุงุฑุงุช (Push Notifications)

- ๐ด **30.2** ุจูุงุก ุชุทุจูู ุงูููุธู ุงููุนูู (React Native/Flutter) (๐ด ุฃููููุฉ ุนุงููุฉ ุฌุฏุงู)
  - **ุงููุตู:** ุชุทุจูู ุฌูุงู ูุนูู ููููุธููู ุงูููุฏุงูููู
  - **ุงููููุงุช:**
    - `mobile-apps/employee-app/` (ูุดุฑูุน React Native ุฌุฏูุฏ)
    - ุฌููุน ุงูุดุงุดุงุช ุงููุทููุจุฉ (13 ุดุงุดุฉ ุญุณุจ ุงูููุงุตูุงุช)
  - **ุงูููุฒุงุช:**
    - ุชุณุฌูู ุฏุฎูู
    - ูุงุฆูุฉ ุงูููุงู
    - ุฅุฏุฎุงู ุงููุฑุงุกุงุช (2.1.1)
    - ุชุฑููุจ/ุงุณุชุจุฏุงู ุงูุนุฏุงุฏุงุช
    - ุงูุตูุงูุฉ
    - ุงููุญุต
    - ุงูุชุญุตูู
    - ุฅุฏุงุฑุฉ ุงูููุงุฏ
    - GPS Tracking

---

## ููุงุญุธุงุช ุนุงูุฉ:

### ๐ด ุฃููููุงุช ุนุงููุฉ ุฌุฏุงู (ูุฌุจ ุฅูุฌุงุฒูุง ุฃููุงู):
1. ุชูุนูู Cron Job ููููุชุฑุฉ ุงูุชููุงุฆูุฉ (2.2.2)
2. ุชูุนูู ุงูุชูุงูู ุงููุนูู ูุน SMS/WhatsApp (2.4.1, 2.4.2)
3. ุฅููุงู ุงูุชูุงูู ุงููุนูู ูุน ุจูุงุจุงุช ุงูุฏูุน (2.3.2, 2.3.8)
4. ุฅูุดุงุก ุญุณุงุจุงุช ูุญุงุณุจูุฉ ุงูุชุฑุงุถูุฉ (4.1.6)
5. ุจูุงุก ุดุงุดุฉ ูุทุงุจูุฉ ุงูุฅูุฏุงุนุงุช ุงูุจูููุฉ (4.4.1, 4.4.2)

### ๐ก ุฃููููุงุช ุนุงููุฉ (ูุฌุจ ุฅูุฌุงุฒูุง ูุฑูุจุงู):
1. ุชุทุจูู ุฌูุงู ูุฅุฏุฎุงู ุงููุฑุงุกุงุช (2.1.1)
2. ูุชุงููุฌ ุงูุฎุฏูุงุช (12.1, 12.2)
3. ุชุญุณููุงุช ูู ูุงุฌูุงุช ุงููููุฏ (4.3.3, 4.3.5)

### ๐ข ุฃููููุงุช ูุชูุณุทุฉ (ูููู ุชุฃุฌูููุง):
1. ุงูุชูุงุฑูุฑ ุงูููููุฉ (2.1.9, 4.3.6)
2. ุชุญุณููุงุช ูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
3. ููุฒุงุช ูุชูุฏูุฉ ูู GIS

### ๐ต ุฃููููุงุช ููุฎูุถุฉ (ูููู ุชุฃุฌูููุง ููุบุงูุฉ):
1. ุงูุฃูุธูุฉ ุงููุชูุฏูุฉ (11-33) - ูุนุธููุง

---

**ุนุฏุฏ ุงูููุงู ุงูุฅุฌูุงูู:** ~150 ูููุฉ  
**ุงูููุงู ุงูุญุฑุฌุฉ (๐ด):** ~25 ูููุฉ  
**ุงูููุงู ุงูุนุงููุฉ (๐ก):** ~30 ูููุฉ  
**ุงูููุงู ุงููุชูุณุทุฉ (๐ข):** ~40 ูููุฉ  
**ุงูููุงู ุงูููุฎูุถุฉ (๐ต):** ~55 ูููุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-01-29
