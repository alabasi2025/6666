{"success":true,"content":"-- MySQL dump 10.13  Distrib 8.4.6, for Win64 (x86_64)\r\n--\r\n-- Host: localhost    Database: 666666\r\n-- ------------------------------------------------------\r\n-- Server version\t5.5.5-10.4.32-MariaDB\r\n\r\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\r\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\r\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\r\n/*!50503 SET NAMES utf8mb4 */;\r\n/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;\r\n/*!40103 SET TIME_ZONE='+00:00' */;\r\n/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;\r\n/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;\r\n/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;\r\n/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;\r\n\r\n--\r\n-- Table structure for table `__drizzle_migrations`\r\n--\r\n\r\nDROP TABLE IF EXISTS `__drizzle_migrations`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `__drizzle_migrations` (\r\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\r\n  `hash` mediumtext NOT NULL,\r\n  `created_at` bigint(20) DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `__drizzle_migrations`\r\n--\r\n\r\nLOCK TABLES `__drizzle_migrations` WRITE;\r\n/*!40000 ALTER TABLE `__drizzle_migrations` DISABLE KEYS */;\r\nINSERT INTO `__drizzle_migrations` VALUES (1,'b2ba62d710cdddf493918b34e3027d8daafcd82800723f5e9164371bc1740b6b',1766074152661),(2,'651271fb8d2b51c10090043b618f761cc1731026adfb53542f481e2f4fba2b59',1766074550724),(3,'a1a3cd3753655076338271a4dcc9b27518c48d582df4190cc7d3193dd483d701',1766081698261),(4,'2f811d2f22eb74e7d399543f65dee42f47cfb06d10285d267249d337950beb4f',1766082983907),(5,'23ce8820bd26c8713281252621fc701723118a2f35993950c8ee3776e2d4d5dd',1766084103699),(6,'ee5cbb65a69570238c08f6ac9b728260a789d7a5c417e531005998d37b1b2054',1766085186081),(7,'fded2155112f14483e004ff82d840f8a8167c987bba1a07289e5fe5753dd3deb',1766085494949),(8,'40f40167d788beb3fb5d79be983c84c2432ada70e6d174d197cc440be83e6d44',1766088889243),(9,'60a4e149387a830f32dace2293368860f17ae1d5d170ca6cd44cf63dcd84483d',1766090188492),(10,'21718087dcdf38b731565366e288f69fdaa7dc3f1a326239e1079bc951c8ed6e',1766092091610),(11,'d71f923b9c9daf307711442ddfe9d34e4f1e871743952f0df16d9940c7cd97f3',1766361156039),(12,'6adc2737db97f0d5310e5987cdd702024215186eef195018ee8f47c2bd034e99',1766366189245),(13,'2ddc41d3a27d992a13322ead61e229811b1ff59a33bfc0ae8e7b7f1a1e875695',1766532097894),(14,'09476a041440f8275025b32ccfc21158adc80c2a358e81358a03ff4c165f2574',1766725934163);\r\n/*!40000 ALTER TABLE `__drizzle_migrations` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `accounts`\r\n--\r\n\r\nDROP TABLE IF EXISTS `accounts`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `accounts` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `parent_id` int(11) DEFAULT NULL,\r\n  `level` int(11) DEFAULT 1,\r\n  `nature` enum('debit','credit') NOT NULL,\r\n  `is_parent` tinyint(1) DEFAULT 0,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `is_cash_account` tinyint(1) DEFAULT 0,\r\n  `is_bank_account` tinyint(1) DEFAULT 0,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `opening_balance` decimal(18,2) DEFAULT 0.00,\r\n  `current_balance` decimal(18,2) DEFAULT 0.00,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `system_module` enum('assets','maintenance','inventory','procurement','customers','billing','scada','projects','hr','operations','finance','general') NOT NULL,\r\n  `account_type` enum('main','sub','detail') DEFAULT 'detail',\r\n  `linked_entity_type` varchar(50) DEFAULT NULL,\r\n  `linked_entity_id` int(11) DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `accounts`\r\n--\r\n\r\nLOCK TABLES `accounts` WRITE;\r\n/*!40000 ALTER TABLE `accounts` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `accounts` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `ai_models`\r\n--\r\n\r\nDROP TABLE IF EXISTS `ai_models`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `ai_models` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(200) NOT NULL,\r\n  `name_en` varchar(200) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `model_type` enum('consumption_forecast','fault_detection','load_optimization','anomaly_detection','demand_prediction','maintenance_prediction','customer_churn','fraud_detection','price_optimization','other') NOT NULL,\r\n  `provider` enum('internal','openai','azure','google','aws','custom') DEFAULT 'internal',\r\n  `model_version` varchar(50) DEFAULT NULL,\r\n  `endpoint` varchar(500) DEFAULT NULL,\r\n  `input_schema` longtext DEFAULT NULL CHECK (json_valid(`input_schema`)),\r\n  `output_schema` longtext DEFAULT NULL CHECK (json_valid(`output_schema`)),\r\n  `accuracy` decimal(5,2) DEFAULT NULL,\r\n  `last_trained_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `training_data_count` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `config` longtext DEFAULT NULL CHECK (json_valid(`config`)),\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `ai_models`\r\n--\r\n\r\nLOCK TABLES `ai_models` WRITE;\r\n/*!40000 ALTER TABLE `ai_models` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `ai_models` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `ai_predictions`\r\n--\r\n\r\nDROP TABLE IF EXISTS `ai_predictions`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `ai_predictions` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `model_id` int(11) NOT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `prediction_type` varchar(50) NOT NULL,\r\n  `target_entity` varchar(50) DEFAULT NULL,\r\n  `target_entity_id` int(11) DEFAULT NULL,\r\n  `input_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`input_data`)),\r\n  `prediction` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`prediction`)),\r\n  `confidence` decimal(5,2) DEFAULT NULL,\r\n  `prediction_date` date NOT NULL,\r\n  `valid_from` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `valid_to` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `actual_value` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`actual_value`)),\r\n  `accuracy` decimal(5,2) DEFAULT NULL,\r\n  `is_verified` tinyint(1) DEFAULT 0,\r\n  `verified_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `verified_by` int(11) DEFAULT NULL,\r\n  `notes` text DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `ai_predictions`\r\n--\r\n\r\nLOCK TABLES `ai_predictions` WRITE;\r\n/*!40000 ALTER TABLE `ai_predictions` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `ai_predictions` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `alerts`\r\n--\r\n\r\nDROP TABLE IF EXISTS `alerts`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `alerts` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `equipment_id` int(11) DEFAULT NULL,\r\n  `sensor_id` int(11) DEFAULT NULL,\r\n  `alert_type` enum('info','warning','critical','emergency') NOT NULL,\r\n  `category` varchar(50) DEFAULT NULL,\r\n  `title` varchar(255) NOT NULL,\r\n  `message` text DEFAULT NULL,\r\n  `value` decimal(15,4) DEFAULT NULL,\r\n  `threshold` decimal(15,4) DEFAULT NULL,\r\n  `status` enum('active','acknowledged','resolved','escalated') DEFAULT 'active',\r\n  `triggered_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `acknowledged_by` int(11) DEFAULT NULL,\r\n  `acknowledged_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `resolved_by` int(11) DEFAULT NULL,\r\n  `resolved_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `resolution` text DEFAULT NULL,\r\n  `work_order_id` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `alerts`\r\n--\r\n\r\nLOCK TABLES `alerts` WRITE;\r\n/*!40000 ALTER TABLE `alerts` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `alerts` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `api_keys`\r\n--\r\n\r\nDROP TABLE IF EXISTS `api_keys`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `api_keys` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `name` varchar(100) NOT NULL,\r\n  `description` text DEFAULT NULL,\r\n  `key_hash` varchar(255) NOT NULL,\r\n  `key_prefix` varchar(20) NOT NULL,\r\n  `permissions` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`permissions`)),\r\n  `allowed_ips` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`allowed_ips`)),\r\n  `allowed_origins` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`allowed_origins`)),\r\n  `rate_limit_per_minute` int(11) DEFAULT 60,\r\n  `rate_limit_per_day` int(11) DEFAULT 10000,\r\n  `expires_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `last_used_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `usage_count` int(11) DEFAULT 0,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `api_keys`\r\n--\r\n\r\nLOCK TABLES `api_keys` WRITE;\r\n/*!40000 ALTER TABLE `api_keys` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `api_keys` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `api_logs`\r\n--\r\n\r\nDROP TABLE IF EXISTS `api_logs`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `api_logs` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `api_key_id` int(11) DEFAULT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `endpoint` varchar(500) NOT NULL,\r\n  `method` varchar(10) NOT NULL,\r\n  `request_headers` longtext DEFAULT NULL CHECK (json_valid(`request_headers`)),\r\n  `request_body` longtext DEFAULT NULL CHECK (json_valid(`request_body`)),\r\n  `response_status` int(11) DEFAULT NULL,\r\n  `response_time` int(11) DEFAULT NULL,\r\n  `ip_address` varchar(50) DEFAULT NULL,\r\n  `user_agent` varchar(500) DEFAULT NULL,\r\n  `error_message` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `api_logs`\r\n--\r\n\r\nLOCK TABLES `api_logs` WRITE;\r\n/*!40000 ALTER TABLE `api_logs` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `api_logs` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `areas`\r\n--\r\n\r\nDROP TABLE IF EXISTS `areas`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `areas` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `project_id` int(11) DEFAULT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `areas`\r\n--\r\n\r\nLOCK TABLES `areas` WRITE;\r\n/*!40000 ALTER TABLE `areas` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `areas` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `asset_categories`\r\n--\r\n\r\nDROP TABLE IF EXISTS `asset_categories`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `asset_categories` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `parent_id` int(11) DEFAULT NULL,\r\n  `depreciation_method` enum('straight_line','declining_balance','units_of_production') DEFAULT 'straight_line',\r\n  `useful_life` int(11) DEFAULT NULL,\r\n  `salvage_percentage` decimal(5,2) DEFAULT 0.00,\r\n  `asset_account_id` int(11) DEFAULT NULL,\r\n  `depreciation_account_id` int(11) DEFAULT NULL,\r\n  `accumulated_dep_account_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `asset_categories`\r\n--\r\n\r\nLOCK TABLES `asset_categories` WRITE;\r\n/*!40000 ALTER TABLE `asset_categories` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `asset_categories` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `asset_movements`\r\n--\r\n\r\nDROP TABLE IF EXISTS `asset_movements`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `asset_movements` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `asset_id` int(11) NOT NULL,\r\n  `movement_type` enum('purchase','transfer','maintenance','upgrade','revaluation','impairment','disposal','depreciation') NOT NULL,\r\n  `movement_date` date NOT NULL,\r\n  `from_branch_id` int(11) DEFAULT NULL,\r\n  `to_branch_id` int(11) DEFAULT NULL,\r\n  `from_station_id` int(11) DEFAULT NULL,\r\n  `to_station_id` int(11) DEFAULT NULL,\r\n  `amount` decimal(18,2) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `reference_type` varchar(50) DEFAULT NULL,\r\n  `reference_id` int(11) DEFAULT NULL,\r\n  `journal_entry_id` int(11) DEFAULT NULL,\r\n  `created_by` int(11) NOT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `asset_movements`\r\n--\r\n\r\nLOCK TABLES `asset_movements` WRITE;\r\n/*!40000 ALTER TABLE `asset_movements` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `asset_movements` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `assets`\r\n--\r\n\r\nDROP TABLE IF EXISTS `assets`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `assets` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `category_id` int(11) NOT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `serial_number` varchar(100) DEFAULT NULL,\r\n  `model` varchar(100) DEFAULT NULL,\r\n  `manufacturer` varchar(100) DEFAULT NULL,\r\n  `purchase_date` date DEFAULT NULL,\r\n  `commission_date` date DEFAULT NULL,\r\n  `purchase_cost` decimal(18,2) DEFAULT 0.00,\r\n  `current_value` decimal(18,2) DEFAULT 0.00,\r\n  `accumulated_depreciation` decimal(18,2) DEFAULT 0.00,\r\n  `salvage_value` decimal(18,2) DEFAULT 0.00,\r\n  `useful_life` int(11) DEFAULT NULL,\r\n  `depreciation_method` enum('straight_line','declining_balance','units_of_production') DEFAULT NULL,\r\n  `status` enum('active','maintenance','disposed','transferred','idle') DEFAULT 'active',\r\n  `location` varchar(255) DEFAULT NULL,\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `warranty_expiry` date DEFAULT NULL,\r\n  `supplier_id` int(11) DEFAULT NULL,\r\n  `purchase_order_id` int(11) DEFAULT NULL,\r\n  `parent_asset_id` int(11) DEFAULT NULL,\r\n  `qr_code` varchar(255) DEFAULT NULL,\r\n  `barcode` varchar(100) DEFAULT NULL,\r\n  `image` mediumtext DEFAULT NULL,\r\n  `specifications` longtext DEFAULT NULL CHECK (json_valid(`specifications`)),\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `assets`\r\n--\r\n\r\nLOCK TABLES `assets` WRITE;\r\n/*!40000 ALTER TABLE `assets` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `assets` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `attendance`\r\n--\r\n\r\nDROP TABLE IF EXISTS `attendance`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `attendance` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `employee_id` int(11) NOT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `attendance_date` date NOT NULL,\r\n  `check_in_time` datetime DEFAULT NULL,\r\n  `check_in_location` varchar(255) DEFAULT NULL,\r\n  `check_in_latitude` decimal(10,8) DEFAULT NULL,\r\n  `check_in_longitude` decimal(11,8) DEFAULT NULL,\r\n  `check_in_method` enum('manual','biometric','gps','qr_code') DEFAULT 'manual',\r\n  `check_out_time` datetime DEFAULT NULL,\r\n  `check_out_location` varchar(255) DEFAULT NULL,\r\n  `check_out_latitude` decimal(10,8) DEFAULT NULL,\r\n  `check_out_longitude` decimal(11,8) DEFAULT NULL,\r\n  `check_out_method` enum('manual','biometric','gps','qr_code') DEFAULT 'manual',\r\n  `total_hours` decimal(5,2) DEFAULT NULL,\r\n  `overtime_hours` decimal(5,2) DEFAULT 0.00,\r\n  `late_minutes` int(11) DEFAULT 0,\r\n  `early_leave_minutes` int(11) DEFAULT 0,\r\n  `status` enum('present','absent','late','half_day','leave','holiday','weekend') DEFAULT 'present',\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `attendance`\r\n--\r\n\r\nLOCK TABLES `attendance` WRITE;\r\n/*!40000 ALTER TABLE `attendance` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `attendance` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `audit_logs`\r\n--\r\n\r\nDROP TABLE IF EXISTS `audit_logs`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `audit_logs` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) DEFAULT NULL,\r\n  `user_id` int(11) DEFAULT NULL,\r\n  `action` varchar(50) NOT NULL,\r\n  `module` varchar(50) NOT NULL,\r\n  `entity_type` varchar(50) DEFAULT NULL,\r\n  `entity_id` int(11) DEFAULT NULL,\r\n  `old_values` longtext DEFAULT NULL CHECK (json_valid(`old_values`)),\r\n  `new_values` longtext DEFAULT NULL CHECK (json_valid(`new_values`)),\r\n  `ip_address` varchar(50) DEFAULT NULL,\r\n  `user_agent` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `audit_logs`\r\n--\r\n\r\nLOCK TABLES `audit_logs` WRITE;\r\n/*!40000 ALTER TABLE `audit_logs` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `audit_logs` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `billing_periods`\r\n--\r\n\r\nDROP TABLE IF EXISTS `billing_periods`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `billing_periods` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `project_id` int(11) DEFAULT NULL,\r\n  `name` varchar(100) NOT NULL,\r\n  `period_number` int(11) DEFAULT NULL,\r\n  `month` int(11) DEFAULT NULL,\r\n  `year` int(11) DEFAULT NULL,\r\n  `start_date` date NOT NULL,\r\n  `end_date` date NOT NULL,\r\n  `period_status` enum('pending','active','reading_phase','billing_phase','closed') DEFAULT 'pending',\r\n  `reading_start_date` date DEFAULT NULL,\r\n  `reading_end_date` date DEFAULT NULL,\r\n  `billing_date` date DEFAULT NULL,\r\n  `due_date` date DEFAULT NULL,\r\n  `total_meters` int(11) DEFAULT 0,\r\n  `read_meters` int(11) DEFAULT 0,\r\n  `billed_meters` int(11) DEFAULT 0,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `closed_by` int(11) DEFAULT NULL,\r\n  `closed_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `billing_periods`\r\n--\r\n\r\nLOCK TABLES `billing_periods` WRITE;\r\n/*!40000 ALTER TABLE `billing_periods` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `billing_periods` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `branches`\r\n--\r\n\r\nDROP TABLE IF EXISTS `branches`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `branches` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `type` enum('main','regional','local') NOT NULL DEFAULT 'local',\r\n  `parent_id` int(11) DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `city` varchar(100) DEFAULT NULL,\r\n  `region` varchar(100) DEFAULT NULL,\r\n  `country` varchar(100) DEFAULT 'Saudi Arabia',\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `phone` varchar(50) DEFAULT NULL,\r\n  `email` varchar(255) DEFAULT NULL,\r\n  `manager_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `branches`\r\n--\r\n\r\nLOCK TABLES `branches` WRITE;\r\n/*!40000 ALTER TABLE `branches` DISABLE KEYS */;\r\nINSERT INTO `branches` VALUES (1,1,'BR001','الفرع الرئيسي',NULL,'main',NULL,NULL,NULL,NULL,'Saudi Arabia',NULL,NULL,NULL,NULL,NULL,1,'2025-12-28 21:01:25','2025-12-28 21:01:25'),(2,1,'BR002','الدهمية',NULL,'local',NULL,NULL,NULL,NULL,'Saudi Arabia',NULL,NULL,NULL,NULL,NULL,1,'2025-12-28 21:01:44','2025-12-28 21:01:44'),(3,1,'BR003','غليل',NULL,'local',NULL,NULL,NULL,NULL,'Saudi Arabia',NULL,NULL,NULL,NULL,NULL,1,'2025-12-28 21:02:15','2025-12-28 21:02:15'),(4,1,'BR004','الصبالية',NULL,'local',NULL,NULL,NULL,NULL,'Saudi Arabia',NULL,NULL,NULL,NULL,NULL,1,'2025-12-28 21:02:50','2025-12-28 21:02:50');\r\n/*!40000 ALTER TABLE `branches` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `businesses`\r\n--\r\n\r\nDROP TABLE IF EXISTS `businesses`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `businesses` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `type` enum('holding','subsidiary','branch') NOT NULL DEFAULT 'subsidiary',\r\n  `parent_id` int(11) DEFAULT NULL,\r\n  `logo` mediumtext DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `phone` varchar(50) DEFAULT NULL,\r\n  `email` varchar(255) DEFAULT NULL,\r\n  `website` varchar(255) DEFAULT NULL,\r\n  `tax_number` varchar(50) DEFAULT NULL,\r\n  `commercial_register` varchar(50) DEFAULT NULL,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `fiscal_year_start` int(11) DEFAULT 1,\r\n  `timezone` varchar(50) DEFAULT 'Asia/Riyadh',\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `settings` longtext DEFAULT NULL CHECK (json_valid(`settings`)),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `system_type` enum('energy','custom','both') NOT NULL DEFAULT 'both',\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `businesses_code_unique` (`code`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `businesses`\r\n--\r\n\r\nLOCK TABLES `businesses` WRITE;\r\n/*!40000 ALTER TABLE `businesses` DISABLE KEYS */;\r\nINSERT INTO `businesses` VALUES (1,'BR001','شركة العباسي',NULL,'holding',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'SAR',1,'Asia/Riyadh',1,NULL,'2025-12-28 20:58:00','2025-12-28 18:00:02','both'),(2,'BR002','العباسي1',NULL,'subsidiary',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'SAR',1,'Asia/Riyadh',1,NULL,'2025-12-28 21:00:51','2025-12-28 21:00:51','both');\r\n/*!40000 ALTER TABLE `businesses` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `cabinets`\r\n--\r\n\r\nDROP TABLE IF EXISTS `cabinets`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `cabinets` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `square_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `cabinet_type` enum('main','sub','distribution') DEFAULT 'distribution',\r\n  `capacity` int(11) DEFAULT NULL,\r\n  `current_load` int(11) DEFAULT 0,\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `cabinets`\r\n--\r\n\r\nLOCK TABLES `cabinets` WRITE;\r\n/*!40000 ALTER TABLE `cabinets` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `cabinets` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `cashboxes`\r\n--\r\n\r\nDROP TABLE IF EXISTS `cashboxes`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `cashboxes` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `balance` decimal(18,2) DEFAULT 0.00,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `assigned_to` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `cashboxes`\r\n--\r\n\r\nLOCK TABLES `cashboxes` WRITE;\r\n/*!40000 ALTER TABLE `cashboxes` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `cashboxes` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `cost_centers`\r\n--\r\n\r\nDROP TABLE IF EXISTS `cost_centers`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `cost_centers` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `parent_id` int(11) DEFAULT NULL,\r\n  `level` int(11) DEFAULT 1,\r\n  `type` enum('station','department','project','activity') DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `cost_centers`\r\n--\r\n\r\nLOCK TABLES `cost_centers` WRITE;\r\n/*!40000 ALTER TABLE `cost_centers` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `cost_centers` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_account_balances`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_account_balances`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_account_balances` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `account_id` int(11) NOT NULL,\r\n  `currency_id` int(11) NOT NULL,\r\n  `debit_balance` decimal(18,2) NOT NULL DEFAULT 0.00,\r\n  `credit_balance` decimal(18,2) NOT NULL DEFAULT 0.00,\r\n  `current_balance` decimal(18,2) NOT NULL DEFAULT 0.00,\r\n  `last_transaction_date` date DEFAULT NULL,\r\n  `last_transaction_id` int(11) DEFAULT NULL,\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `cabl_account_currency_unique` (`account_id`,`currency_id`),\r\n  KEY `cabl_business_idx` (`business_id`),\r\n  KEY `cabl_account_idx` (`account_id`),\r\n  KEY `cabl_currency_idx` (`currency_id`),\r\n  KEY `cabl_last_transaction_idx` (`last_transaction_date`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_account_balances`\r\n--\r\n\r\nLOCK TABLES `custom_account_balances` WRITE;\r\n/*!40000 ALTER TABLE `custom_account_balances` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_account_balances` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_account_currencies`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_account_currencies`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_account_currencies` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `account_id` int(11) NOT NULL,\r\n  `currency_id` int(11) NOT NULL,\r\n  `is_default` tinyint(1) NOT NULL DEFAULT 0,\r\n  `is_active` tinyint(1) NOT NULL DEFAULT 1,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `cacr_account_currency_unique` (`account_id`,`currency_id`),\r\n  KEY `cacr_business_idx` (`business_id`),\r\n  KEY `cacr_account_idx` (`account_id`),\r\n  KEY `cacr_currency_idx` (`currency_id`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_account_currencies`\r\n--\r\n\r\nLOCK TABLES `custom_account_currencies` WRITE;\r\n/*!40000 ALTER TABLE `custom_account_currencies` DISABLE KEYS */;\r\nINSERT INTO `custom_account_currencies` VALUES (2,1,19,1,1,1,NULL,'2026-01-01 00:06:47'),(3,1,19,2,0,1,NULL,'2026-01-01 00:06:47');\r\n/*!40000 ALTER TABLE `custom_account_currencies` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_account_sub_types`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_account_sub_types`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_account_sub_types` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `account_type` enum('asset','liability','equity','revenue','expense') NOT NULL,\r\n  `account_type_id` int(11) DEFAULT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(100) NOT NULL,\r\n  `name_en` varchar(100) DEFAULT NULL,\r\n  `description` text DEFAULT NULL,\r\n  `is_active` tinyint(1) NOT NULL DEFAULT 1,\r\n  `allow_multiple_currencies` tinyint(1) NOT NULL DEFAULT 0,\r\n  `requires_party` tinyint(1) NOT NULL DEFAULT 0,\r\n  `icon` varchar(50) DEFAULT NULL,\r\n  `color` varchar(20) DEFAULT NULL,\r\n  `display_order` int(11) DEFAULT 0,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `cast_business_code_unique` (`business_id`,`code`),\r\n  KEY `cast_business_idx` (`business_id`),\r\n  KEY `cast_account_type_idx` (`account_type`),\r\n  KEY `cast_code_idx` (`code`),\r\n  KEY `cast_is_active_idx` (`is_active`),\r\n  KEY `cast_account_type_id_idx` (`account_type_id`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_account_sub_types`\r\n--\r\n\r\nLOCK TABLES `custom_account_sub_types` WRITE;\r\n/*!40000 ALTER TABLE `custom_account_sub_types` DISABLE KEYS */;\r\nINSERT INTO `custom_account_sub_types` VALUES (1,1,'asset',1,'cash','صندوق','Cash',NULL,1,0,0,NULL,NULL,1,NULL,'2025-12-29 00:44:15','2025-12-31 00:55:57'),(2,1,'asset',1,'bank','بنك','Bank',NULL,1,0,0,NULL,NULL,2,NULL,'2025-12-29 00:44:15','2025-12-31 00:55:57'),(3,1,'asset',1,'wallet','محفظة','Wallet',NULL,1,0,0,NULL,NULL,3,NULL,'2025-12-29 00:44:15','2025-12-31 00:55:57'),(4,1,'asset',1,'exchange','صراف','Exchange',NULL,1,0,0,NULL,NULL,4,NULL,'2025-12-29 00:44:15','2025-12-31 00:55:57'),(5,1,'asset',1,'warehouse','مخزن','Warehouse',NULL,1,0,0,NULL,NULL,5,NULL,'2025-12-29 00:44:15','2025-12-31 00:55:57'),(6,1,'asset',1,'general','عام','General',NULL,1,0,0,NULL,NULL,6,NULL,'2025-12-29 00:44:15','2025-12-31 00:55:57'),(7,1,'liability',2,'supplier','مورد','Supplier',NULL,1,0,0,NULL,NULL,1,NULL,'2025-12-29 00:44:15','2025-12-31 00:55:57'),(11,1,'revenue',4,'customer','عميل','Customer',NULL,1,0,0,NULL,NULL,1,NULL,'2025-12-29 00:44:39','2025-12-31 00:55:57');\r\n/*!40000 ALTER TABLE `custom_account_sub_types` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_account_types`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_account_types`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_account_types` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `sub_system_id` int(11) DEFAULT NULL,\r\n  `type_code` varchar(50) NOT NULL,\r\n  `type_name_ar` varchar(100) NOT NULL,\r\n  `type_name_en` varchar(100) DEFAULT NULL,\r\n  `description` text DEFAULT NULL,\r\n  `color` varchar(20) DEFAULT NULL,\r\n  `icon` varchar(50) DEFAULT NULL,\r\n  `display_order` int(11) NOT NULL DEFAULT 0,\r\n  `is_active` tinyint(1) NOT NULL DEFAULT 1,\r\n  `is_system_type` tinyint(1) NOT NULL DEFAULT 0,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `cat_business_code_unique` (`business_id`,`type_code`),\r\n  KEY `cat_business_idx` (`business_id`),\r\n  KEY `cat_type_code_idx` (`type_code`),\r\n  KEY `cat_is_active_idx` (`is_active`),\r\n  KEY `cat_display_order_idx` (`display_order`),\r\n  KEY `cat_sub_system_idx` (`sub_system_id`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_account_types`\r\n--\r\n\r\nLOCK TABLES `custom_account_types` WRITE;\r\n/*!40000 ALTER TABLE `custom_account_types` DISABLE KEYS */;\r\nINSERT INTO `custom_account_types` VALUES (1,1,NULL,'asset','أصول','Assets',NULL,'#10b981','TrendingUp',1,1,1,NULL,'2025-12-31 01:54:39','2025-12-31 01:54:39'),(2,1,NULL,'liability','التزامات','Liabilities',NULL,'#ef4444','TrendingDown',2,1,1,NULL,'2025-12-31 01:54:39','2025-12-31 01:54:39'),(3,1,NULL,'equity','حقوق ملكية','Equity',NULL,'#8b5cf6','Users',3,1,1,NULL,'2025-12-31 01:54:39','2025-12-31 01:54:39'),(4,1,NULL,'revenue','إيرادات','Revenue',NULL,'#3b82f6','ArrowUpCircle',4,1,1,NULL,'2025-12-31 01:54:39','2025-12-31 01:54:39'),(5,1,NULL,'expense','مصروفات','Expenses',NULL,'#f59e0b','ArrowDownCircle',5,1,1,NULL,'2025-12-31 01:54:39','2025-12-31 01:54:39'),(7,1,1,'aaaa','ffffff','','','#3b82f6','',7,1,0,2,'2025-12-31 02:06:53','2025-12-31 20:18:34'),(8,1,2,'rrrrrrrr','rrr','','','#3b82f6','',0,1,0,2,'2025-12-31 02:07:12','2025-12-31 02:07:12'),(9,1,1,'employee_works','أعمال الموظفين','Employee Works','','#3b82f6','Users',6,1,0,2,'2025-12-31 02:11:28','2025-12-31 02:11:28'),(10,1,3,'5555','521515','','','#3b82f6','',6,1,0,1,'2025-12-31 20:51:23','2025-12-31 20:51:23'),(11,1,4,'99','6666','','','#3b82f6','',6,1,0,1,'2025-12-31 20:56:41','2025-12-31 20:56:41');\r\n/*!40000 ALTER TABLE `custom_account_types` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_accounts`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_accounts`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_accounts` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `account_code` varchar(50) NOT NULL,\r\n  `account_name_ar` varchar(255) NOT NULL,\r\n  `account_name_en` varchar(255) DEFAULT NULL,\r\n  `account_number` varchar(50) NOT NULL,\r\n  `account_name` varchar(255) NOT NULL,\r\n  `account_type` varchar(50) NOT NULL,\r\n  `account_type_id` int(11) DEFAULT NULL,\r\n  `parent_account_id` int(11) DEFAULT NULL,\r\n  `level` int(11) NOT NULL DEFAULT 1,\r\n  `account_sub_type_id` int(11) DEFAULT NULL,\r\n  `allow_multiple_currencies` tinyint(1) NOT NULL DEFAULT 0,\r\n  `default_currency_id` int(11) DEFAULT NULL,\r\n  `requires_party` tinyint(1) NOT NULL DEFAULT 0,\r\n  `party_id` int(11) DEFAULT NULL,\r\n  `parent_id` int(11) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `allow_manual_entry` tinyint(1) NOT NULL DEFAULT 1,\r\n  `requires_cost_center` tinyint(1) NOT NULL DEFAULT 0,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `sub_system_id` int(11) DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `ca_business_code_unique` (`business_id`,`account_code`),\r\n  KEY `ca_account_sub_type_idx` (`account_sub_type_id`),\r\n  KEY `ca_default_currency_idx` (`default_currency_id`),\r\n  KEY `ca_party_idx` (`party_id`),\r\n  KEY `ca_account_code_idx` (`account_code`),\r\n  KEY `ca_parent_account_idx` (`parent_account_id`),\r\n  KEY `ca_level_idx` (`level`),\r\n  KEY `ca_account_type_id_idx` (`account_type_id`),\r\n  KEY `ca_sub_system_idx` (`sub_system_id`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=23 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_accounts`\r\n--\r\n\r\nLOCK TABLES `custom_accounts` WRITE;\r\n/*!40000 ALTER TABLE `custom_accounts` DISABLE KEYS */;\r\nINSERT INTO `custom_accounts` VALUES (11,1,'88','265',NULL,'','','99',11,NULL,2,5,0,NULL,0,NULL,NULL,NULL,1,1,0,1,'2025-12-31 20:58:11','2025-12-31 23:59:38',4),(18,1,'1001','صندوق',NULL,'','','employee_works',9,NULL,2,1,0,NULL,0,NULL,NULL,NULL,1,1,0,1,'2025-12-31 23:56:58','2025-12-31 23:56:58',1),(19,1,'1002','صراف',NULL,'','','aaaa',7,NULL,2,4,0,NULL,0,NULL,NULL,NULL,1,1,0,1,'2025-12-31 23:57:19','2025-12-31 23:57:19',1),(20,1,'1003','بنك',NULL,'','','employee_works',9,NULL,2,2,0,NULL,0,NULL,NULL,NULL,1,1,0,1,'2025-12-31 23:57:47','2025-12-31 23:57:47',1),(21,1,'1004','محفظة',NULL,'','','employee_works',9,NULL,2,3,0,NULL,0,NULL,NULL,NULL,1,1,0,1,'2025-12-31 23:58:05','2025-12-31 23:58:15',1),(22,1,'1005','111111111',NULL,'','','employee_works',9,NULL,1,NULL,0,NULL,0,NULL,NULL,NULL,1,1,0,1,'2025-12-31 23:58:29','2025-12-31 23:58:29',1);\r\n/*!40000 ALTER TABLE `custom_accounts` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_categories`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_categories`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_categories` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `sub_system_id` int(11) DEFAULT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `category_type` enum('income','expense','both') NOT NULL,\r\n  `parent_id` int(11) DEFAULT NULL,\r\n  `level` int(11) DEFAULT 1,\r\n  `color` varchar(20) DEFAULT NULL,\r\n  `icon` varchar(50) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `linked_account_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `cc_code_idx` (`business_id`,`code`),\r\n  KEY `cc_business_idx` (`business_id`),\r\n  KEY `cc_parent_idx` (`parent_id`),\r\n  KEY `cc_type_idx` (`business_id`,`category_type`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_categories`\r\n--\r\n\r\nLOCK TABLES `custom_categories` WRITE;\r\n/*!40000 ALTER TABLE `custom_categories` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_categories` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_currencies`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_currencies`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_currencies` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(10) NOT NULL,\r\n  `name_ar` varchar(100) NOT NULL,\r\n  `name_en` varchar(100) DEFAULT NULL,\r\n  `symbol` varchar(10) DEFAULT NULL,\r\n  `is_base_currency` tinyint(1) NOT NULL DEFAULT 0,\r\n  `is_active` tinyint(1) NOT NULL DEFAULT 1,\r\n  `decimal_places` int(11) NOT NULL DEFAULT 2,\r\n  `current_rate` decimal(18,6) DEFAULT NULL COMMENT 'السعر الحالي مقابل YER',\r\n  `max_rate` decimal(18,6) DEFAULT NULL COMMENT 'أعلى سعر صرف (سقف علوي)',\r\n  `min_rate` decimal(18,6) DEFAULT NULL COMMENT 'أدنى سعر صرف (سقف سفلي)',\r\n  `display_order` int(11) DEFAULT 0,\r\n  `notes` text DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `ccur_business_code_unique` (`business_id`,`code`),\r\n  KEY `ccur_business_idx` (`business_id`),\r\n  KEY `ccur_code_idx` (`code`),\r\n  KEY `ccur_is_active_idx` (`is_active`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_currencies`\r\n--\r\n\r\nLOCK TABLES `custom_currencies` WRITE;\r\n/*!40000 ALTER TABLE `custom_currencies` DISABLE KEYS */;\r\nINSERT INTO `custom_currencies` VALUES (1,1,'YER','ريال يمني','Yemeni Riyal','ر.ي',1,1,2,1.000000,1.000000,1.000000,1,NULL,NULL,'2025-12-29 00:28:21','2025-12-29 00:28:21'),(2,1,'SAR','ريال سعودي','Saudi Riyal','ر.س',0,1,2,140.000000,150.000000,130.000000,2,NULL,NULL,'2025-12-29 00:28:21','2025-12-29 00:31:22'),(3,1,'USD','دولار أمريكي','US Dollar','$',0,1,2,530.000000,550.000000,520.000000,3,NULL,NULL,'2025-12-29 00:28:21','2025-12-29 00:32:38');\r\n/*!40000 ALTER TABLE `custom_currencies` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_exchange_rates`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_exchange_rates`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_exchange_rates` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `from_currency_id` int(11) NOT NULL,\r\n  `to_currency_id` int(11) NOT NULL,\r\n  `rate` decimal(18,6) NOT NULL,\r\n  `effective_date` date NOT NULL,\r\n  `expiry_date` date DEFAULT NULL,\r\n  `source` varchar(100) DEFAULT NULL,\r\n  `is_active` tinyint(1) NOT NULL DEFAULT 1,\r\n  `notes` text DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  KEY `cexr_business_idx` (`business_id`),\r\n  KEY `cexr_from_currency_idx` (`from_currency_id`),\r\n  KEY `cexr_to_currency_idx` (`to_currency_id`),\r\n  KEY `cexr_effective_date_idx` (`effective_date`),\r\n  KEY `cexr_is_active_idx` (`is_active`),\r\n  KEY `cexr_currencies_date_idx` (`from_currency_id`,`to_currency_id`,`effective_date`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_exchange_rates`\r\n--\r\n\r\nLOCK TABLES `custom_exchange_rates` WRITE;\r\n/*!40000 ALTER TABLE `custom_exchange_rates` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_exchange_rates` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_intermediary_accounts`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_intermediary_accounts`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_intermediary_accounts` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `from_sub_system_id` int(11) NOT NULL,\r\n  `to_sub_system_id` int(11) NOT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `balance` decimal(18,2) DEFAULT 0.00,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_intermediary_accounts`\r\n--\r\n\r\nLOCK TABLES `custom_intermediary_accounts` WRITE;\r\n/*!40000 ALTER TABLE `custom_intermediary_accounts` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_intermediary_accounts` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_journal_entries`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_journal_entries`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_journal_entries` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `sub_system_id` int(11) DEFAULT NULL,\r\n  `entry_number` varchar(50) NOT NULL,\r\n  `entry_date` date NOT NULL,\r\n  `entry_type` enum('manual','opening','closing','adjustment','reversal','system_generated') NOT NULL,\r\n  `description` text NOT NULL,\r\n  `notes` text DEFAULT NULL,\r\n  `reference_type` varchar(50) DEFAULT NULL,\r\n  `reference_id` int(11) DEFAULT NULL,\r\n  `reference_number` varchar(50) DEFAULT NULL,\r\n  `status` enum('draft','posted','reversed','cancelled') NOT NULL DEFAULT 'draft',\r\n  `posted_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `posted_by` int(11) DEFAULT NULL,\r\n  `reversed_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `reversed_by` int(11) DEFAULT NULL,\r\n  `reversal_entry_id` int(11) DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `cje_business_number_unique` (`business_id`,`entry_number`),\r\n  KEY `cje_business_idx` (`business_id`),\r\n  KEY `cje_sub_system_idx` (`sub_system_id`),\r\n  KEY `cje_entry_number_idx` (`entry_number`),\r\n  KEY `cje_entry_date_idx` (`entry_date`),\r\n  KEY `cje_entry_type_idx` (`entry_type`),\r\n  KEY `cje_status_idx` (`status`),\r\n  KEY `cje_reference_idx` (`reference_type`,`reference_id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_journal_entries`\r\n--\r\n\r\nLOCK TABLES `custom_journal_entries` WRITE;\r\n/*!40000 ALTER TABLE `custom_journal_entries` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_journal_entries` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_journal_entry_lines`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_journal_entry_lines`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_journal_entry_lines` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `journal_entry_id` int(11) NOT NULL,\r\n  `account_id` int(11) NOT NULL,\r\n  `debit_amount` decimal(18,2) NOT NULL DEFAULT 0.00,\r\n  `credit_amount` decimal(18,2) NOT NULL DEFAULT 0.00,\r\n  `currency_id` int(11) NOT NULL,\r\n  `exchange_rate` decimal(18,6) DEFAULT 1.000000,\r\n  `debit_amount_base` decimal(18,2) NOT NULL DEFAULT 0.00,\r\n  `credit_amount_base` decimal(18,2) NOT NULL DEFAULT 0.00,\r\n  `description` text DEFAULT NULL,\r\n  `party_id` int(11) DEFAULT NULL,\r\n  `cost_center_id` int(11) DEFAULT NULL,\r\n  `line_order` int(11) NOT NULL DEFAULT 0,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  KEY `cjel_business_idx` (`business_id`),\r\n  KEY `cjel_journal_entry_idx` (`journal_entry_id`),\r\n  KEY `cjel_account_idx` (`account_id`),\r\n  KEY `cjel_currency_idx` (`currency_id`),\r\n  KEY `cjel_party_idx` (`party_id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_journal_entry_lines`\r\n--\r\n\r\nLOCK TABLES `custom_journal_entry_lines` WRITE;\r\n/*!40000 ALTER TABLE `custom_journal_entry_lines` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_journal_entry_lines` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_memos`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_memos`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_memos` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `memo_number` varchar(50) NOT NULL,\r\n  `memo_date` date NOT NULL,\r\n  `subject` varchar(255) NOT NULL,\r\n  `content` mediumtext DEFAULT NULL,\r\n  `memo_type` enum('internal','external','circular','directive') DEFAULT 'internal',\r\n  `from_department` varchar(255) DEFAULT NULL,\r\n  `to_department` varchar(255) DEFAULT NULL,\r\n  `status` enum('draft','sent','received','archived') DEFAULT 'draft',\r\n  `priority` enum('low','medium','high','urgent') DEFAULT 'medium',\r\n  `attachments` longtext DEFAULT NULL CHECK (json_valid(`attachments`)),\r\n  `response_required` tinyint(1) DEFAULT 0,\r\n  `response_deadline` date DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_memos`\r\n--\r\n\r\nLOCK TABLES `custom_memos` WRITE;\r\n/*!40000 ALTER TABLE `custom_memos` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_memos` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_notes`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_notes`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_notes` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `title` varchar(255) NOT NULL,\r\n  `content` mediumtext DEFAULT NULL,\r\n  `category` varchar(100) DEFAULT NULL,\r\n  `priority` enum('low','medium','high','urgent') DEFAULT 'medium',\r\n  `color` varchar(20) DEFAULT NULL,\r\n  `is_pinned` tinyint(1) DEFAULT 0,\r\n  `is_archived` tinyint(1) DEFAULT 0,\r\n  `tags` longtext DEFAULT NULL CHECK (json_valid(`tags`)),\r\n  `attachments` longtext DEFAULT NULL CHECK (json_valid(`attachments`)),\r\n  `reminder_date` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_notes`\r\n--\r\n\r\nLOCK TABLES `custom_notes` WRITE;\r\n/*!40000 ALTER TABLE `custom_notes` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_notes` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_parties`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_parties`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_parties` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `sub_system_id` int(11) DEFAULT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `party_type` enum('customer','supplier','employee','partner','government','other') NOT NULL,\r\n  `phone` varchar(50) DEFAULT NULL,\r\n  `mobile` varchar(50) DEFAULT NULL,\r\n  `email` varchar(255) DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `city` varchar(100) DEFAULT NULL,\r\n  `country` varchar(100) DEFAULT 'Saudi Arabia',\r\n  `tax_number` varchar(50) DEFAULT NULL,\r\n  `commercial_register` varchar(50) DEFAULT NULL,\r\n  `credit_limit` decimal(18,2) DEFAULT 0.00,\r\n  `current_balance` decimal(18,2) DEFAULT 0.00,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `contact_person` varchar(255) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `tags` longtext DEFAULT NULL CHECK (json_valid(`tags`)),\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `cp_code_idx` (`business_id`,`code`),\r\n  KEY `cp_business_idx` (`business_id`),\r\n  KEY `cp_subsystem_idx` (`sub_system_id`),\r\n  KEY `cp_party_type_idx` (`business_id`,`party_type`),\r\n  KEY `cp_name_idx` (`name_ar`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_parties`\r\n--\r\n\r\nLOCK TABLES `custom_parties` WRITE;\r\n/*!40000 ALTER TABLE `custom_parties` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_parties` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_party_transactions`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_party_transactions`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_party_transactions` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `party_id` int(11) NOT NULL,\r\n  `transaction_type` enum('receipt','payment','invoice','credit_note','debit_note','adjustment') NOT NULL,\r\n  `transaction_date` date NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `balance_before` decimal(18,2) NOT NULL,\r\n  `balance_after` decimal(18,2) NOT NULL,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `reference_type` varchar(50) DEFAULT NULL,\r\n  `reference_id` int(11) DEFAULT NULL,\r\n  `reference_number` varchar(50) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  KEY `cpt_party_idx` (`party_id`),\r\n  KEY `cpt_date_idx` (`transaction_date`),\r\n  KEY `cpt_type_idx` (`transaction_type`),\r\n  KEY `cpt_ref_idx` (`reference_type`,`reference_id`),\r\n  KEY `cpt_party_date_idx` (`party_id`,`transaction_date`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_party_transactions`\r\n--\r\n\r\nLOCK TABLES `custom_party_transactions` WRITE;\r\n/*!40000 ALTER TABLE `custom_party_transactions` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_party_transactions` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_payment_vouchers`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_payment_vouchers`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_payment_vouchers` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `sub_system_id` int(11) NOT NULL,\r\n  `voucher_number` varchar(50) NOT NULL,\r\n  `voucher_date` date NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `currency_id` int(11) DEFAULT NULL,\r\n  `exchange_rate` decimal(18,6) NOT NULL DEFAULT 1.000000,\r\n  `amount_in_base_currency` decimal(18,2) NOT NULL,\r\n  `journal_entry_id` int(11) DEFAULT NULL,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `treasury_id` int(11) NOT NULL,\r\n  `destination_type` enum('person','entity','intermediary','party','other') NOT NULL,\r\n  `destination_name` varchar(255) DEFAULT NULL,\r\n  `destination_intermediary_id` int(11) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `attachments` longtext DEFAULT NULL CHECK (json_valid(`attachments`)),\r\n  `status` enum('draft','confirmed','cancelled') DEFAULT 'draft',\r\n  `is_reconciled` tinyint(1) DEFAULT 0,\r\n  `reconciled_with` int(11) DEFAULT NULL,\r\n  `reconciled_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `party_id` int(11) DEFAULT NULL,\r\n  `category_id` int(11) DEFAULT NULL,\r\n  `payment_method` enum('cash','check','transfer','card','wallet','other') DEFAULT 'cash',\r\n  `check_number` varchar(50) DEFAULT NULL,\r\n  `check_date` date DEFAULT NULL,\r\n  `check_bank` varchar(100) DEFAULT NULL,\r\n  `bank_reference` varchar(100) DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `cpv_number_idx` (`business_id`,`sub_system_id`,`voucher_number`),\r\n  KEY `cpv_business_idx` (`business_id`),\r\n  KEY `cpv_subsystem_idx` (`sub_system_id`),\r\n  KEY `cpv_treasury_idx` (`treasury_id`),\r\n  KEY `cpv_party_idx` (`party_id`),\r\n  KEY `cpv_category_idx` (`category_id`),\r\n  KEY `cpv_date_idx` (`voucher_date`),\r\n  KEY `cp_currency_idx` (`currency_id`),\r\n  KEY `cp_journal_entry_idx` (`journal_entry_id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_payment_vouchers`\r\n--\r\n\r\nLOCK TABLES `custom_payment_vouchers` WRITE;\r\n/*!40000 ALTER TABLE `custom_payment_vouchers` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_payment_vouchers` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_receipt_vouchers`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_receipt_vouchers`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_receipt_vouchers` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `sub_system_id` int(11) NOT NULL,\r\n  `voucher_number` varchar(50) NOT NULL,\r\n  `voucher_date` date NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `currency_id` int(11) DEFAULT NULL,\r\n  `exchange_rate` decimal(18,6) NOT NULL DEFAULT 1.000000,\r\n  `amount_in_base_currency` decimal(18,2) NOT NULL,\r\n  `journal_entry_id` int(11) DEFAULT NULL,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `source_type` enum('person','entity','intermediary','party','other') NOT NULL,\r\n  `source_name` varchar(255) DEFAULT NULL,\r\n  `source_intermediary_id` int(11) DEFAULT NULL,\r\n  `treasury_id` int(11) NOT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `attachments` longtext DEFAULT NULL CHECK (json_valid(`attachments`)),\r\n  `status` enum('draft','confirmed','cancelled') DEFAULT 'draft',\r\n  `is_reconciled` tinyint(1) DEFAULT 0,\r\n  `reconciled_with` int(11) DEFAULT NULL,\r\n  `reconciled_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `party_id` int(11) DEFAULT NULL,\r\n  `category_id` int(11) DEFAULT NULL,\r\n  `payment_method` enum('cash','check','transfer','card','wallet','other') DEFAULT 'cash',\r\n  `check_number` varchar(50) DEFAULT NULL,\r\n  `check_date` date DEFAULT NULL,\r\n  `check_bank` varchar(100) DEFAULT NULL,\r\n  `bank_reference` varchar(100) DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `crv_number_idx` (`business_id`,`sub_system_id`,`voucher_number`),\r\n  KEY `crv_business_idx` (`business_id`),\r\n  KEY `crv_subsystem_idx` (`sub_system_id`),\r\n  KEY `crv_treasury_idx` (`treasury_id`),\r\n  KEY `crv_party_idx` (`party_id`),\r\n  KEY `crv_category_idx` (`category_id`),\r\n  KEY `crv_date_idx` (`voucher_date`),\r\n  KEY `cr_currency_idx` (`currency_id`),\r\n  KEY `cr_journal_entry_idx` (`journal_entry_id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_receipt_vouchers`\r\n--\r\n\r\nLOCK TABLES `custom_receipt_vouchers` WRITE;\r\n/*!40000 ALTER TABLE `custom_receipt_vouchers` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_receipt_vouchers` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_reconciliations`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_reconciliations`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_reconciliations` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `payment_voucher_id` int(11) NOT NULL,\r\n  `receipt_voucher_id` int(11) NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `confidence_score` enum('high','medium','low') DEFAULT 'medium',\r\n  `status` enum('pending','confirmed','rejected') DEFAULT 'pending',\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `confirmed_by` int(11) DEFAULT NULL,\r\n  `confirmed_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_reconciliations`\r\n--\r\n\r\nLOCK TABLES `custom_reconciliations` WRITE;\r\n/*!40000 ALTER TABLE `custom_reconciliations` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_reconciliations` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_settings`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_settings`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_settings` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `sub_system_id` int(11) DEFAULT NULL,\r\n  `setting_key` varchar(100) NOT NULL,\r\n  `setting_value` mediumtext DEFAULT NULL,\r\n  `setting_type` enum('string','number','boolean','json') DEFAULT 'string',\r\n  `description` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_settings`\r\n--\r\n\r\nLOCK TABLES `custom_settings` WRITE;\r\n/*!40000 ALTER TABLE `custom_settings` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_settings` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_sub_systems`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_sub_systems`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_sub_systems` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `default_currency_id` int(11) DEFAULT NULL,\r\n  `allow_multiple_currencies` tinyint(1) NOT NULL DEFAULT 0,\r\n  `fiscal_year_start` date DEFAULT NULL,\r\n  `fiscal_year_end` date DEFAULT NULL,\r\n  `color` varchar(20) DEFAULT NULL,\r\n  `icon` varchar(50) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `css_code_idx` (`business_id`,`code`),\r\n  KEY `css_business_idx` (`business_id`),\r\n  KEY `css_default_currency_idx` (`default_currency_id`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_sub_systems`\r\n--\r\n\r\nLOCK TABLES `custom_sub_systems` WRITE;\r\n/*!40000 ALTER TABLE `custom_sub_systems` DISABLE KEYS */;\r\nINSERT INTO `custom_sub_systems` VALUES (1,1,'FR-001','أعمال الحديدة','Branch One','نظام إدارة أعمال الحديدة',NULL,0,NULL,NULL,'blue','layers',1,1,'2025-12-28 21:07:25','2025-12-28 23:42:45'),(2,1,'FR-002','حسابات محمدي والعباسي','Branch Two','نظام حسابات محمدي والعباسي',NULL,0,NULL,NULL,'green','wallet',1,1,'2025-12-28 21:07:25','2025-12-28 23:42:45'),(3,1,'FR-003','العباسي الرئيسي','Al-Abbasi Main','النظام الرئيسي للعباسي',NULL,0,NULL,NULL,NULL,NULL,1,NULL,'2025-12-28 23:41:08','2025-12-28 23:41:08'),(4,1,'FR-004','العباسي شخصي','Al-Abbasi Personal','النظام الشخصي للعباسي',NULL,0,NULL,NULL,NULL,NULL,1,NULL,'2025-12-28 23:41:08','2025-12-28 23:41:08'),(5,1,'231','555555','','',NULL,0,NULL,NULL,'blue','layers',1,1,'2025-12-31 22:42:09','2025-12-31 22:42:09');\r\n/*!40000 ALTER TABLE `custom_sub_systems` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_treasuries`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_treasuries`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_treasuries` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `sub_system_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `treasury_type` enum('cash','bank','wallet','exchange') NOT NULL,\r\n  `account_id` int(11) DEFAULT NULL,\r\n  `bank_name` varchar(255) DEFAULT NULL,\r\n  `account_number` varchar(100) DEFAULT NULL,\r\n  `iban` varchar(50) DEFAULT NULL,\r\n  `swift_code` varchar(20) DEFAULT NULL,\r\n  `wallet_provider` varchar(100) DEFAULT NULL,\r\n  `wallet_number` varchar(100) DEFAULT NULL,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `opening_balance` decimal(18,2) DEFAULT 0.00,\r\n  `current_balance` decimal(18,2) DEFAULT 0.00,\r\n  `description` text DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `accountId` int(11) DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `ct_code_idx` (`business_id`,`code`),\r\n  KEY `ct_business_idx` (`business_id`),\r\n  KEY `ct_subsystem_idx` (`sub_system_id`),\r\n  KEY `ct_type_idx` (`treasury_type`),\r\n  KEY `fk_treasury_account` (`accountId`),\r\n  KEY `ct_account_idx` (`account_id`),\r\n  CONSTRAINT `fk_treasury_account` FOREIGN KEY (`accountId`) REFERENCES `custom_accounts` (`id`) ON DELETE SET NULL\r\n) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_treasuries`\r\n--\r\n\r\nLOCK TABLES `custom_treasuries` WRITE;\r\n/*!40000 ALTER TABLE `custom_treasuries` DISABLE KEYS */;\r\nINSERT INTO `custom_treasuries` VALUES (1,1,1,'TR-001','صندوق التحصيل والتوريد الدهمية','Collection and Supply Treasury - Dhamiya','cash',18,NULL,NULL,NULL,NULL,NULL,NULL,'',0.00,0.00,'صندوق التحصيل والتوريد الدهمية',1,NULL,'2025-12-28 23:46:13','2026-01-01 00:12:27',NULL),(2,1,1,'TR-002','صندوق التحصيل والتوريد الصبالي','Collection and Supply Treasury - Sabali','cash',18,NULL,NULL,NULL,NULL,NULL,NULL,'YER',0.00,0.00,'صندوق التحصيل والتوريد الصبالي',1,NULL,'2025-12-28 23:46:13','2026-01-01 00:03:58',NULL),(3,1,1,'TR-003','صندوق غليل','Ghalil Treasury','cash',18,NULL,NULL,NULL,NULL,NULL,NULL,'YER',0.00,0.00,'صندوق غليل',1,NULL,'2025-12-28 23:46:13','2026-01-01 00:04:08',NULL),(4,1,1,'21','بنك','','bank',20,'','','',NULL,'','','',0.00,0.00,'',1,1,'2026-01-01 00:04:29','2026-01-01 00:12:16',NULL),(5,1,1,'55','محفظة','','wallet',21,'','','',NULL,'','','',0.00,0.00,'',1,1,'2026-01-01 00:04:45','2026-01-01 00:11:59',NULL),(6,1,1,'88','صراف','','exchange',19,'','','',NULL,'','','YER',0.00,0.00,'',1,1,'2026-01-01 00:05:01','2026-01-01 00:05:01',NULL);\r\n/*!40000 ALTER TABLE `custom_treasuries` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `custom_treasury_transfers`\r\n--\r\n\r\nDROP TABLE IF EXISTS `custom_treasury_transfers`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `custom_treasury_transfers` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `sub_system_id` int(11) NOT NULL,\r\n  `transfer_number` varchar(50) NOT NULL,\r\n  `transfer_date` date NOT NULL,\r\n  `from_treasury_id` int(11) NOT NULL,\r\n  `to_treasury_id` int(11) NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `exchange_rate` decimal(10,6) DEFAULT 1.000000,\r\n  `fees` decimal(18,2) DEFAULT 0.00,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `status` enum('draft','confirmed','cancelled') DEFAULT 'draft',\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `custom_treasury_transfers`\r\n--\r\n\r\nLOCK TABLES `custom_treasury_transfers` WRITE;\r\n/*!40000 ALTER TABLE `custom_treasury_transfers` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `custom_treasury_transfers` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `customer_transactions_new`\r\n--\r\n\r\nDROP TABLE IF EXISTS `customer_transactions_new`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `customer_transactions_new` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `customer_id` int(11) NOT NULL,\r\n  `wallet_id` int(11) DEFAULT NULL,\r\n  `trans_type` enum('payment','refund','charge','adjustment','deposit','withdrawal') NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `balance_before` decimal(18,2) DEFAULT NULL,\r\n  `balance_after` decimal(18,2) DEFAULT NULL,\r\n  `reference_type` varchar(50) DEFAULT NULL,\r\n  `reference_id` int(11) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `customer_transactions_new`\r\n--\r\n\r\nLOCK TABLES `customer_transactions_new` WRITE;\r\n/*!40000 ALTER TABLE `customer_transactions_new` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `customer_transactions_new` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `customer_wallets`\r\n--\r\n\r\nDROP TABLE IF EXISTS `customer_wallets`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `customer_wallets` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `customer_id` int(11) NOT NULL,\r\n  `balance` decimal(18,2) DEFAULT 0.00,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `last_transaction_date` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `customer_wallets`\r\n--\r\n\r\nLOCK TABLES `customer_wallets` WRITE;\r\n/*!40000 ALTER TABLE `customer_wallets` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `customer_wallets` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `customers`\r\n--\r\n\r\nDROP TABLE IF EXISTS `customers`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `customers` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `account_number` varchar(50) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `type` enum('residential','commercial','industrial','government','agricultural') DEFAULT 'residential',\r\n  `category` varchar(50) DEFAULT NULL,\r\n  `id_type` enum('national_id','iqama','passport','cr') DEFAULT NULL,\r\n  `id_number` varchar(50) DEFAULT NULL,\r\n  `phone` varchar(50) DEFAULT NULL,\r\n  `mobile` varchar(50) DEFAULT NULL,\r\n  `email` varchar(255) DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `city` varchar(100) DEFAULT NULL,\r\n  `district` varchar(100) DEFAULT NULL,\r\n  `postal_code` varchar(20) DEFAULT NULL,\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `tariff_id` int(11) DEFAULT NULL,\r\n  `connection_date` date DEFAULT NULL,\r\n  `status` enum('active','suspended','disconnected','closed') DEFAULT 'active',\r\n  `current_balance` decimal(18,2) DEFAULT 0.00,\r\n  `deposit_amount` decimal(18,2) DEFAULT 0.00,\r\n  `credit_limit` decimal(18,2) DEFAULT NULL,\r\n  `account_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `customers`\r\n--\r\n\r\nLOCK TABLES `customers` WRITE;\r\n/*!40000 ALTER TABLE `customers` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `customers` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `customers_enhanced`\r\n--\r\n\r\nDROP TABLE IF EXISTS `customers_enhanced`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `customers_enhanced` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `project_id` int(11) DEFAULT NULL,\r\n  `full_name` varchar(255) NOT NULL,\r\n  `mobile_no` varchar(50) DEFAULT NULL,\r\n  `phone` varchar(50) DEFAULT NULL,\r\n  `email` varchar(255) DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `national_id` varchar(50) DEFAULT NULL,\r\n  `customer_type` enum('residential','commercial','industrial','government') DEFAULT 'residential',\r\n  `service_tier` enum('basic','premium','vip') DEFAULT 'basic',\r\n  `cust_status` enum('active','inactive','suspended','closed') DEFAULT 'active',\r\n  `balance_due` decimal(18,2) DEFAULT 0.00,\r\n  `user_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `customers_enhanced`\r\n--\r\n\r\nLOCK TABLES `customers_enhanced` WRITE;\r\n/*!40000 ALTER TABLE `customers_enhanced` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `customers_enhanced` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `departments`\r\n--\r\n\r\nDROP TABLE IF EXISTS `departments`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `departments` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(100) NOT NULL,\r\n  `name_en` varchar(100) DEFAULT NULL,\r\n  `parent_id` int(11) DEFAULT NULL,\r\n  `manager_id` int(11) DEFAULT NULL,\r\n  `cost_center_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `departments`\r\n--\r\n\r\nLOCK TABLES `departments` WRITE;\r\n/*!40000 ALTER TABLE `departments` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `departments` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `diesel_pipes`\r\n--\r\n\r\nDROP TABLE IF EXISTS `diesel_pipes`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `diesel_pipes` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `pipe_material` enum('iron','plastic','copper','stainless_steel') DEFAULT 'iron',\r\n  `diameter` decimal(6,2) DEFAULT NULL,\r\n  `length` decimal(8,2) DEFAULT NULL,\r\n  `condition` enum('good','fair','poor','needs_replacement') DEFAULT 'good',\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `diesel_pipes`\r\n--\r\n\r\nLOCK TABLES `diesel_pipes` WRITE;\r\n/*!40000 ALTER TABLE `diesel_pipes` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `diesel_pipes` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `diesel_pump_meters`\r\n--\r\n\r\nDROP TABLE IF EXISTS `diesel_pump_meters`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `diesel_pump_meters` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `supplier_id` int(11) DEFAULT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `pump_type` enum('supplier','intake','output') NOT NULL,\r\n  `serial_number` varchar(100) DEFAULT NULL,\r\n  `current_reading` decimal(15,2) DEFAULT 0.00,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `diesel_pump_meters`\r\n--\r\n\r\nLOCK TABLES `diesel_pump_meters` WRITE;\r\n/*!40000 ALTER TABLE `diesel_pump_meters` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `diesel_pump_meters` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `diesel_pump_readings`\r\n--\r\n\r\nDROP TABLE IF EXISTS `diesel_pump_readings`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `diesel_pump_readings` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `pump_meter_id` int(11) NOT NULL,\r\n  `task_id` int(11) DEFAULT NULL,\r\n  `reading_date` datetime NOT NULL,\r\n  `reading_value` decimal(15,2) NOT NULL,\r\n  `reading_type` enum('before','after') NOT NULL,\r\n  `reading_image` mediumtext DEFAULT NULL,\r\n  `quantity` decimal(10,2) DEFAULT NULL,\r\n  `recorded_by` int(11) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `diesel_pump_readings`\r\n--\r\n\r\nLOCK TABLES `diesel_pump_readings` WRITE;\r\n/*!40000 ALTER TABLE `diesel_pump_readings` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `diesel_pump_readings` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `diesel_receiving_tasks`\r\n--\r\n\r\nDROP TABLE IF EXISTS `diesel_receiving_tasks`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `diesel_receiving_tasks` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) NOT NULL,\r\n  `task_number` varchar(50) NOT NULL,\r\n  `task_date` date NOT NULL,\r\n  `employee_id` int(11) NOT NULL,\r\n  `tanker_id` int(11) NOT NULL,\r\n  `supplier_id` int(11) NOT NULL,\r\n  `task_status` enum('pending','started','at_supplier','loading','returning','at_station','unloading','completed','cancelled') DEFAULT 'pending',\r\n  `start_time` datetime DEFAULT NULL,\r\n  `arrival_at_supplier_time` datetime DEFAULT NULL,\r\n  `loading_start_time` datetime DEFAULT NULL,\r\n  `loading_end_time` datetime DEFAULT NULL,\r\n  `departure_from_supplier_time` datetime DEFAULT NULL,\r\n  `arrival_at_station_time` datetime DEFAULT NULL,\r\n  `unloading_start_time` datetime DEFAULT NULL,\r\n  `unloading_end_time` datetime DEFAULT NULL,\r\n  `completion_time` datetime DEFAULT NULL,\r\n  `supplier_pump_id` int(11) DEFAULT NULL,\r\n  `supplier_pump_reading_before` decimal(15,2) DEFAULT NULL,\r\n  `supplier_pump_reading_after` decimal(15,2) DEFAULT NULL,\r\n  `supplier_pump_reading_before_image` mediumtext DEFAULT NULL,\r\n  `supplier_pump_reading_after_image` mediumtext DEFAULT NULL,\r\n  `supplier_invoice_number` varchar(50) DEFAULT NULL,\r\n  `supplier_invoice_image` mediumtext DEFAULT NULL,\r\n  `supplier_invoice_amount` decimal(18,2) DEFAULT NULL,\r\n  `quantity_from_supplier` decimal(10,2) DEFAULT NULL,\r\n  `compartment1_quantity` decimal(10,2) DEFAULT NULL,\r\n  `compartment2_quantity` decimal(10,2) DEFAULT NULL,\r\n  `intake_pump_id` int(11) DEFAULT NULL,\r\n  `intake_pump_reading_before` decimal(15,2) DEFAULT NULL,\r\n  `intake_pump_reading_after` decimal(15,2) DEFAULT NULL,\r\n  `intake_pump_reading_before_image` mediumtext DEFAULT NULL,\r\n  `intake_pump_reading_after_image` mediumtext DEFAULT NULL,\r\n  `quantity_received_at_station` decimal(10,2) DEFAULT NULL,\r\n  `receiving_tank_id` int(11) DEFAULT NULL,\r\n  `quantity_difference` decimal(10,2) DEFAULT NULL,\r\n  `difference_notes` mediumtext DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `diesel_receiving_tasks`\r\n--\r\n\r\nLOCK TABLES `diesel_receiving_tasks` WRITE;\r\n/*!40000 ALTER TABLE `diesel_receiving_tasks` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `diesel_receiving_tasks` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `diesel_suppliers`\r\n--\r\n\r\nDROP TABLE IF EXISTS `diesel_suppliers`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `diesel_suppliers` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `phone` varchar(50) DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `contact_person` varchar(100) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `diesel_suppliers`\r\n--\r\n\r\nLOCK TABLES `diesel_suppliers` WRITE;\r\n/*!40000 ALTER TABLE `diesel_suppliers` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `diesel_suppliers` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `diesel_tank_movements`\r\n--\r\n\r\nDROP TABLE IF EXISTS `diesel_tank_movements`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `diesel_tank_movements` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) NOT NULL,\r\n  `movement_date` datetime NOT NULL,\r\n  `movement_type` enum('receiving','transfer','consumption','adjustment') NOT NULL,\r\n  `from_tank_id` int(11) DEFAULT NULL,\r\n  `to_tank_id` int(11) DEFAULT NULL,\r\n  `quantity` decimal(10,2) NOT NULL,\r\n  `task_id` int(11) DEFAULT NULL,\r\n  `output_pump_id` int(11) DEFAULT NULL,\r\n  `output_pump_reading_before` decimal(15,2) DEFAULT NULL,\r\n  `output_pump_reading_after` decimal(15,2) DEFAULT NULL,\r\n  `generator_id` int(11) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `recorded_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `diesel_tank_movements`\r\n--\r\n\r\nLOCK TABLES `diesel_tank_movements` WRITE;\r\n/*!40000 ALTER TABLE `diesel_tank_movements` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `diesel_tank_movements` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `diesel_tank_openings`\r\n--\r\n\r\nDROP TABLE IF EXISTS `diesel_tank_openings`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `diesel_tank_openings` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `tank_id` int(11) NOT NULL,\r\n  `opening_number` int(11) NOT NULL,\r\n  `position` enum('top','bottom','side') NOT NULL,\r\n  `usage` enum('inlet','outlet','ventilation','measurement','cleaning') NOT NULL,\r\n  `diameter` decimal(6,2) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `diesel_tank_openings`\r\n--\r\n\r\nLOCK TABLES `diesel_tank_openings` WRITE;\r\n/*!40000 ALTER TABLE `diesel_tank_openings` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `diesel_tank_openings` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `diesel_tankers`\r\n--\r\n\r\nDROP TABLE IF EXISTS `diesel_tankers`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `diesel_tankers` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `plate_number` varchar(20) NOT NULL,\r\n  `capacity` decimal(10,2) NOT NULL,\r\n  `compartment1_capacity` decimal(10,2) DEFAULT NULL,\r\n  `compartment2_capacity` decimal(10,2) DEFAULT NULL,\r\n  `driver_name` varchar(100) DEFAULT NULL,\r\n  `driver_phone` varchar(50) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `diesel_tankers`\r\n--\r\n\r\nLOCK TABLES `diesel_tankers` WRITE;\r\n/*!40000 ALTER TABLE `diesel_tankers` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `diesel_tankers` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `diesel_tanks`\r\n--\r\n\r\nDROP TABLE IF EXISTS `diesel_tanks`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `diesel_tanks` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `tank_type` enum('receiving','main','pre_output','generator') NOT NULL,\r\n  `tank_material` enum('plastic','iron','stainless_steel','fiberglass') DEFAULT 'plastic',\r\n  `brand` varchar(100) DEFAULT NULL,\r\n  `color` varchar(50) DEFAULT NULL,\r\n  `capacity` decimal(10,2) NOT NULL,\r\n  `height` decimal(8,2) DEFAULT NULL,\r\n  `diameter` decimal(8,2) DEFAULT NULL,\r\n  `dead_stock` decimal(10,2) DEFAULT 0.00,\r\n  `effective_capacity` decimal(10,2) DEFAULT NULL,\r\n  `current_level` decimal(10,2) DEFAULT 0.00,\r\n  `min_level` decimal(10,2) DEFAULT 0.00,\r\n  `openings_count` int(11) DEFAULT 1,\r\n  `linked_generator_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `diesel_tanks`\r\n--\r\n\r\nLOCK TABLES `diesel_tanks` WRITE;\r\n/*!40000 ALTER TABLE `diesel_tanks` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `diesel_tanks` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `employee_contracts`\r\n--\r\n\r\nDROP TABLE IF EXISTS `employee_contracts`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `employee_contracts` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `employee_id` int(11) NOT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `contract_number` varchar(50) NOT NULL,\r\n  `contract_type` enum('permanent','fixed_term','temporary','probation') DEFAULT 'permanent',\r\n  `start_date` date NOT NULL,\r\n  `end_date` date DEFAULT NULL,\r\n  `basic_salary` decimal(15,2) DEFAULT NULL,\r\n  `probation_period_days` int(11) DEFAULT 90,\r\n  `notice_period_days` int(11) DEFAULT 30,\r\n  `document_path` varchar(500) DEFAULT NULL,\r\n  `status` enum('active','expired','terminated','renewed') DEFAULT 'active',\r\n  `termination_date` date DEFAULT NULL,\r\n  `termination_reason` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `employee_contracts`\r\n--\r\n\r\nLOCK TABLES `employee_contracts` WRITE;\r\n/*!40000 ALTER TABLE `employee_contracts` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `employee_contracts` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `employees`\r\n--\r\n\r\nDROP TABLE IF EXISTS `employees`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `employees` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `employee_number` varchar(20) NOT NULL,\r\n  `first_name` varchar(100) NOT NULL,\r\n  `middle_name` varchar(100) DEFAULT NULL,\r\n  `last_name` varchar(100) NOT NULL,\r\n  `full_name_ar` varchar(200) DEFAULT NULL,\r\n  `full_name_en` varchar(200) DEFAULT NULL,\r\n  `id_type` enum('national_id','passport','residence') DEFAULT 'national_id',\r\n  `id_number` varchar(50) NOT NULL,\r\n  `id_expiry_date` date DEFAULT NULL,\r\n  `nationality` varchar(50) DEFAULT NULL,\r\n  `gender` enum('male','female') DEFAULT 'male',\r\n  `date_of_birth` date DEFAULT NULL,\r\n  `place_of_birth` varchar(100) DEFAULT NULL,\r\n  `marital_status` enum('single','married','divorced','widowed') DEFAULT 'single',\r\n  `phone` varchar(20) DEFAULT NULL,\r\n  `mobile` varchar(20) NOT NULL,\r\n  `email` varchar(100) DEFAULT NULL,\r\n  `personal_email` varchar(100) DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `city` varchar(100) DEFAULT NULL,\r\n  `district` varchar(100) DEFAULT NULL,\r\n  `emergency_contact_name` varchar(100) DEFAULT NULL,\r\n  `emergency_contact_phone` varchar(20) DEFAULT NULL,\r\n  `emergency_contact_relation` varchar(50) DEFAULT NULL,\r\n  `photo_path` varchar(500) DEFAULT NULL,\r\n  `hire_date` date NOT NULL,\r\n  `probation_end_date` date DEFAULT NULL,\r\n  `contract_type` enum('permanent','contract','temporary','part_time') DEFAULT 'permanent',\r\n  `contract_start_date` date DEFAULT NULL,\r\n  `contract_end_date` date DEFAULT NULL,\r\n  `job_title_id` int(11) DEFAULT NULL,\r\n  `department_id` int(11) DEFAULT NULL,\r\n  `manager_id` int(11) DEFAULT NULL,\r\n  `is_manager` tinyint(1) DEFAULT 0,\r\n  `work_location` varchar(100) DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `work_schedule` enum('full_time','shift','flexible') DEFAULT 'full_time',\r\n  `working_hours_per_week` decimal(5,2) DEFAULT 40.00,\r\n  `field_worker_id` int(11) DEFAULT NULL,\r\n  `status` enum('active','inactive','terminated','suspended','on_leave') DEFAULT 'active',\r\n  `termination_date` date DEFAULT NULL,\r\n  `termination_reason` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `employees`\r\n--\r\n\r\nLOCK TABLES `employees` WRITE;\r\n/*!40000 ALTER TABLE `employees` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `employees` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `equipment`\r\n--\r\n\r\nDROP TABLE IF EXISTS `equipment`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `equipment` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) NOT NULL,\r\n  `asset_id` int(11) DEFAULT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `type` enum('transformer','generator','switchgear','breaker','relay','meter','sensor','inverter','battery','panel','cable','motor') NOT NULL,\r\n  `status` enum('online','offline','maintenance','fault','unknown') DEFAULT 'unknown',\r\n  `manufacturer` varchar(100) DEFAULT NULL,\r\n  `model` varchar(100) DEFAULT NULL,\r\n  `serial_number` varchar(100) DEFAULT NULL,\r\n  `rated_capacity` decimal(15,2) DEFAULT NULL,\r\n  `capacity_unit` varchar(20) DEFAULT NULL,\r\n  `voltage_rating` varchar(50) DEFAULT NULL,\r\n  `current_rating` varchar(50) DEFAULT NULL,\r\n  `installation_date` date DEFAULT NULL,\r\n  `last_maintenance_date` date DEFAULT NULL,\r\n  `next_maintenance_date` date DEFAULT NULL,\r\n  `location` varchar(255) DEFAULT NULL,\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `is_controllable` tinyint(1) DEFAULT 0,\r\n  `is_monitored` tinyint(1) DEFAULT 1,\r\n  `communication_protocol` varchar(50) DEFAULT NULL,\r\n  `ip_address` varchar(50) DEFAULT NULL,\r\n  `metadata` longtext DEFAULT NULL CHECK (json_valid(`metadata`)),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `equipment`\r\n--\r\n\r\nLOCK TABLES `equipment` WRITE;\r\n/*!40000 ALTER TABLE `equipment` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `equipment` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `equipment_movements`\r\n--\r\n\r\nDROP TABLE IF EXISTS `equipment_movements`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `equipment_movements` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `equipment_id` int(11) NOT NULL,\r\n  `movement_type` enum('checkout','return','transfer','maintenance','retire') NOT NULL,\r\n  `from_holder_id` int(11) DEFAULT NULL,\r\n  `to_holder_id` int(11) DEFAULT NULL,\r\n  `operation_id` int(11) DEFAULT NULL,\r\n  `movement_date` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `condition_before` enum('excellent','good','fair','poor') DEFAULT NULL,\r\n  `condition_after` enum('excellent','good','fair','poor') DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `recorded_by` int(11) DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `equipment_movements`\r\n--\r\n\r\nLOCK TABLES `equipment_movements` WRITE;\r\n/*!40000 ALTER TABLE `equipment_movements` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `equipment_movements` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `event_subscriptions`\r\n--\r\n\r\nDROP TABLE IF EXISTS `event_subscriptions`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `event_subscriptions` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `subscriber_name` varchar(100) NOT NULL,\r\n  `event_type` varchar(100) NOT NULL,\r\n  `handler_type` enum('webhook','queue','function','email','sms') NOT NULL,\r\n  `handler_config` longtext NOT NULL CHECK (json_valid(`handler_config`)),\r\n  `filter_expression` longtext DEFAULT NULL CHECK (json_valid(`filter_expression`)),\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `priority` int(11) DEFAULT 0,\r\n  `max_retries` int(11) DEFAULT 3,\r\n  `retry_delay_seconds` int(11) DEFAULT 60,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `event_subscriptions`\r\n--\r\n\r\nLOCK TABLES `event_subscriptions` WRITE;\r\n/*!40000 ALTER TABLE `event_subscriptions` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `event_subscriptions` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `fee_types`\r\n--\r\n\r\nDROP TABLE IF EXISTS `fee_types`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `fee_types` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `fee_type` enum('fixed','percentage','per_unit') DEFAULT 'fixed',\r\n  `amount` decimal(18,2) DEFAULT 0.00,\r\n  `is_recurring` tinyint(1) DEFAULT 0,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `fee_types`\r\n--\r\n\r\nLOCK TABLES `fee_types` WRITE;\r\n/*!40000 ALTER TABLE `fee_types` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `fee_types` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `field_equipment`\r\n--\r\n\r\nDROP TABLE IF EXISTS `field_equipment`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `field_equipment` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `equipment_code` varchar(30) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `equipment_type` enum('tool','vehicle','device','safety','measuring') NOT NULL,\r\n  `serial_number` varchar(100) DEFAULT NULL,\r\n  `model` varchar(100) DEFAULT NULL,\r\n  `brand` varchar(100) DEFAULT NULL,\r\n  `status` enum('available','in_use','maintenance','retired','lost') DEFAULT 'available',\r\n  `current_holder_id` int(11) DEFAULT NULL,\r\n  `assigned_team_id` int(11) DEFAULT NULL,\r\n  `purchase_date` date DEFAULT NULL,\r\n  `purchase_cost` decimal(12,2) DEFAULT NULL,\r\n  `warranty_end` date DEFAULT NULL,\r\n  `last_maintenance` date DEFAULT NULL,\r\n  `next_maintenance` date DEFAULT NULL,\r\n  `condition` enum('excellent','good','fair','poor') DEFAULT 'good',\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `field_equipment`\r\n--\r\n\r\nLOCK TABLES `field_equipment` WRITE;\r\n/*!40000 ALTER TABLE `field_equipment` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `field_equipment` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `field_operations`\r\n--\r\n\r\nDROP TABLE IF EXISTS `field_operations`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `field_operations` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `operation_number` varchar(30) NOT NULL,\r\n  `operation_type` enum('installation','maintenance','inspection','disconnection','reconnection','meter_reading','collection','repair','replacement') NOT NULL,\r\n  `status` enum('draft','scheduled','assigned','in_progress','waiting_customer','on_hold','completed','cancelled','rejected') DEFAULT 'draft',\r\n  `priority` enum('low','medium','high','urgent') DEFAULT 'medium',\r\n  `title` varchar(255) NOT NULL,\r\n  `description` text DEFAULT NULL,\r\n  `reference_type` varchar(50) DEFAULT NULL,\r\n  `reference_id` int(11) DEFAULT NULL,\r\n  `customer_id` int(11) DEFAULT NULL,\r\n  `asset_id` int(11) DEFAULT NULL,\r\n  `location_lat` decimal(10,8) DEFAULT NULL,\r\n  `location_lng` decimal(11,8) DEFAULT NULL,\r\n  `address` text DEFAULT NULL,\r\n  `scheduled_date` date DEFAULT NULL,\r\n  `scheduled_time` varchar(10) DEFAULT NULL,\r\n  `started_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `completed_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `assigned_team_id` int(11) DEFAULT NULL,\r\n  `assigned_worker_id` int(11) DEFAULT NULL,\r\n  `estimated_duration` int(11) DEFAULT NULL,\r\n  `actual_duration` int(11) DEFAULT NULL,\r\n  `notes` text DEFAULT NULL,\r\n  `completion_notes` text DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `field_operations`\r\n--\r\n\r\nLOCK TABLES `field_operations` WRITE;\r\n/*!40000 ALTER TABLE `field_operations` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `field_operations` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `field_teams`\r\n--\r\n\r\nDROP TABLE IF EXISTS `field_teams`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `field_teams` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `team_type` enum('installation','maintenance','inspection','collection','mixed') DEFAULT 'mixed',\r\n  `leader_id` int(11) DEFAULT NULL,\r\n  `max_members` int(11) DEFAULT 10,\r\n  `current_members` int(11) DEFAULT 0,\r\n  `status` enum('active','inactive','on_leave') DEFAULT 'active',\r\n  `working_area` mediumtext DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `field_teams`\r\n--\r\n\r\nLOCK TABLES `field_teams` WRITE;\r\n/*!40000 ALTER TABLE `field_teams` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `field_teams` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `field_workers`\r\n--\r\n\r\nDROP TABLE IF EXISTS `field_workers`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `field_workers` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `user_id` int(11) DEFAULT NULL,\r\n  `employee_number` varchar(30) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `phone` varchar(50) DEFAULT NULL,\r\n  `email` varchar(255) DEFAULT NULL,\r\n  `team_id` int(11) DEFAULT NULL,\r\n  `worker_type` enum('technician','engineer','supervisor','driver','helper') DEFAULT 'technician',\r\n  `specialization` varchar(100) DEFAULT NULL,\r\n  `skills` longtext DEFAULT NULL CHECK (json_valid(`skills`)),\r\n  `status` enum('available','busy','on_leave','inactive') DEFAULT 'available',\r\n  `current_location_lat` decimal(10,8) DEFAULT NULL,\r\n  `current_location_lng` decimal(11,8) DEFAULT NULL,\r\n  `last_location_update` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `hire_date` date DEFAULT NULL,\r\n  `daily_rate` decimal(10,2) DEFAULT NULL,\r\n  `operation_rate` decimal(10,2) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `employee_id` int(11) DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `field_workers`\r\n--\r\n\r\nLOCK TABLES `field_workers` WRITE;\r\n/*!40000 ALTER TABLE `field_workers` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `field_workers` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `fiscal_periods`\r\n--\r\n\r\nDROP TABLE IF EXISTS `fiscal_periods`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `fiscal_periods` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `year` int(11) NOT NULL,\r\n  `period` int(11) NOT NULL,\r\n  `name_ar` varchar(100) NOT NULL,\r\n  `name_en` varchar(100) DEFAULT NULL,\r\n  `start_date` date NOT NULL,\r\n  `end_date` date NOT NULL,\r\n  `status` enum('open','closed','locked') DEFAULT 'open',\r\n  `closed_by` int(11) DEFAULT NULL,\r\n  `closed_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `fiscal_periods`\r\n--\r\n\r\nLOCK TABLES `fiscal_periods` WRITE;\r\n/*!40000 ALTER TABLE `fiscal_periods` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `fiscal_periods` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `generator_diesel_consumption`\r\n--\r\n\r\nDROP TABLE IF EXISTS `generator_diesel_consumption`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `generator_diesel_consumption` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) NOT NULL,\r\n  `generator_id` int(11) NOT NULL,\r\n  `consumption_date` date NOT NULL,\r\n  `rocket_tank_id` int(11) DEFAULT NULL,\r\n  `start_level` decimal(10,2) DEFAULT NULL,\r\n  `end_level` decimal(10,2) DEFAULT NULL,\r\n  `quantity_consumed` decimal(10,2) NOT NULL,\r\n  `running_hours` decimal(8,2) DEFAULT NULL,\r\n  `consumption_rate` decimal(8,2) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `recorded_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `generator_diesel_consumption`\r\n--\r\n\r\nLOCK TABLES `generator_diesel_consumption` WRITE;\r\n/*!40000 ALTER TABLE `generator_diesel_consumption` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `generator_diesel_consumption` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `incoming_webhooks`\r\n--\r\n\r\nDROP TABLE IF EXISTS `incoming_webhooks`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `incoming_webhooks` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `integration_id` int(11) NOT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `webhook_type` varchar(100) NOT NULL,\r\n  `payload` longtext NOT NULL CHECK (json_valid(`payload`)),\r\n  `headers` longtext DEFAULT NULL CHECK (json_valid(`headers`)),\r\n  `signature` varchar(255) DEFAULT NULL,\r\n  `is_valid` tinyint(1) DEFAULT 1,\r\n  `status` enum('received','processing','processed','failed') DEFAULT 'received',\r\n  `processed_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `error_message` mediumtext DEFAULT NULL,\r\n  `retry_count` int(11) DEFAULT 0,\r\n  `source_ip` varchar(50) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `incoming_webhooks`\r\n--\r\n\r\nLOCK TABLES `incoming_webhooks` WRITE;\r\n/*!40000 ALTER TABLE `incoming_webhooks` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `incoming_webhooks` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `inspection_checklists`\r\n--\r\n\r\nDROP TABLE IF EXISTS `inspection_checklists`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `inspection_checklists` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(30) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `operation_type` varchar(50) DEFAULT NULL,\r\n  `items` longtext DEFAULT NULL CHECK (json_valid(`items`)),\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `inspection_checklists`\r\n--\r\n\r\nLOCK TABLES `inspection_checklists` WRITE;\r\n/*!40000 ALTER TABLE `inspection_checklists` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `inspection_checklists` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `inspection_items`\r\n--\r\n\r\nDROP TABLE IF EXISTS `inspection_items`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `inspection_items` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `inspection_id` int(11) NOT NULL,\r\n  `checklist_item_id` int(11) DEFAULT NULL,\r\n  `item_name` varchar(255) NOT NULL,\r\n  `is_passed` tinyint(1) DEFAULT NULL,\r\n  `score` decimal(5,2) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `photo_url` varchar(500) DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `inspection_items`\r\n--\r\n\r\nLOCK TABLES `inspection_items` WRITE;\r\n/*!40000 ALTER TABLE `inspection_items` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `inspection_items` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `inspections`\r\n--\r\n\r\nDROP TABLE IF EXISTS `inspections`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `inspections` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `operation_id` int(11) NOT NULL,\r\n  `inspection_number` varchar(30) NOT NULL,\r\n  `inspection_type` enum('quality','safety','completion','periodic') NOT NULL,\r\n  `inspector_id` int(11) DEFAULT NULL,\r\n  `inspection_date` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `status` enum('pending','passed','failed','conditional') DEFAULT 'pending',\r\n  `overall_score` decimal(5,2) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `inspections`\r\n--\r\n\r\nLOCK TABLES `inspections` WRITE;\r\n/*!40000 ALTER TABLE `inspections` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `inspections` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `installation_details`\r\n--\r\n\r\nDROP TABLE IF EXISTS `installation_details`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `installation_details` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `operation_id` int(11) NOT NULL,\r\n  `customer_id` int(11) DEFAULT NULL,\r\n  `meter_serial_number` varchar(100) DEFAULT NULL,\r\n  `meter_type` enum('smart','traditional','prepaid') DEFAULT NULL,\r\n  `seal_number` varchar(50) DEFAULT NULL,\r\n  `seal_color` varchar(30) DEFAULT NULL,\r\n  `seal_type` varchar(50) DEFAULT NULL,\r\n  `breaker_type` varchar(50) DEFAULT NULL,\r\n  `breaker_capacity` varchar(20) DEFAULT NULL,\r\n  `breaker_brand` varchar(50) DEFAULT NULL,\r\n  `cable_length` decimal(10,2) DEFAULT NULL,\r\n  `cable_type` varchar(50) DEFAULT NULL,\r\n  `cable_size` varchar(20) DEFAULT NULL,\r\n  `initial_reading` decimal(15,3) DEFAULT NULL,\r\n  `installation_date` date DEFAULT NULL,\r\n  `installation_time` varchar(10) DEFAULT NULL,\r\n  `technician_id` int(11) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `customer_signature` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `installation_details`\r\n--\r\n\r\nLOCK TABLES `installation_details` WRITE;\r\n/*!40000 ALTER TABLE `installation_details` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `installation_details` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `installation_photos`\r\n--\r\n\r\nDROP TABLE IF EXISTS `installation_photos`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `installation_photos` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `installation_id` int(11) DEFAULT NULL,\r\n  `operation_id` int(11) NOT NULL,\r\n  `photo_type` enum('meter_front','meter_reading','seal','breaker','wiring','location','customer_premises','before_installation','after_installation') DEFAULT NULL,\r\n  `photo_url` varchar(500) NOT NULL,\r\n  `caption` varchar(200) DEFAULT NULL,\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `captured_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `uploaded_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `installation_photos`\r\n--\r\n\r\nLOCK TABLES `installation_photos` WRITE;\r\n/*!40000 ALTER TABLE `installation_photos` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `installation_photos` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `integration_configs`\r\n--\r\n\r\nDROP TABLE IF EXISTS `integration_configs`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `integration_configs` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `integration_id` int(11) NOT NULL,\r\n  `config_key` varchar(100) NOT NULL,\r\n  `config_value` mediumtext DEFAULT NULL,\r\n  `is_encrypted` tinyint(1) DEFAULT 0,\r\n  `value_type` enum('string','number','boolean','json') DEFAULT 'string',\r\n  `environment` enum('production','staging','development') DEFAULT 'production',\r\n  `description` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `integration_configs`\r\n--\r\n\r\nLOCK TABLES `integration_configs` WRITE;\r\n/*!40000 ALTER TABLE `integration_configs` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `integration_configs` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `integration_logs`\r\n--\r\n\r\nDROP TABLE IF EXISTS `integration_logs`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `integration_logs` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `integration_id` int(11) NOT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `request_id` varchar(100) DEFAULT NULL,\r\n  `direction` enum('outgoing','incoming') NOT NULL,\r\n  `method` varchar(10) DEFAULT NULL,\r\n  `endpoint` varchar(500) DEFAULT NULL,\r\n  `request_headers` longtext DEFAULT NULL CHECK (json_valid(`request_headers`)),\r\n  `request_body` longtext DEFAULT NULL CHECK (json_valid(`request_body`)),\r\n  `response_status` int(11) DEFAULT NULL,\r\n  `response_headers` longtext DEFAULT NULL CHECK (json_valid(`response_headers`)),\r\n  `response_body` longtext DEFAULT NULL CHECK (json_valid(`response_body`)),\r\n  `duration_ms` int(11) DEFAULT NULL,\r\n  `status` enum('success','failed','timeout','error') NOT NULL,\r\n  `error_message` mediumtext DEFAULT NULL,\r\n  `retry_count` int(11) DEFAULT 0,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `integration_logs`\r\n--\r\n\r\nLOCK TABLES `integration_logs` WRITE;\r\n/*!40000 ALTER TABLE `integration_logs` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `integration_logs` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `integrations`\r\n--\r\n\r\nDROP TABLE IF EXISTS `integrations`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `integrations` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(200) NOT NULL,\r\n  `name_en` varchar(200) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `integration_type` enum('payment_gateway','sms','whatsapp','email','iot','erp','crm','scada','gis','weather','maps','other') NOT NULL,\r\n  `category` enum('local','international','internal') DEFAULT 'local',\r\n  `provider` varchar(100) DEFAULT NULL,\r\n  `base_url` varchar(500) DEFAULT NULL,\r\n  `api_version` varchar(20) DEFAULT NULL,\r\n  `auth_type` enum('api_key','oauth2','basic','hmac','jwt','none') DEFAULT 'api_key',\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `is_primary` tinyint(1) DEFAULT 0,\r\n  `priority` int(11) DEFAULT 1,\r\n  `last_health_check` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `health_status` enum('healthy','degraded','down','unknown') DEFAULT 'unknown',\r\n  `webhook_url` varchar(500) DEFAULT NULL,\r\n  `webhook_secret` varchar(255) DEFAULT NULL,\r\n  `rate_limit_per_minute` int(11) DEFAULT 60,\r\n  `timeout_seconds` int(11) DEFAULT 30,\r\n  `retry_attempts` int(11) DEFAULT 3,\r\n  `metadata` longtext DEFAULT NULL CHECK (json_valid(`metadata`)),\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `integrations`\r\n--\r\n\r\nLOCK TABLES `integrations` WRITE;\r\n/*!40000 ALTER TABLE `integrations` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `integrations` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `invoice_fees`\r\n--\r\n\r\nDROP TABLE IF EXISTS `invoice_fees`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `invoice_fees` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `invoice_id` int(11) NOT NULL,\r\n  `fee_type_id` int(11) NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `invoice_fees`\r\n--\r\n\r\nLOCK TABLES `invoice_fees` WRITE;\r\n/*!40000 ALTER TABLE `invoice_fees` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `invoice_fees` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `invoices`\r\n--\r\n\r\nDROP TABLE IF EXISTS `invoices`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `invoices` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `customer_id` int(11) NOT NULL,\r\n  `meter_id` int(11) DEFAULT NULL,\r\n  `invoice_number` varchar(50) NOT NULL,\r\n  `invoice_date` date NOT NULL,\r\n  `due_date` date NOT NULL,\r\n  `period_start` date DEFAULT NULL,\r\n  `period_end` date DEFAULT NULL,\r\n  `reading_id` int(11) DEFAULT NULL,\r\n  `consumption` decimal(15,3) DEFAULT NULL,\r\n  `consumption_amount` decimal(18,2) DEFAULT 0.00,\r\n  `fixed_charges` decimal(18,2) DEFAULT 0.00,\r\n  `tax_amount` decimal(18,2) DEFAULT 0.00,\r\n  `other_charges` decimal(18,2) DEFAULT 0.00,\r\n  `discount_amount` decimal(18,2) DEFAULT 0.00,\r\n  `previous_balance` decimal(18,2) DEFAULT 0.00,\r\n  `total_amount` decimal(18,2) DEFAULT 0.00,\r\n  `paid_amount` decimal(18,2) DEFAULT 0.00,\r\n  `balance_due` decimal(18,2) DEFAULT 0.00,\r\n  `status` enum('draft','issued','sent','partial','paid','overdue','cancelled') DEFAULT 'draft',\r\n  `journal_entry_id` int(11) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `invoices`\r\n--\r\n\r\nLOCK TABLES `invoices` WRITE;\r\n/*!40000 ALTER TABLE `invoices` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `invoices` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `invoices_enhanced`\r\n--\r\n\r\nDROP TABLE IF EXISTS `invoices_enhanced`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `invoices_enhanced` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `customer_id` int(11) NOT NULL,\r\n  `meter_id` int(11) DEFAULT NULL,\r\n  `meter_reading_id` int(11) DEFAULT NULL,\r\n  `billing_period_id` int(11) DEFAULT NULL,\r\n  `invoice_no` varchar(50) NOT NULL,\r\n  `invoice_date` date NOT NULL,\r\n  `due_date` date DEFAULT NULL,\r\n  `period_start` date DEFAULT NULL,\r\n  `period_end` date DEFAULT NULL,\r\n  `meter_number` varchar(50) DEFAULT NULL,\r\n  `previous_reading` decimal(15,3) DEFAULT NULL,\r\n  `current_reading` decimal(15,3) DEFAULT NULL,\r\n  `total_consumption_kwh` decimal(15,3) DEFAULT NULL,\r\n  `price_kwh` decimal(10,4) DEFAULT NULL,\r\n  `consumption_amount` decimal(18,2) DEFAULT 0.00,\r\n  `fixed_charges` decimal(18,2) DEFAULT 0.00,\r\n  `total_fees` decimal(18,2) DEFAULT 0.00,\r\n  `vat_rate` decimal(5,2) DEFAULT 15.00,\r\n  `vat_amount` decimal(18,2) DEFAULT 0.00,\r\n  `total_amount` decimal(18,2) DEFAULT 0.00,\r\n  `previous_balance_due` decimal(18,2) DEFAULT 0.00,\r\n  `final_amount` decimal(18,2) DEFAULT 0.00,\r\n  `paid_amount` decimal(18,2) DEFAULT 0.00,\r\n  `balance_due` decimal(18,2) DEFAULT 0.00,\r\n  `invoice_status` enum('generated','partial','approved','locked','paid','cancelled') DEFAULT 'generated',\r\n  `invoice_type` enum('partial','final') DEFAULT 'final',\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `invoices_enhanced`\r\n--\r\n\r\nLOCK TABLES `invoices_enhanced` WRITE;\r\n/*!40000 ALTER TABLE `invoices_enhanced` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `invoices_enhanced` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `item_categories`\r\n--\r\n\r\nDROP TABLE IF EXISTS `item_categories`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `item_categories` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `parent_id` int(11) DEFAULT NULL,\r\n  `inventory_account_id` int(11) DEFAULT NULL,\r\n  `cogs_account_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `item_categories`\r\n--\r\n\r\nLOCK TABLES `item_categories` WRITE;\r\n/*!40000 ALTER TABLE `item_categories` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `item_categories` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `items`\r\n--\r\n\r\nDROP TABLE IF EXISTS `items`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `items` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `category_id` int(11) DEFAULT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `type` enum('spare_part','consumable','raw_material','finished_good') DEFAULT 'spare_part',\r\n  `unit` varchar(20) NOT NULL,\r\n  `barcode` varchar(100) DEFAULT NULL,\r\n  `min_stock` decimal(15,3) DEFAULT 0.000,\r\n  `max_stock` decimal(15,3) DEFAULT NULL,\r\n  `reorder_point` decimal(15,3) DEFAULT NULL,\r\n  `reorder_qty` decimal(15,3) DEFAULT NULL,\r\n  `standard_cost` decimal(18,4) DEFAULT 0.0000,\r\n  `last_purchase_price` decimal(18,4) DEFAULT NULL,\r\n  `average_cost` decimal(18,4) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `image` mediumtext DEFAULT NULL,\r\n  `specifications` longtext DEFAULT NULL CHECK (json_valid(`specifications`)),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `items`\r\n--\r\n\r\nLOCK TABLES `items` WRITE;\r\n/*!40000 ALTER TABLE `items` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `items` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `job_titles`\r\n--\r\n\r\nDROP TABLE IF EXISTS `job_titles`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `job_titles` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `title_ar` varchar(100) NOT NULL,\r\n  `title_en` varchar(100) DEFAULT NULL,\r\n  `department_id` int(11) DEFAULT NULL,\r\n  `grade_id` int(11) DEFAULT NULL,\r\n  `level` int(11) DEFAULT 1,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `responsibilities` mediumtext DEFAULT NULL,\r\n  `requirements` mediumtext DEFAULT NULL,\r\n  `headcount` int(11) DEFAULT 1,\r\n  `current_count` int(11) DEFAULT 0,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `job_titles`\r\n--\r\n\r\nLOCK TABLES `job_titles` WRITE;\r\n/*!40000 ALTER TABLE `job_titles` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `job_titles` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `journal_entries`\r\n--\r\n\r\nDROP TABLE IF EXISTS `journal_entries`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `journal_entries` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `entry_number` varchar(50) NOT NULL,\r\n  `entry_date` date NOT NULL,\r\n  `period_id` int(11) NOT NULL,\r\n  `type` enum('manual','auto','opening','closing','adjustment','invoice','payment','receipt','transfer','depreciation') DEFAULT 'manual',\r\n  `source_module` varchar(50) DEFAULT NULL,\r\n  `source_id` int(11) DEFAULT NULL,\r\n  `description` text DEFAULT NULL,\r\n  `total_debit` decimal(18,2) DEFAULT 0.00,\r\n  `total_credit` decimal(18,2) DEFAULT 0.00,\r\n  `status` enum('draft','posted','reversed') DEFAULT 'draft',\r\n  `posted_by` int(11) DEFAULT NULL,\r\n  `posted_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `reversed_by` int(11) DEFAULT NULL,\r\n  `reversed_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `reversal_entry_id` int(11) DEFAULT NULL,\r\n  `created_by` int(11) NOT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `journal_entries`\r\n--\r\n\r\nLOCK TABLES `journal_entries` WRITE;\r\n/*!40000 ALTER TABLE `journal_entries` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `journal_entries` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `journal_entry_lines`\r\n--\r\n\r\nDROP TABLE IF EXISTS `journal_entry_lines`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `journal_entry_lines` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `entry_id` int(11) NOT NULL,\r\n  `line_number` int(11) NOT NULL,\r\n  `account_id` int(11) NOT NULL,\r\n  `cost_center_id` int(11) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `debit` decimal(18,2) DEFAULT 0.00,\r\n  `credit` decimal(18,2) DEFAULT 0.00,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `exchange_rate` decimal(10,6) DEFAULT 1.000000,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `journal_entry_lines`\r\n--\r\n\r\nLOCK TABLES `journal_entry_lines` WRITE;\r\n/*!40000 ALTER TABLE `journal_entry_lines` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `journal_entry_lines` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `leave_balances`\r\n--\r\n\r\nDROP TABLE IF EXISTS `leave_balances`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `leave_balances` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `employee_id` int(11) NOT NULL,\r\n  `leave_type_id` int(11) NOT NULL,\r\n  `year` int(11) NOT NULL,\r\n  `opening_balance` int(11) DEFAULT 0,\r\n  `earned_balance` int(11) DEFAULT 0,\r\n  `used_balance` int(11) DEFAULT 0,\r\n  `adjustment_balance` int(11) DEFAULT 0,\r\n  `remaining_balance` int(11) DEFAULT 0,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `leave_balances`\r\n--\r\n\r\nLOCK TABLES `leave_balances` WRITE;\r\n/*!40000 ALTER TABLE `leave_balances` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `leave_balances` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `leave_requests`\r\n--\r\n\r\nDROP TABLE IF EXISTS `leave_requests`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `leave_requests` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `employee_id` int(11) NOT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `leave_type_id` int(11) NOT NULL,\r\n  `start_date` date NOT NULL,\r\n  `end_date` date NOT NULL,\r\n  `total_days` int(11) NOT NULL,\r\n  `reason` mediumtext DEFAULT NULL,\r\n  `attachment_path` varchar(500) DEFAULT NULL,\r\n  `status` enum('pending','approved','rejected','cancelled') DEFAULT 'pending',\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `rejection_reason` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `leave_requests`\r\n--\r\n\r\nLOCK TABLES `leave_requests` WRITE;\r\n/*!40000 ALTER TABLE `leave_requests` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `leave_requests` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `leave_types`\r\n--\r\n\r\nDROP TABLE IF EXISTS `leave_types`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `leave_types` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(100) NOT NULL,\r\n  `name_en` varchar(100) DEFAULT NULL,\r\n  `annual_balance` int(11) DEFAULT 0,\r\n  `is_paid` tinyint(1) DEFAULT 1,\r\n  `requires_approval` tinyint(1) DEFAULT 1,\r\n  `allows_carry_over` tinyint(1) DEFAULT 0,\r\n  `max_carry_over_days` int(11) DEFAULT 0,\r\n  `color` varchar(20) DEFAULT '#3B82F6',\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `leave_types`\r\n--\r\n\r\nLOCK TABLES `leave_types` WRITE;\r\n/*!40000 ALTER TABLE `leave_types` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `leave_types` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `maintenance_plans`\r\n--\r\n\r\nDROP TABLE IF EXISTS `maintenance_plans`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `maintenance_plans` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `asset_category_id` int(11) DEFAULT NULL,\r\n  `frequency` enum('daily','weekly','monthly','quarterly','semi_annual','annual') NOT NULL,\r\n  `interval_days` int(11) DEFAULT NULL,\r\n  `based_on` enum('calendar','meter','condition') DEFAULT 'calendar',\r\n  `meter_type` varchar(50) DEFAULT NULL,\r\n  `meter_interval` decimal(15,2) DEFAULT NULL,\r\n  `estimated_hours` decimal(8,2) DEFAULT NULL,\r\n  `estimated_cost` decimal(18,2) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `tasks` longtext DEFAULT NULL CHECK (json_valid(`tasks`)),\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `maintenance_plans`\r\n--\r\n\r\nLOCK TABLES `maintenance_plans` WRITE;\r\n/*!40000 ALTER TABLE `maintenance_plans` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `maintenance_plans` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `material_request_items`\r\n--\r\n\r\nDROP TABLE IF EXISTS `material_request_items`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `material_request_items` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `request_id` int(11) NOT NULL,\r\n  `item_id` int(11) NOT NULL,\r\n  `requested_qty` decimal(12,3) NOT NULL,\r\n  `approved_qty` decimal(12,3) DEFAULT NULL,\r\n  `issued_qty` decimal(12,3) DEFAULT NULL,\r\n  `returned_qty` decimal(12,3) DEFAULT NULL,\r\n  `unit` varchar(20) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `material_request_items`\r\n--\r\n\r\nLOCK TABLES `material_request_items` WRITE;\r\n/*!40000 ALTER TABLE `material_request_items` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `material_request_items` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `material_requests`\r\n--\r\n\r\nDROP TABLE IF EXISTS `material_requests`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `material_requests` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `request_number` varchar(30) NOT NULL,\r\n  `operation_id` int(11) DEFAULT NULL,\r\n  `worker_id` int(11) DEFAULT NULL,\r\n  `team_id` int(11) DEFAULT NULL,\r\n  `warehouse_id` int(11) DEFAULT NULL,\r\n  `request_date` date NOT NULL,\r\n  `status` enum('pending','approved','issued','returned','cancelled') DEFAULT 'pending',\r\n  `notes` text DEFAULT NULL,\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `issued_by` int(11) DEFAULT NULL,\r\n  `issued_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `material_requests`\r\n--\r\n\r\nLOCK TABLES `material_requests` WRITE;\r\n/*!40000 ALTER TABLE `material_requests` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `material_requests` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `meter_readings`\r\n--\r\n\r\nDROP TABLE IF EXISTS `meter_readings`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `meter_readings` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `meter_id` int(11) NOT NULL,\r\n  `reading_date` date NOT NULL,\r\n  `reading_value` decimal(15,3) NOT NULL,\r\n  `previous_reading` decimal(15,3) DEFAULT NULL,\r\n  `consumption` decimal(15,3) DEFAULT NULL,\r\n  `reading_type` enum('actual','estimated','adjusted') DEFAULT 'actual',\r\n  `read_by` int(11) DEFAULT NULL,\r\n  `image` mediumtext DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `status` enum('pending','verified','billed','disputed') DEFAULT 'pending',\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `meter_readings`\r\n--\r\n\r\nLOCK TABLES `meter_readings` WRITE;\r\n/*!40000 ALTER TABLE `meter_readings` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `meter_readings` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `meter_readings_enhanced`\r\n--\r\n\r\nDROP TABLE IF EXISTS `meter_readings_enhanced`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `meter_readings_enhanced` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `meter_id` int(11) NOT NULL,\r\n  `billing_period_id` int(11) NOT NULL,\r\n  `current_reading` decimal(15,3) NOT NULL,\r\n  `previous_reading` decimal(15,3) DEFAULT NULL,\r\n  `consumption` decimal(15,3) DEFAULT NULL,\r\n  `reading_date` date NOT NULL,\r\n  `reading_type` enum('actual','estimated','adjusted') DEFAULT 'actual',\r\n  `reading_status` enum('entered','approved','locked','disputed') DEFAULT 'entered',\r\n  `is_estimated` tinyint(1) DEFAULT 0,\r\n  `images` longtext DEFAULT NULL CHECK (json_valid(`images`)),\r\n  `read_by` int(11) DEFAULT NULL,\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `meter_readings_enhanced`\r\n--\r\n\r\nLOCK TABLES `meter_readings_enhanced` WRITE;\r\n/*!40000 ALTER TABLE `meter_readings_enhanced` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `meter_readings_enhanced` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `meters`\r\n--\r\n\r\nDROP TABLE IF EXISTS `meters`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `meters` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `customer_id` int(11) NOT NULL,\r\n  `meter_number` varchar(50) NOT NULL,\r\n  `type` enum('single_phase','three_phase','smart','prepaid') DEFAULT 'single_phase',\r\n  `status` enum('active','inactive','faulty','replaced') DEFAULT 'active',\r\n  `installation_date` date DEFAULT NULL,\r\n  `last_reading_date` date DEFAULT NULL,\r\n  `last_reading` decimal(15,3) DEFAULT NULL,\r\n  `multiplier` decimal(10,4) DEFAULT 1.0000,\r\n  `max_load` decimal(10,2) DEFAULT NULL,\r\n  `location` varchar(255) DEFAULT NULL,\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `manufacturer` varchar(100) DEFAULT NULL,\r\n  `model` varchar(100) DEFAULT NULL,\r\n  `serial_number` varchar(100) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `meters`\r\n--\r\n\r\nLOCK TABLES `meters` WRITE;\r\n/*!40000 ALTER TABLE `meters` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `meters` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `meters_enhanced`\r\n--\r\n\r\nDROP TABLE IF EXISTS `meters_enhanced`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `meters_enhanced` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `customer_id` int(11) DEFAULT NULL,\r\n  `cabinet_id` int(11) DEFAULT NULL,\r\n  `tariff_id` int(11) DEFAULT NULL,\r\n  `project_id` int(11) DEFAULT NULL,\r\n  `meter_number` varchar(50) NOT NULL,\r\n  `serial_number` varchar(100) DEFAULT NULL,\r\n  `meter_type` enum('electricity','water','gas') DEFAULT 'electricity',\r\n  `brand` varchar(100) DEFAULT NULL,\r\n  `model` varchar(100) DEFAULT NULL,\r\n  `meter_category` enum('offline','iot','code') DEFAULT 'offline',\r\n  `current_reading` decimal(15,3) DEFAULT 0.000,\r\n  `previous_reading` decimal(15,3) DEFAULT 0.000,\r\n  `balance` decimal(18,2) DEFAULT 0.00,\r\n  `balance_due` decimal(18,2) DEFAULT 0.00,\r\n  `installation_date` date DEFAULT NULL,\r\n  `installation_status` enum('new','used','not_installed') DEFAULT 'new',\r\n  `sign_number` varchar(50) DEFAULT NULL,\r\n  `sign_color` varchar(50) DEFAULT NULL,\r\n  `meter_status` enum('active','inactive','maintenance','faulty','not_installed') DEFAULT 'active',\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `iot_device_id` varchar(100) DEFAULT NULL,\r\n  `last_sync_time` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `meters_enhanced`\r\n--\r\n\r\nLOCK TABLES `meters_enhanced` WRITE;\r\n/*!40000 ALTER TABLE `meters_enhanced` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `meters_enhanced` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `note_categories`\r\n--\r\n\r\nDROP TABLE IF EXISTS `note_categories`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `note_categories` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `name` varchar(100) NOT NULL,\r\n  `color` varchar(20) DEFAULT NULL,\r\n  `icon` varchar(50) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `note_categories`\r\n--\r\n\r\nLOCK TABLES `note_categories` WRITE;\r\n/*!40000 ALTER TABLE `note_categories` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `note_categories` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `operation_approvals`\r\n--\r\n\r\nDROP TABLE IF EXISTS `operation_approvals`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `operation_approvals` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `operation_id` int(11) NOT NULL,\r\n  `approval_level` int(11) DEFAULT 1,\r\n  `approver_id` int(11) DEFAULT NULL,\r\n  `status` enum('pending','approved','rejected') DEFAULT 'pending',\r\n  `decision_date` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `signature_url` varchar(500) DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `operation_approvals`\r\n--\r\n\r\nLOCK TABLES `operation_approvals` WRITE;\r\n/*!40000 ALTER TABLE `operation_approvals` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `operation_approvals` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `operation_payments`\r\n--\r\n\r\nDROP TABLE IF EXISTS `operation_payments`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `operation_payments` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `operation_id` int(11) NOT NULL,\r\n  `worker_id` int(11) NOT NULL,\r\n  `payment_type` enum('fixed','per_operation','commission','hourly') DEFAULT 'per_operation',\r\n  `base_amount` decimal(12,2) DEFAULT 0.00,\r\n  `bonus_amount` decimal(12,2) DEFAULT 0.00,\r\n  `deduction_amount` decimal(12,2) DEFAULT 0.00,\r\n  `net_amount` decimal(12,2) DEFAULT 0.00,\r\n  `status` enum('calculated','approved','paid') DEFAULT 'calculated',\r\n  `calculated_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `paid_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `operation_payments`\r\n--\r\n\r\nLOCK TABLES `operation_payments` WRITE;\r\n/*!40000 ALTER TABLE `operation_payments` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `operation_payments` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `operation_status_log`\r\n--\r\n\r\nDROP TABLE IF EXISTS `operation_status_log`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `operation_status_log` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `operation_id` int(11) NOT NULL,\r\n  `from_status` varchar(30) DEFAULT NULL,\r\n  `to_status` varchar(30) NOT NULL,\r\n  `changed_by` int(11) DEFAULT NULL,\r\n  `changed_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `reason` mediumtext DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `operation_status_log`\r\n--\r\n\r\nLOCK TABLES `operation_status_log` WRITE;\r\n/*!40000 ALTER TABLE `operation_status_log` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `operation_status_log` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `payment_methods_new`\r\n--\r\n\r\nDROP TABLE IF EXISTS `payment_methods_new`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `payment_methods_new` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `method_type` enum('cash','card','bank_transfer','check','online','sadad','wallet') DEFAULT 'cash',\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `payment_methods_new`\r\n--\r\n\r\nLOCK TABLES `payment_methods_new` WRITE;\r\n/*!40000 ALTER TABLE `payment_methods_new` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `payment_methods_new` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `payments`\r\n--\r\n\r\nDROP TABLE IF EXISTS `payments`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `payments` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `customer_id` int(11) NOT NULL,\r\n  `payment_number` varchar(50) NOT NULL,\r\n  `payment_date` date NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `payment_method` enum('cash','card','bank_transfer','check','online','sadad') DEFAULT 'cash',\r\n  `reference_number` varchar(100) DEFAULT NULL,\r\n  `bank_account_id` int(11) DEFAULT NULL,\r\n  `status` enum('pending','completed','failed','refunded') DEFAULT 'completed',\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `journal_entry_id` int(11) DEFAULT NULL,\r\n  `received_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `payments`\r\n--\r\n\r\nLOCK TABLES `payments` WRITE;\r\n/*!40000 ALTER TABLE `payments` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `payments` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `payments_enhanced`\r\n--\r\n\r\nDROP TABLE IF EXISTS `payments_enhanced`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `payments_enhanced` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `customer_id` int(11) NOT NULL,\r\n  `meter_id` int(11) DEFAULT NULL,\r\n  `invoice_id` int(11) DEFAULT NULL,\r\n  `cashbox_id` int(11) DEFAULT NULL,\r\n  `payment_method_id` int(11) DEFAULT NULL,\r\n  `payment_number` varchar(50) NOT NULL,\r\n  `payment_date` date NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `balance_due_before` decimal(18,2) DEFAULT NULL,\r\n  `balance_due_after` decimal(18,2) DEFAULT NULL,\r\n  `payer_name` varchar(255) DEFAULT NULL,\r\n  `reference_number` varchar(100) DEFAULT NULL,\r\n  `payment_status` enum('pending','completed','failed','refunded') DEFAULT 'completed',\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `received_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `payments_enhanced`\r\n--\r\n\r\nLOCK TABLES `payments_enhanced` WRITE;\r\n/*!40000 ALTER TABLE `payments_enhanced` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `payments_enhanced` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `payroll_items`\r\n--\r\n\r\nDROP TABLE IF EXISTS `payroll_items`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `payroll_items` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `payroll_run_id` int(11) NOT NULL,\r\n  `employee_id` int(11) NOT NULL,\r\n  `basic_salary` decimal(15,2) NOT NULL,\r\n  `working_days` int(11) DEFAULT 30,\r\n  `actual_days` int(11) DEFAULT 30,\r\n  `housing_allowance` decimal(15,2) DEFAULT 0.00,\r\n  `transport_allowance` decimal(15,2) DEFAULT 0.00,\r\n  `other_allowances` decimal(15,2) DEFAULT 0.00,\r\n  `total_allowances` decimal(15,2) DEFAULT 0.00,\r\n  `overtime_hours` decimal(10,2) DEFAULT 0.00,\r\n  `overtime_amount` decimal(15,2) DEFAULT 0.00,\r\n  `bonuses` decimal(15,2) DEFAULT 0.00,\r\n  `total_additions` decimal(15,2) DEFAULT 0.00,\r\n  `absence_days` int(11) DEFAULT 0,\r\n  `absence_deduction` decimal(15,2) DEFAULT 0.00,\r\n  `late_deduction` decimal(15,2) DEFAULT 0.00,\r\n  `social_insurance` decimal(15,2) DEFAULT 0.00,\r\n  `tax_deduction` decimal(15,2) DEFAULT 0.00,\r\n  `loan_deduction` decimal(15,2) DEFAULT 0.00,\r\n  `other_deductions` decimal(15,2) DEFAULT 0.00,\r\n  `total_deductions` decimal(15,2) DEFAULT 0.00,\r\n  `gross_salary` decimal(15,2) DEFAULT NULL,\r\n  `net_salary` decimal(15,2) DEFAULT NULL,\r\n  `status` enum('calculated','approved','paid') DEFAULT 'calculated',\r\n  `paid_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `payroll_items`\r\n--\r\n\r\nLOCK TABLES `payroll_items` WRITE;\r\n/*!40000 ALTER TABLE `payroll_items` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `payroll_items` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `payroll_runs`\r\n--\r\n\r\nDROP TABLE IF EXISTS `payroll_runs`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `payroll_runs` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `period_year` int(11) NOT NULL,\r\n  `period_month` int(11) NOT NULL,\r\n  `period_start_date` date NOT NULL,\r\n  `period_end_date` date NOT NULL,\r\n  `total_basic_salary` decimal(15,2) DEFAULT 0.00,\r\n  `total_allowances` decimal(15,2) DEFAULT 0.00,\r\n  `total_deductions` decimal(15,2) DEFAULT 0.00,\r\n  `total_net_salary` decimal(15,2) DEFAULT 0.00,\r\n  `employee_count` int(11) DEFAULT 0,\r\n  `status` enum('draft','calculated','approved','paid','cancelled') DEFAULT 'draft',\r\n  `journal_entry_id` int(11) DEFAULT NULL,\r\n  `calculated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `calculated_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `paid_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `paid_by` int(11) DEFAULT NULL,\r\n  `notes` text DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `payroll_runs`\r\n--\r\n\r\nLOCK TABLES `payroll_runs` WRITE;\r\n/*!40000 ALTER TABLE `payroll_runs` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `payroll_runs` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `performance_evaluations`\r\n--\r\n\r\nDROP TABLE IF EXISTS `performance_evaluations`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `performance_evaluations` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `employee_id` int(11) NOT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `evaluation_period` varchar(50) NOT NULL,\r\n  `period_start_date` date NOT NULL,\r\n  `period_end_date` date NOT NULL,\r\n  `overall_score` decimal(5,2) DEFAULT NULL,\r\n  `performance_rating` enum('exceptional','exceeds','meets','needs_improvement','unsatisfactory') DEFAULT NULL,\r\n  `quality_score` decimal(5,2) DEFAULT NULL,\r\n  `productivity_score` decimal(5,2) DEFAULT NULL,\r\n  `attendance_score` decimal(5,2) DEFAULT NULL,\r\n  `teamwork_score` decimal(5,2) DEFAULT NULL,\r\n  `initiative_score` decimal(5,2) DEFAULT NULL,\r\n  `strengths` text DEFAULT NULL,\r\n  `areas_for_improvement` text DEFAULT NULL,\r\n  `goals` text DEFAULT NULL,\r\n  `manager_comments` text DEFAULT NULL,\r\n  `employee_comments` text DEFAULT NULL,\r\n  `evaluated_by` int(11) NOT NULL,\r\n  `evaluated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `status` enum('draft','submitted','reviewed','acknowledged') DEFAULT 'draft',\r\n  `acknowledged_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `performance_evaluations`\r\n--\r\n\r\nLOCK TABLES `performance_evaluations` WRITE;\r\n/*!40000 ALTER TABLE `performance_evaluations` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `performance_evaluations` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `performance_metrics`\r\n--\r\n\r\nDROP TABLE IF EXISTS `performance_metrics`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `performance_metrics` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `metric_type` enum('response_time','throughput','error_rate','cpu_usage','memory_usage','disk_usage','network_io','db_connections','active_users','api_calls','queue_size','cache_hit_rate') NOT NULL,\r\n  `source` varchar(100) DEFAULT NULL,\r\n  `value` decimal(15,4) NOT NULL,\r\n  `unit` varchar(20) DEFAULT NULL,\r\n  `tags` longtext DEFAULT NULL CHECK (json_valid(`tags`)),\r\n  `recorded_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `performance_metrics`\r\n--\r\n\r\nLOCK TABLES `performance_metrics` WRITE;\r\n/*!40000 ALTER TABLE `performance_metrics` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `performance_metrics` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `period_settlements`\r\n--\r\n\r\nDROP TABLE IF EXISTS `period_settlements`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `period_settlements` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `settlement_number` varchar(30) NOT NULL,\r\n  `period_start` date NOT NULL,\r\n  `period_end` date NOT NULL,\r\n  `total_operations` int(11) DEFAULT 0,\r\n  `total_amount` decimal(15,2) DEFAULT 0.00,\r\n  `total_bonuses` decimal(15,2) DEFAULT 0.00,\r\n  `total_deductions` decimal(15,2) DEFAULT 0.00,\r\n  `net_amount` decimal(15,2) DEFAULT 0.00,\r\n  `status` enum('draft','approved','paid') DEFAULT 'draft',\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `period_settlements`\r\n--\r\n\r\nLOCK TABLES `period_settlements` WRITE;\r\n/*!40000 ALTER TABLE `period_settlements` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `period_settlements` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `permissions`\r\n--\r\n\r\nDROP TABLE IF EXISTS `permissions`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `permissions` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `module` varchar(50) NOT NULL,\r\n  `code` varchar(100) NOT NULL,\r\n  `name_ar` varchar(100) NOT NULL,\r\n  `name_en` varchar(100) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `permissions_code_unique` (`code`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `permissions`\r\n--\r\n\r\nLOCK TABLES `permissions` WRITE;\r\n/*!40000 ALTER TABLE `permissions` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `permissions` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `prepaid_codes`\r\n--\r\n\r\nDROP TABLE IF EXISTS `prepaid_codes`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `prepaid_codes` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `meter_id` int(11) DEFAULT NULL,\r\n  `code` varchar(100) NOT NULL,\r\n  `amount` decimal(18,2) NOT NULL,\r\n  `prepaid_status` enum('active','used','expired','cancelled') DEFAULT 'active',\r\n  `used_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `expires_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `generated_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `prepaid_codes_code_unique` (`code`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `prepaid_codes`\r\n--\r\n\r\nLOCK TABLES `prepaid_codes` WRITE;\r\n/*!40000 ALTER TABLE `prepaid_codes` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `prepaid_codes` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `project_phases`\r\n--\r\n\r\nDROP TABLE IF EXISTS `project_phases`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `project_phases` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `project_id` int(11) NOT NULL,\r\n  `phase_number` int(11) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `start_date` date DEFAULT NULL,\r\n  `end_date` date DEFAULT NULL,\r\n  `actual_start_date` date DEFAULT NULL,\r\n  `actual_end_date` date DEFAULT NULL,\r\n  `budget` decimal(18,2) DEFAULT NULL,\r\n  `actual_cost` decimal(18,2) DEFAULT 0.00,\r\n  `progress` decimal(5,2) DEFAULT 0.00,\r\n  `status` enum('pending','in_progress','completed','cancelled') DEFAULT 'pending',\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `project_phases`\r\n--\r\n\r\nLOCK TABLES `project_phases` WRITE;\r\n/*!40000 ALTER TABLE `project_phases` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `project_phases` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `project_tasks`\r\n--\r\n\r\nDROP TABLE IF EXISTS `project_tasks`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `project_tasks` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `project_id` int(11) NOT NULL,\r\n  `phase_id` int(11) DEFAULT NULL,\r\n  `parent_task_id` int(11) DEFAULT NULL,\r\n  `task_number` varchar(50) DEFAULT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `type` enum('task','milestone') DEFAULT 'task',\r\n  `status` enum('pending','in_progress','completed','cancelled') DEFAULT 'pending',\r\n  `priority` enum('low','medium','high') DEFAULT 'medium',\r\n  `assigned_to` int(11) DEFAULT NULL,\r\n  `start_date` date DEFAULT NULL,\r\n  `end_date` date DEFAULT NULL,\r\n  `actual_start_date` date DEFAULT NULL,\r\n  `actual_end_date` date DEFAULT NULL,\r\n  `estimated_hours` decimal(8,2) DEFAULT NULL,\r\n  `actual_hours` decimal(8,2) DEFAULT NULL,\r\n  `progress` decimal(5,2) DEFAULT 0.00,\r\n  `dependencies` longtext DEFAULT NULL CHECK (json_valid(`dependencies`)),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `project_tasks`\r\n--\r\n\r\nLOCK TABLES `project_tasks` WRITE;\r\n/*!40000 ALTER TABLE `project_tasks` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `project_tasks` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `projects`\r\n--\r\n\r\nDROP TABLE IF EXISTS `projects`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `projects` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` text DEFAULT NULL,\r\n  `type` enum('construction','expansion','maintenance','upgrade','installation','decommission','study') NOT NULL,\r\n  `status` enum('planning','approved','in_progress','on_hold','completed','cancelled','closed') DEFAULT 'planning',\r\n  `priority` enum('low','medium','high','critical') DEFAULT 'medium',\r\n  `manager_id` int(11) DEFAULT NULL,\r\n  `start_date` date DEFAULT NULL,\r\n  `planned_end_date` date DEFAULT NULL,\r\n  `actual_end_date` date DEFAULT NULL,\r\n  `budget` decimal(18,2) DEFAULT NULL,\r\n  `actual_cost` decimal(18,2) DEFAULT 0.00,\r\n  `progress` decimal(5,2) DEFAULT 0.00,\r\n  `cost_center_id` int(11) DEFAULT NULL,\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `closed_by` int(11) DEFAULT NULL,\r\n  `closed_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `notes` text DEFAULT NULL,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `projects`\r\n--\r\n\r\nLOCK TABLES `projects` WRITE;\r\n/*!40000 ALTER TABLE `projects` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `projects` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `purchase_orders`\r\n--\r\n\r\nDROP TABLE IF EXISTS `purchase_orders`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `purchase_orders` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `order_number` varchar(50) NOT NULL,\r\n  `order_date` date NOT NULL,\r\n  `supplier_id` int(11) NOT NULL,\r\n  `status` enum('draft','pending','approved','sent','partial_received','received','cancelled','closed') DEFAULT 'draft',\r\n  `delivery_date` date DEFAULT NULL,\r\n  `warehouse_id` int(11) DEFAULT NULL,\r\n  `payment_terms` int(11) DEFAULT NULL,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `exchange_rate` decimal(10,6) DEFAULT 1.000000,\r\n  `subtotal` decimal(18,2) DEFAULT 0.00,\r\n  `tax_amount` decimal(18,2) DEFAULT 0.00,\r\n  `discount_amount` decimal(18,2) DEFAULT 0.00,\r\n  `total_amount` decimal(18,2) DEFAULT 0.00,\r\n  `paid_amount` decimal(18,2) DEFAULT 0.00,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `terms` mediumtext DEFAULT NULL,\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_by` int(11) NOT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `purchase_orders`\r\n--\r\n\r\nLOCK TABLES `purchase_orders` WRITE;\r\n/*!40000 ALTER TABLE `purchase_orders` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `purchase_orders` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `purchase_requests`\r\n--\r\n\r\nDROP TABLE IF EXISTS `purchase_requests`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `purchase_requests` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `request_number` varchar(50) NOT NULL,\r\n  `request_date` date NOT NULL,\r\n  `required_date` date DEFAULT NULL,\r\n  `status` enum('draft','pending','approved','rejected','converted','cancelled') DEFAULT 'draft',\r\n  `priority` enum('low','medium','high','urgent') DEFAULT 'medium',\r\n  `requested_by` int(11) NOT NULL,\r\n  `department_id` int(11) DEFAULT NULL,\r\n  `purpose` mediumtext DEFAULT NULL,\r\n  `total_amount` decimal(18,2) DEFAULT 0.00,\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `purchase_requests`\r\n--\r\n\r\nLOCK TABLES `purchase_requests` WRITE;\r\n/*!40000 ALTER TABLE `purchase_requests` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `purchase_requests` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `receipts`\r\n--\r\n\r\nDROP TABLE IF EXISTS `receipts`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `receipts` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `payment_id` int(11) NOT NULL,\r\n  `receipt_number` varchar(50) NOT NULL,\r\n  `issue_date` date NOT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `printed_by` int(11) DEFAULT NULL,\r\n  `printed_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `receipts`\r\n--\r\n\r\nLOCK TABLES `receipts` WRITE;\r\n/*!40000 ALTER TABLE `receipts` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `receipts` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `role_permissions`\r\n--\r\n\r\nDROP TABLE IF EXISTS `role_permissions`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `role_permissions` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `role_id` int(11) NOT NULL,\r\n  `permission_id` int(11) NOT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `role_permissions`\r\n--\r\n\r\nLOCK TABLES `role_permissions` WRITE;\r\n/*!40000 ALTER TABLE `role_permissions` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `role_permissions` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `roles`\r\n--\r\n\r\nDROP TABLE IF EXISTS `roles`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `roles` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) DEFAULT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(100) NOT NULL,\r\n  `name_en` varchar(100) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `level` int(11) DEFAULT 1,\r\n  `is_system` tinyint(1) DEFAULT 0,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `roles`\r\n--\r\n\r\nLOCK TABLES `roles` WRITE;\r\n/*!40000 ALTER TABLE `roles` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `roles` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `salary_details`\r\n--\r\n\r\nDROP TABLE IF EXISTS `salary_details`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `salary_details` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `employee_id` int(11) NOT NULL,\r\n  `basic_salary` decimal(15,2) NOT NULL,\r\n  `currency` varchar(10) DEFAULT 'SAR',\r\n  `housing_allowance` decimal(15,2) DEFAULT 0.00,\r\n  `transport_allowance` decimal(15,2) DEFAULT 0.00,\r\n  `food_allowance` decimal(15,2) DEFAULT 0.00,\r\n  `phone_allowance` decimal(15,2) DEFAULT 0.00,\r\n  `other_allowances` decimal(15,2) DEFAULT 0.00,\r\n  `total_salary` decimal(15,2) DEFAULT NULL,\r\n  `payment_method` enum('bank_transfer','cash','check') DEFAULT 'bank_transfer',\r\n  `bank_name` varchar(100) DEFAULT NULL,\r\n  `bank_account_number` varchar(50) DEFAULT NULL,\r\n  `iban` varchar(50) DEFAULT NULL,\r\n  `effective_date` date NOT NULL,\r\n  `end_date` date DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `salary_details`\r\n--\r\n\r\nLOCK TABLES `salary_details` WRITE;\r\n/*!40000 ALTER TABLE `salary_details` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `salary_details` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `salary_grades`\r\n--\r\n\r\nDROP TABLE IF EXISTS `salary_grades`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `salary_grades` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name` varchar(100) NOT NULL,\r\n  `min_salary` decimal(15,2) DEFAULT NULL,\r\n  `max_salary` decimal(15,2) DEFAULT NULL,\r\n  `housing_allowance_pct` decimal(5,2) DEFAULT 0.00,\r\n  `transport_allowance` decimal(15,2) DEFAULT 0.00,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `salary_grades`\r\n--\r\n\r\nLOCK TABLES `salary_grades` WRITE;\r\n/*!40000 ALTER TABLE `salary_grades` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `salary_grades` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `sensors`\r\n--\r\n\r\nDROP TABLE IF EXISTS `sensors`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `sensors` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `equipment_id` int(11) NOT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(100) NOT NULL,\r\n  `name_en` varchar(100) DEFAULT NULL,\r\n  `type` enum('voltage','current','power','frequency','temperature','humidity','pressure','flow','level','speed','vibration') NOT NULL,\r\n  `unit` varchar(20) NOT NULL,\r\n  `min_value` decimal(15,4) DEFAULT NULL,\r\n  `max_value` decimal(15,4) DEFAULT NULL,\r\n  `warning_low` decimal(15,4) DEFAULT NULL,\r\n  `warning_high` decimal(15,4) DEFAULT NULL,\r\n  `critical_low` decimal(15,4) DEFAULT NULL,\r\n  `critical_high` decimal(15,4) DEFAULT NULL,\r\n  `current_value` decimal(15,4) DEFAULT NULL,\r\n  `last_reading_time` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `status` enum('active','inactive','faulty') DEFAULT 'active',\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `sensors`\r\n--\r\n\r\nLOCK TABLES `sensors` WRITE;\r\n/*!40000 ALTER TABLE `sensors` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `sensors` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `sequences`\r\n--\r\n\r\nDROP TABLE IF EXISTS `sequences`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `sequences` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `prefix` varchar(20) DEFAULT NULL,\r\n  `suffix` varchar(20) DEFAULT NULL,\r\n  `current_value` int(11) DEFAULT 0,\r\n  `min_digits` int(11) DEFAULT 6,\r\n  `reset_period` enum('never','yearly','monthly') DEFAULT 'never',\r\n  `last_reset_date` date DEFAULT NULL,\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `sequences`\r\n--\r\n\r\nLOCK TABLES `sequences` WRITE;\r\n/*!40000 ALTER TABLE `sequences` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `sequences` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `settings`\r\n--\r\n\r\nDROP TABLE IF EXISTS `settings`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `settings` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) DEFAULT NULL,\r\n  `category` varchar(50) NOT NULL,\r\n  `key` varchar(100) NOT NULL,\r\n  `value` mediumtext DEFAULT NULL,\r\n  `value_type` enum('string','number','boolean','json') DEFAULT 'string',\r\n  `description` mediumtext DEFAULT NULL,\r\n  `is_system` tinyint(1) DEFAULT 0,\r\n  `updated_by` int(11) DEFAULT NULL,\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `settings`\r\n--\r\n\r\nLOCK TABLES `settings` WRITE;\r\n/*!40000 ALTER TABLE `settings` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `settings` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `settlement_items`\r\n--\r\n\r\nDROP TABLE IF EXISTS `settlement_items`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `settlement_items` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `settlement_id` int(11) NOT NULL,\r\n  `worker_id` int(11) NOT NULL,\r\n  `operations_count` int(11) DEFAULT 0,\r\n  `base_amount` decimal(12,2) DEFAULT 0.00,\r\n  `bonuses` decimal(12,2) DEFAULT 0.00,\r\n  `deductions` decimal(12,2) DEFAULT 0.00,\r\n  `net_amount` decimal(12,2) DEFAULT 0.00,\r\n  `payment_method` enum('cash','bank_transfer','check') DEFAULT NULL,\r\n  `payment_reference` varchar(100) DEFAULT NULL,\r\n  `paid_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `settlement_items`\r\n--\r\n\r\nLOCK TABLES `settlement_items` WRITE;\r\n/*!40000 ALTER TABLE `settlement_items` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `settlement_items` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `squares`\r\n--\r\n\r\nDROP TABLE IF EXISTS `squares`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `squares` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `area_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `squares`\r\n--\r\n\r\nLOCK TABLES `squares` WRITE;\r\n/*!40000 ALTER TABLE `squares` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `squares` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `station_diesel_config`\r\n--\r\n\r\nDROP TABLE IF EXISTS `station_diesel_config`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `station_diesel_config` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `station_id` int(11) NOT NULL,\r\n  `has_intake_pump` tinyint(1) DEFAULT 0,\r\n  `has_output_pump` tinyint(1) DEFAULT 0,\r\n  `intake_pump_has_meter` tinyint(1) DEFAULT 0,\r\n  `output_pump_has_meter` tinyint(1) DEFAULT 0,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `configured_by` int(11) DEFAULT NULL,\r\n  `configured_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `station_diesel_config_station_id_unique` (`station_id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `station_diesel_config`\r\n--\r\n\r\nLOCK TABLES `station_diesel_config` WRITE;\r\n/*!40000 ALTER TABLE `station_diesel_config` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `station_diesel_config` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `station_diesel_path`\r\n--\r\n\r\nDROP TABLE IF EXISTS `station_diesel_path`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `station_diesel_path` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `config_id` int(11) NOT NULL,\r\n  `sequence_order` int(11) NOT NULL,\r\n  `element_type` enum('receiving_tank','pipe','intake_pump','main_tank','pre_output_tank','output_pump','generator_tank') NOT NULL,\r\n  `tank_id` int(11) DEFAULT NULL,\r\n  `pump_id` int(11) DEFAULT NULL,\r\n  `pipe_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `station_diesel_path`\r\n--\r\n\r\nLOCK TABLES `station_diesel_path` WRITE;\r\n/*!40000 ALTER TABLE `station_diesel_path` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `station_diesel_path` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `stations`\r\n--\r\n\r\nDROP TABLE IF EXISTS `stations`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `stations` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `type` enum('generation','transmission','distribution','substation','solar','wind','hydro','thermal','nuclear','storage') NOT NULL,\r\n  `status` enum('operational','maintenance','offline','construction','decommissioned') DEFAULT 'operational',\r\n  `capacity` decimal(15,2) DEFAULT NULL,\r\n  `capacity_unit` varchar(20) DEFAULT 'MW',\r\n  `voltage_level` varchar(50) DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `latitude` decimal(10,8) DEFAULT NULL,\r\n  `longitude` decimal(11,8) DEFAULT NULL,\r\n  `commission_date` date DEFAULT NULL,\r\n  `manager_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `metadata` longtext DEFAULT NULL CHECK (json_valid(`metadata`)),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `stations`\r\n--\r\n\r\nLOCK TABLES `stations` WRITE;\r\n/*!40000 ALTER TABLE `stations` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `stations` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `stock_balances`\r\n--\r\n\r\nDROP TABLE IF EXISTS `stock_balances`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `stock_balances` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `item_id` int(11) NOT NULL,\r\n  `warehouse_id` int(11) NOT NULL,\r\n  `quantity` decimal(15,3) DEFAULT 0.000,\r\n  `reserved_qty` decimal(15,3) DEFAULT 0.000,\r\n  `available_qty` decimal(15,3) DEFAULT 0.000,\r\n  `average_cost` decimal(18,4) DEFAULT 0.0000,\r\n  `total_value` decimal(18,2) DEFAULT 0.00,\r\n  `last_movement_date` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `stock_balances`\r\n--\r\n\r\nLOCK TABLES `stock_balances` WRITE;\r\n/*!40000 ALTER TABLE `stock_balances` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `stock_balances` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `stock_movements`\r\n--\r\n\r\nDROP TABLE IF EXISTS `stock_movements`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `stock_movements` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `item_id` int(11) NOT NULL,\r\n  `warehouse_id` int(11) NOT NULL,\r\n  `movement_type` enum('receipt','issue','transfer_in','transfer_out','adjustment_in','adjustment_out','return','scrap') NOT NULL,\r\n  `movement_date` datetime NOT NULL,\r\n  `document_type` varchar(50) DEFAULT NULL,\r\n  `document_id` int(11) DEFAULT NULL,\r\n  `document_number` varchar(50) DEFAULT NULL,\r\n  `quantity` decimal(15,3) NOT NULL,\r\n  `unit_cost` decimal(18,4) DEFAULT NULL,\r\n  `total_cost` decimal(18,2) DEFAULT NULL,\r\n  `balance_before` decimal(15,3) DEFAULT NULL,\r\n  `balance_after` decimal(15,3) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_by` int(11) NOT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `stock_movements`\r\n--\r\n\r\nLOCK TABLES `stock_movements` WRITE;\r\n/*!40000 ALTER TABLE `stock_movements` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `stock_movements` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `suppliers`\r\n--\r\n\r\nDROP TABLE IF EXISTS `suppliers`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `suppliers` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `type` enum('manufacturer','distributor','contractor','service_provider') DEFAULT NULL,\r\n  `contact_person` varchar(100) DEFAULT NULL,\r\n  `phone` varchar(50) DEFAULT NULL,\r\n  `email` varchar(255) DEFAULT NULL,\r\n  `address` mediumtext DEFAULT NULL,\r\n  `city` varchar(100) DEFAULT NULL,\r\n  `country` varchar(100) DEFAULT NULL,\r\n  `tax_number` varchar(50) DEFAULT NULL,\r\n  `payment_terms` int(11) DEFAULT 30,\r\n  `credit_limit` decimal(18,2) DEFAULT NULL,\r\n  `current_balance` decimal(18,2) DEFAULT 0.00,\r\n  `account_id` int(11) DEFAULT NULL,\r\n  `rating` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `suppliers`\r\n--\r\n\r\nLOCK TABLES `suppliers` WRITE;\r\n/*!40000 ALTER TABLE `suppliers` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `suppliers` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `system_events`\r\n--\r\n\r\nDROP TABLE IF EXISTS `system_events`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `system_events` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `event_type` varchar(100) NOT NULL,\r\n  `event_source` varchar(50) NOT NULL,\r\n  `aggregate_type` varchar(50) DEFAULT NULL,\r\n  `aggregate_id` int(11) DEFAULT NULL,\r\n  `payload` longtext NOT NULL CHECK (json_valid(`payload`)),\r\n  `metadata` longtext DEFAULT NULL CHECK (json_valid(`metadata`)),\r\n  `correlation_id` varchar(100) DEFAULT NULL,\r\n  `causation_id` varchar(100) DEFAULT NULL,\r\n  `status` enum('pending','processing','completed','failed') DEFAULT 'pending',\r\n  `processed_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `error_message` mediumtext DEFAULT NULL,\r\n  `retry_count` int(11) DEFAULT 0,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `system_events`\r\n--\r\n\r\nLOCK TABLES `system_events` WRITE;\r\n/*!40000 ALTER TABLE `system_events` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `system_events` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `tariffs`\r\n--\r\n\r\nDROP TABLE IF EXISTS `tariffs`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `tariffs` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `tariff_type` enum('standard','custom','promotional','contract') DEFAULT 'standard',\r\n  `service_type` enum('electricity','water','gas') DEFAULT 'electricity',\r\n  `slabs` longtext DEFAULT NULL CHECK (json_valid(`slabs`)),\r\n  `fixed_charge` decimal(18,2) DEFAULT 0.00,\r\n  `vat_rate` decimal(5,2) DEFAULT 15.00,\r\n  `effective_from` date DEFAULT NULL,\r\n  `effective_to` date DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `tariffs`\r\n--\r\n\r\nLOCK TABLES `tariffs` WRITE;\r\n/*!40000 ALTER TABLE `tariffs` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `tariffs` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `technical_alert_rules`\r\n--\r\n\r\nDROP TABLE IF EXISTS `technical_alert_rules`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `technical_alert_rules` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `code` varchar(50) NOT NULL,\r\n  `name_ar` varchar(200) NOT NULL,\r\n  `name_en` varchar(200) DEFAULT NULL,\r\n  `description` mediumtext DEFAULT NULL,\r\n  `category` enum('performance','security','availability','integration','database','api','system') NOT NULL,\r\n  `severity` enum('info','warning','error','critical') DEFAULT 'warning',\r\n  `condition` longtext NOT NULL CHECK (json_valid(`condition`)),\r\n  `threshold` decimal(15,4) DEFAULT NULL,\r\n  `comparison_operator` enum('gt','gte','lt','lte','eq','neq') DEFAULT NULL,\r\n  `evaluation_period_minutes` int(11) DEFAULT 5,\r\n  `cooldown_minutes` int(11) DEFAULT 15,\r\n  `notification_channels` longtext DEFAULT NULL CHECK (json_valid(`notification_channels`)),\r\n  `escalation_rules` longtext DEFAULT NULL CHECK (json_valid(`escalation_rules`)),\r\n  `auto_resolve` tinyint(1) DEFAULT 1,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_by` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `technical_alert_rules`\r\n--\r\n\r\nLOCK TABLES `technical_alert_rules` WRITE;\r\n/*!40000 ALTER TABLE `technical_alert_rules` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `technical_alert_rules` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `technical_alerts`\r\n--\r\n\r\nDROP TABLE IF EXISTS `technical_alerts`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `technical_alerts` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `rule_id` int(11) NOT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `alert_type` varchar(50) NOT NULL,\r\n  `severity` enum('info','warning','error','critical') NOT NULL,\r\n  `title` varchar(255) NOT NULL,\r\n  `message` text NOT NULL,\r\n  `source` varchar(100) DEFAULT NULL,\r\n  `source_id` varchar(100) DEFAULT NULL,\r\n  `current_value` decimal(15,4) DEFAULT NULL,\r\n  `threshold_value` decimal(15,4) DEFAULT NULL,\r\n  `metadata` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`metadata`)),\r\n  `status` enum('active','acknowledged','resolved','suppressed') DEFAULT 'active',\r\n  `acknowledged_by` int(11) DEFAULT NULL,\r\n  `acknowledged_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `resolved_by` int(11) DEFAULT NULL,\r\n  `resolved_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `resolution_notes` text DEFAULT NULL,\r\n  `notifications_sent` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`notifications_sent`)),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `technical_alerts`\r\n--\r\n\r\nLOCK TABLES `technical_alerts` WRITE;\r\n/*!40000 ALTER TABLE `technical_alerts` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `technical_alerts` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `user_roles`\r\n--\r\n\r\nDROP TABLE IF EXISTS `user_roles`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `user_roles` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `user_id` int(11) NOT NULL,\r\n  `role_id` int(11) NOT NULL,\r\n  `business_id` int(11) DEFAULT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `user_roles`\r\n--\r\n\r\nLOCK TABLES `user_roles` WRITE;\r\n/*!40000 ALTER TABLE `user_roles` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `user_roles` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `users`\r\n--\r\n\r\nDROP TABLE IF EXISTS `users`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `users` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `openId` varchar(64) NOT NULL,\r\n  `name` mediumtext DEFAULT NULL,\r\n  `email` varchar(320) DEFAULT NULL,\r\n  `loginMethod` varchar(64) DEFAULT NULL,\r\n  `role` enum('user','admin','super_admin') NOT NULL DEFAULT 'user',\r\n  `createdAt` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updatedAt` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `lastSignedIn` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `employee_id` varchar(20) DEFAULT NULL,\r\n  `name_ar` varchar(255) DEFAULT NULL,\r\n  `phone` varchar(50) DEFAULT NULL,\r\n  `avatar` mediumtext DEFAULT NULL,\r\n  `business_id` int(11) DEFAULT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `department_id` int(11) DEFAULT NULL,\r\n  `job_title` varchar(100) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `password` varchar(255) DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `users_openId_unique` (`openId`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=2177 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `users`\r\n--\r\n\r\nLOCK TABLES `users` WRITE;\r\n/*!40000 ALTER TABLE `users` DISABLE KEYS */;\r\nINSERT INTO `users` VALUES (1,'local_0500000000_1766953967433','مدير النظام',NULL,'local','super_admin','2025-12-28 20:32:47','2026-01-01 02:01:27','2025-12-31 23:01:27',NULL,NULL,'0500000000',NULL,1,NULL,NULL,NULL,NULL,1,'$2b$10$TPGClz03LlHMJMJ40p1rtewYd55NdOsmPCDBWMtZyZVRiN1ZvoG4q'),(2,'demo_user_001','مستخدم تجريبي',NULL,'demo','super_admin','2025-12-28 20:38:41','2025-12-31 19:08:11','2025-12-31 16:08:11',NULL,NULL,NULL,NULL,1,NULL,NULL,NULL,NULL,1,'$2b$10$TPGClz03LlHMJMJ40p1rtewYd55NdOsmPCDBWMtZyZVRiN1ZvoG4q');\r\n/*!40000 ALTER TABLE `users` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `warehouses`\r\n--\r\n\r\nDROP TABLE IF EXISTS `warehouses`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `warehouses` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `code` varchar(20) NOT NULL,\r\n  `name_ar` varchar(255) NOT NULL,\r\n  `name_en` varchar(255) DEFAULT NULL,\r\n  `type` enum('main','spare_parts','consumables','transit','quarantine') DEFAULT 'main',\r\n  `address` mediumtext DEFAULT NULL,\r\n  `manager_id` int(11) DEFAULT NULL,\r\n  `is_active` tinyint(1) DEFAULT 1,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `warehouses`\r\n--\r\n\r\nLOCK TABLES `warehouses` WRITE;\r\n/*!40000 ALTER TABLE `warehouses` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `warehouses` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `work_order_tasks`\r\n--\r\n\r\nDROP TABLE IF EXISTS `work_order_tasks`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `work_order_tasks` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `work_order_id` int(11) NOT NULL,\r\n  `task_number` int(11) NOT NULL,\r\n  `description` mediumtext NOT NULL,\r\n  `status` enum('pending','in_progress','completed','skipped') DEFAULT 'pending',\r\n  `assigned_to` int(11) DEFAULT NULL,\r\n  `estimated_hours` decimal(8,2) DEFAULT NULL,\r\n  `actual_hours` decimal(8,2) DEFAULT NULL,\r\n  `completed_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `work_order_tasks`\r\n--\r\n\r\nLOCK TABLES `work_order_tasks` WRITE;\r\n/*!40000 ALTER TABLE `work_order_tasks` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `work_order_tasks` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `work_orders`\r\n--\r\n\r\nDROP TABLE IF EXISTS `work_orders`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `work_orders` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `business_id` int(11) NOT NULL,\r\n  `branch_id` int(11) DEFAULT NULL,\r\n  `station_id` int(11) DEFAULT NULL,\r\n  `order_number` varchar(50) NOT NULL,\r\n  `type` enum('preventive','corrective','emergency','inspection','calibration') NOT NULL,\r\n  `priority` enum('low','medium','high','critical') DEFAULT 'medium',\r\n  `status` enum('draft','pending','approved','assigned','in_progress','on_hold','completed','cancelled','closed') DEFAULT 'draft',\r\n  `asset_id` int(11) DEFAULT NULL,\r\n  `equipment_id` int(11) DEFAULT NULL,\r\n  `title` varchar(255) NOT NULL,\r\n  `description` text DEFAULT NULL,\r\n  `requested_by` int(11) DEFAULT NULL,\r\n  `requested_date` datetime DEFAULT NULL,\r\n  `scheduled_start` datetime DEFAULT NULL,\r\n  `scheduled_end` datetime DEFAULT NULL,\r\n  `actual_start` datetime DEFAULT NULL,\r\n  `actual_end` datetime DEFAULT NULL,\r\n  `assigned_to` int(11) DEFAULT NULL,\r\n  `team_id` int(11) DEFAULT NULL,\r\n  `estimated_hours` decimal(8,2) DEFAULT NULL,\r\n  `actual_hours` decimal(8,2) DEFAULT NULL,\r\n  `estimated_cost` decimal(18,2) DEFAULT NULL,\r\n  `actual_cost` decimal(18,2) DEFAULT NULL,\r\n  `labor_cost` decimal(18,2) DEFAULT NULL,\r\n  `parts_cost` decimal(18,2) DEFAULT NULL,\r\n  `completion_notes` text DEFAULT NULL,\r\n  `failure_code` varchar(50) DEFAULT NULL,\r\n  `root_cause` text DEFAULT NULL,\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `closed_by` int(11) DEFAULT NULL,\r\n  `closed_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `created_by` int(11) NOT NULL,\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `work_orders`\r\n--\r\n\r\nLOCK TABLES `work_orders` WRITE;\r\n/*!40000 ALTER TABLE `work_orders` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `work_orders` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `worker_incentives`\r\n--\r\n\r\nDROP TABLE IF EXISTS `worker_incentives`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `worker_incentives` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `worker_id` int(11) NOT NULL,\r\n  `business_id` int(11) NOT NULL,\r\n  `incentive_type` enum('bonus','commission','penalty','allowance') NOT NULL,\r\n  `amount` decimal(12,2) NOT NULL,\r\n  `reason` text DEFAULT NULL,\r\n  `reference_type` varchar(50) DEFAULT NULL,\r\n  `reference_id` int(11) DEFAULT NULL,\r\n  `status` enum('pending','approved','paid','cancelled') DEFAULT 'pending',\r\n  `approved_by` int(11) DEFAULT NULL,\r\n  `approved_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `paid_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `worker_incentives`\r\n--\r\n\r\nLOCK TABLES `worker_incentives` WRITE;\r\n/*!40000 ALTER TABLE `worker_incentives` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `worker_incentives` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `worker_locations`\r\n--\r\n\r\nDROP TABLE IF EXISTS `worker_locations`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `worker_locations` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `worker_id` int(11) NOT NULL,\r\n  `latitude` decimal(10,8) NOT NULL,\r\n  `longitude` decimal(11,8) NOT NULL,\r\n  `accuracy` decimal(10,2) DEFAULT NULL,\r\n  `speed` decimal(10,2) DEFAULT NULL,\r\n  `heading` decimal(5,2) DEFAULT NULL,\r\n  `altitude` decimal(10,2) DEFAULT NULL,\r\n  `battery_level` int(11) DEFAULT NULL,\r\n  `is_moving` tinyint(1) DEFAULT 0,\r\n  `operation_id` int(11) DEFAULT NULL,\r\n  `recorded_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `worker_locations`\r\n--\r\n\r\nLOCK TABLES `worker_locations` WRITE;\r\n/*!40000 ALTER TABLE `worker_locations` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `worker_locations` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n\r\n--\r\n-- Table structure for table `worker_performance`\r\n--\r\n\r\nDROP TABLE IF EXISTS `worker_performance`;\r\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\r\n/*!50503 SET character_set_client = utf8mb4 */;\r\nCREATE TABLE `worker_performance` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `worker_id` int(11) NOT NULL,\r\n  `period_start` date NOT NULL,\r\n  `period_end` date NOT NULL,\r\n  `total_operations` int(11) DEFAULT 0,\r\n  `completed_operations` int(11) DEFAULT 0,\r\n  `on_time_operations` int(11) DEFAULT 0,\r\n  `avg_completion_time` decimal(10,2) DEFAULT NULL,\r\n  `customer_rating` decimal(3,2) DEFAULT NULL,\r\n  `quality_score` decimal(5,2) DEFAULT NULL,\r\n  `attendance_rate` decimal(5,2) DEFAULT NULL,\r\n  `notes` mediumtext DEFAULT NULL,\r\n  `evaluated_by` int(11) DEFAULT NULL,\r\n  `evaluated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),\r\n  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\r\n/*!40101 SET character_set_client = @saved_cs_client */;\r\n\r\n--\r\n-- Dumping data for table `worker_performance`\r\n--\r\n\r\nLOCK TABLES `worker_performance` WRITE;\r\n/*!40000 ALTER TABLE `worker_performance` DISABLE KEYS */;\r\n/*!40000 ALTER TABLE `worker_performance` ENABLE KEYS */;\r\nUNLOCK TABLES;\r\n/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;\r\n\r\n/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;\r\n/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;\r\n/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;\r\n/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\r\n/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\r\n/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\r\n/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;\r\n\r\n-- Dump completed on 2026-01-01  5:02:29\r\n"}