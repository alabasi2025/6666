# ๐ ุงูุชูุซูู ุงูุดุงูู ููุชูุงููุงุช ุงูุฎุงุฑุฌูุฉ - Complete External Integrations Documentation

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2026-01-06  
**ุขุฎุฑ ุชุญุฏูุซ:** 2026-01-06

---

## ๐ฏ ุงููุงุนุฏุฉ ุงูุฃุณุงุณูุฉ - Fundamental Rule

### โ๏ธ ูุงุนุฏุฉ ูููุฉ ุฌุฏุงู:
**ุฌููุน ุงูุชูุงููุงุช ุงูุฎุงุฑุฌูุฉ (Third-party Integrations) ูุฌุจ ุฃู ุชููู ูู ูุธุงู ุงููุทูุฑ (Developer System)**

- โ ุงูุชูุงููุงุช ุงูุฎุงุฑุฌูุฉ ูุง ูููู ุฃู ุชููู routers ูููุตูุฉ ูู ุงููุณุชูู ุงูุฑุฆูุณู
- โ ุฌููุน ุงูุชูุงููุงุช ูุฌุจ ุฃู ุชููู ุถูู `developer.integrations.*`
- โ ุงููุตูู ููุชูุงููุงุช ูููู ุนุจุฑ: `trpc.developer.integrations.*`

---

## ๐ ุงููููู ุงูุตุญูุญ ููุชูุงููุงุช

```
server/
โโโ developer/
โ   โโโ integrations/
โ       โโโ acrel-api-client.ts      โ ACREL API Client
โ       โโโ acrel-service.ts         โ ACREL Service
โ       โโโ sts-api-client.ts        โ STS API Client
โ       โโโ sts-service.ts           โ STS Service
โ
โโโ routers.ts
โ   โโโ developer.integrations.*     โ ุฌููุน ุงูุชูุงููุงุช ููุง
โ
โโโ โ ูุง ูุฌุจ ูุฌูุฏ:
    โโโ integrations/               โ ูุง ูุฌุจ ูุฌูุฏ ูุฌูุฏ ูููุตู
    โโโ paymentGatewaysRouter.ts     โ ูุฑุชุจุท ูู developer.integrations (ูููู ุชุฑูู)
    โโโ messagingRouter.ts           โ ูุฑุชุจุท ูู developer.integrations (ูููู ุชุฑูู)
    โโโ stsRouter.ts                 โ ูุฑุชุจุท ูู developer.integrations (ูููู ุชุฑูู)
```

**ุงููุตูู:**
- `trpc.developer.integrations.paymentGateways.*`
- `trpc.developer.integrations.messaging.*`
- `trpc.developer.integrations.sts.*`
- `trpc.developer.integrations.acrel.*` (ูุฌุจ ุฅุถุงูุฉ router)

---

## ๐ 1. ุชูุงูู ACREL IoT-EMS

### ๐ ูุนูููุงุช ุนุงูุฉ

**ููุน ุงูุชูุงูู:** REST API (ููุณ MQTT)  
**ุงููููุน:** `server/developer/integrations/acrel-api-client.ts`  
**ุงูุฎุฏูุฉ:** `server/developer/integrations/acrel-service.ts`

**ููุงุญุธุฉ ูููุฉ:**
- ุงูุชูุงูู ูุน ููุตุฉ ACREL ูุชู ุนุจุฑ REST API
- ุงูุดุฑูุฉ ุงุดุชุฑุช ุงูููุตุฉ ููุญุชุงุฌูู ููุท ุงูุชูุงูู ูุนูุง
- ููุณ MQTTุ ุจู REST API

---

### ๐ ุฃููุงุน ุงูุนุฏุงุฏุงุช ุงููุฏุนููุฉ

#### 1. โ ADL200 - ุนุฏุงุฏุงุช ุงููุดุชุฑููู

**ุงูููุงุตูุงุช:**
- **ููุน ุงูุทูุฑ:** Single Phase (ุณูุฌู ูุงุฒ)
- **ุงูุงุณุชุฎุฏุงู:** ุนุฏุงุฏุงุช ูููุดุชุฑููู ุงูุนุงุฏููู
- **ุงูุงุชุตุงู:** WiFi ุฃู RS485 ุฃู MQTT
- **ุงููููุน:** ูุฑุจุท ุจุดุจูุฉ WiFi ุงูุชุงุจุนุฉ ูููุธุงู

**ุฃูุธูุฉ ุงูุฏูุน ุงููุฏุนููุฉ:**
- โ **ุงูุฏูุน ุงูุขุฌู (Postpaid)**: ูุณุชููู ุซู ุชุตุฏุฑ ููุงุชูุฑ
- โ **ุงูุฏูุน ุงููุณุจู (Prepaid)**: ูุณุฏุฏ ูุณุจูุงูุ ุงูุฑุตูุฏ ููุฏู (ุฑูุงู) ูุชูุงูุต ุญุณุจ ุงูุชุนุฑูุฉ
- โ **ุงูุงุฆุชูุงู (Credit)**: ูุถุน ุชุฃูููุ ูุตุฏุฑ ููุงุชูุฑุ ุฅุฐุง ูุตู ูุญุฏ ุงูุงุฆุชูุงู ูุทูุฃ

**ุงูููุงุณุงุช:**
- ุงูุฌูุฏ (Voltage)
- ุงูุชูุงุฑ (Current)
- ุงููุฏุฑุฉ (Power)
- ุงูุทุงูุฉ ุงููุณุชูููุฉ (Energy)
- ุงูุชุฑุฏุฏ (Frequency)
- ูุนุงูู ุงููุฏุฑุฉ (Power Factor)

**ุงูุชุนุฑูุงุช:**
- โ ุฏุนู **8 ุชุนุฑูุงุช ูุชุนุฏุฏุฉ** ูู ุงูููู (Time of Use Tariffs)
- โ ูููู ุชุญุฏูุฏ ุชุนุฑูุฉ ููู ูุชุฑุฉ ุฒูููุฉ
- โ ูุซุงู: ุชุนุฑูุฉ ุงูููุงุฑ (06:00-18:00) ุจุณุนุฑ ููุฎูุถ ููุงุณุชูุงุฏุฉ ูู ุงูุทุงูุฉ ุงูุดูุณูุฉ

---

#### 2. โ ADW300 - ุนุฏุงุฏุงุช ุงููุฑุงูุจุฉ (Monitoring)

**ุงูููุงุตูุงุช:**
- **ููุน ุงูุทูุฑ:** Three Phase (ุซูุงุซู ูุงุฒ)
- **ุงูุงุณุชุฎุฏุงู:** 
  - ูุฑุงูุจุฉ ุฅูุชุงุฌ ุงููููุฏุงุช
  - ูุฑุงูุจุฉ ุงูููุงุจู ูู ุงูุญูุงุฑู
  - ูุฑุงูุจุฉ ุทุจูุงุช ุงูุนุฏุงุฏุงุช
  - ูุฑุงูุจุฉ ุฅูุชุงุฌ ุงูุทุงูุฉ ุงูุดูุณูุฉ
- **ุงูุงุชุตุงู:** WiFi ุฃู RS485 ุฃู MQTT
- **ุงููููุน:** ูุฑุจุท ุจุดุจูุฉ WiFi ุงูุชุงุจุนุฉ ูููุธุงู

**ูุญููุงุช ุงูุชูุงุฑ (Current Transformers - CT):**

##### ุงูููุน ุงูุฃูู: ูุญููุงุช ูุฏูุฌุฉ (Built-in)
- โ ูุฃุชู ูุน ุงูุนุฏุงุฏ **3 ุฃูุฑุงุต ูุญูู ุชูุงุฑ**
- โ ุงูุญุฌู: **100 ุฃูุจูุฑ** (ุฃู ุญุณุจ ุงูุทุฑุงุฒ)
- โ **ูุซุจุชุฉ ุจุงูุนุฏุงุฏ ุจุฃุณูุงู** - ูุง ูููู ุชุบููุฑูุง
- โ ููุน ุงููุฑุต: ุญุณุจ ุงูุทุฑุงุฒ

##### ุงูููุน ุงูุซุงูู: ูุญููุงุช ุฎุงุฑุฌูุฉ (External)
- โ **ุจุฏูู ูุญููุงุช** - ูุฑูุจ ูู ูุญููุงุช ูููุตูุฉ
- โ **3 ุญุจุงุช** (3 ูุญููุงุช ุชูุงุฑ)
- โ **ุฃุญุฌุงู ูุชุงุญุฉ:**
  - 100 ุฃูุจูุฑ
  - 150 ุฃูุจูุฑ
  - 200 ุฃูุจูุฑ
  - 250 ุฃูุจูุฑ
  - 300 ุฃูุจูุฑ
  - 400 ุฃูุจูุฑ
  - 600 ุฃูุจูุฑ
  - 800 ุฃูุจูุฑ
  - 1000 ุฃูุจูุฑ

**ุฃููุงุน ุงูุฃูุฑุงุต:**
- โ **ูุงุจู ูููุชุญ (Split Core)**: ููุชุญ ุงูุญููุฉ ููุฑูุจ ุนูู ุฃู ููุจู ุจุฏูู ูุทุน
- โ **ุญููุฉ ูุบููุฉ (Solid Core)**: ุญููุฉ ูุบููุฉุ ูุญุชุงุฌ ูุทุน ุงูููุจู ููุชุฑููุจ

**ุฃูุธูุฉ ุงูุฏูุน ุงููุฏุนููุฉ:**
- โ **ุงูุฏูุน ุงูุขุฌู (Postpaid)**: ูุณุชููู ุซู ุชุตุฏุฑ ููุงุชูุฑ
- โ **ุงูุฏูุน ุงููุณุจู (Prepaid)**: ูุณุฏุฏ ูุณุจูุงูุ ุงูุฑุตูุฏ ููุฏู (ุฑูุงู) ูุชูุงูุต ุญุณุจ ุงูุชุนุฑูุฉ
- โ **ุงูุงุฆุชูุงู (Credit)**: ูุถุน ุชุฃูููุ ูุตุฏุฑ ููุงุชูุฑุ ุฅุฐุง ูุตู ูุญุฏ ุงูุงุฆุชูุงู ูุทูุฃ

**ุงูุชุนุฑูุงุช:**
- โ ุฏุนู **8 ุชุนุฑูุงุช ูุชุนุฏุฏุฉ** ูู ุงูููู (Time of Use Tariffs)

**ุงูููุงุณุงุช:**

###### ุงูุทุงูุฉ:
- โ **ุงูุทุงูุฉ ุงููุตุฏุฑุฉ** (Exported Energy) - ุงูุทุงูุฉ ุงููุฑุณูุฉ
- โ **ุงูุทุงูุฉ ุงููุณุชูุฑุฏุฉ** (Imported Energy) - ุงูุทุงูุฉ ุงููุณุชููุฉ
- โ **ุฅุฌูุงูู ุงูุทุงูุฉ** (Total Energy)

**ุญุณุงุจ ุงูุทุงูุฉ ูู ุงูููุจู:**
- **ุงูููุงุฑ:** ูุญุณุจ ุงูุทุงูุฉ ุงููุตุฏุฑุฉ
- **ุนูุฏ ุฅูุชุงุฌ ุงูุทุงูุฉ:** ูุญุณุจ ุงูุทุงูุฉ ุงููุฑุชุฌุนุฉ ูููุญุทุฉ
- **ุงูููู:** ูุญุณุจ ุงูุทุงูุฉ ุงููุตุฏุฑุฉ

###### ุงูููุงุณุงุช ุงูุฃุณุงุณูุฉ (Three Phase):
- โ **ุงูุฌูุฏ ุงูุทูุฑ ุงูุฃูู** (Voltage L1)
- โ **ุงูุฌูุฏ ุงูุทูุฑ ุงูุซุงูู** (Voltage L2)
- โ **ุงูุฌูุฏ ุงูุทูุฑ ุงูุซุงูุซ** (Voltage L3)
- โ **ูุชูุณุท ุงูุฌูุฏ** (Voltage Average)
- โ **ุงูุชูุงุฑ ุงูุทูุฑ ุงูุฃูู** (Current L1) - ุจุนุฏ ูุญูู ุงูุชูุงุฑ
- โ **ุงูุชูุงุฑ ุงูุทูุฑ ุงูุซุงูู** (Current L2) - ุจุนุฏ ูุญูู ุงูุชูุงุฑ
- โ **ุงูุชูุงุฑ ุงูุทูุฑ ุงูุซุงูุซ** (Current L3) - ุจุนุฏ ูุญูู ุงูุชูุงุฑ
- โ **ูุชูุณุท ุงูุชูุงุฑ** (Current Average)
- โ **ุงููุฏุฑุฉ ุงูุทูุฑ ุงูุฃูู** (Power L1)
- โ **ุงููุฏุฑุฉ ุงูุทูุฑ ุงูุซุงูู** (Power L2)
- โ **ุงููุฏุฑุฉ ุงูุทูุฑ ุงูุซุงูุซ** (Power L3)
- โ **ุฅุฌูุงูู ุงููุฏุฑุฉ** (Power Total)
- โ **ุงูุชุฑุฏุฏ** (Frequency)
- โ **ูุนุงูู ุงููุฏุฑุฉ** (Power Factor)

###### ูุญููุงุช ุงูุชูุงุฑ:
- โ **ูุณุจุฉ ูุญูู ุงูุชูุงุฑ ุงูุฃูู** (CT1 Ratio) - ูุซุงู: 100/5
- โ **ูุณุจุฉ ูุญูู ุงูุชูุงุฑ ุงูุซุงูู** (CT2 Ratio)
- โ **ูุณุจุฉ ูุญูู ุงูุชูุงุฑ ุงูุซุงูุซ** (CT3 Ratio)

###### ุญุณุงุณุงุช ุงูุญุฑุงุฑุฉ (4 ููุงูุฐ):
- โ **ุญุณุงุณ ุงูุญุฑุงุฑุฉ 1** (Temperature 1) - ุฏุฑุฌุฉ ูุฆููุฉ
- โ **ุญุณุงุณ ุงูุญุฑุงุฑุฉ 2** (Temperature 2) - ุฏุฑุฌุฉ ูุฆููุฉ
- โ **ุญุณุงุณ ุงูุญุฑุงุฑุฉ 3** (Temperature 3) - ุฏุฑุฌุฉ ูุฆููุฉ
- โ **ุญุณุงุณ ุงูุญุฑุงุฑุฉ 4** (Temperature 4) - ุฏุฑุฌุฉ ูุฆููุฉ

###### ููุงุณ ุงูุชุณุฑุจ:
- โ **ุชูุงุฑ ุงูุชุณุฑุจ** (Leakage Current) - ุฃูุจูุฑ

###### ุญุงูุฉ ุงููุงุทุน:
- โ **ุญุงูุฉ ุงููุงุทุน** (Breaker Status) - ุดุบุงู/ุทุงูู/ุฑุญูุฉ
- โ **ุงููููุฉ ุงูุฎุงู** (Breaker Status Raw) - **ูุฑุงุกุฉ ููุทุ ูุง ุชุญูู**

**ุฑุจุท ุนุฏุงุฏุงุช ุงููุฑุงูุจุฉ:**
- โ ูููู ุฑุจุท ุนุฏุฉ ุนุฏุงุฏุงุช ูุฑุงูุจุฉ ุจุฌูุงุฒ ูุงุญุฏ (ูููุฏุ ููุจูุ ุทุจูุงุชุ ุทุงูุฉ ุดูุณูุฉ)
- โ ุฌูุจ ูุฑุงุกุงุช ุฌููุน ุงูุนุฏุงุฏุงุช ุงููุฑุชุจุทุฉ ุจุฌูุงุฒ ูุนูู

---

### ๐ง ุงููุธุงุฆู ุงููุชููุฑุฉ ูู AcrelAPIClient

#### ูุนูููุงุช ุงูุนุฏุงุฏ:
- โ `getMeterInfo()` - ุฌูุจ ูุนูููุงุช ุงูุนุฏุงุฏ (ุงูููุนุ ุงูุงุชุตุงูุ ูุญููุงุช ุงูุชูุงุฑ)
- โ `updateCTInfo()` - ุชุญุฏูุซ ูุนูููุงุช ูุญููุงุช ุงูุชูุงุฑ

#### ูุฑุงุกุงุช ุงูุนุฏุงุฏุงุช:
- โ `getMeterReading()` - ุฌูุจ ูุฑุงุกุงุช ุงูุนุฏุงุฏ (ุนุงู)
- โ `getADL200Reading()` - ุฌูุจ ูุฑุงุกุฉ ุนุฏุงุฏ ูุดุชุฑู (Single Phase)
- โ `getADW300Reading()` - ุฌูุจ ูุฑุงุกุฉ ุนุฏุงุฏ ูุฑุงูุจุฉ (Three Phase ูุน ุฌููุน ุงูุญุณุงุณุงุช)
- โ `getMeterReadings()` - ุฌูุจ ูุฑุงุกุงุช ูุชุนุฏุฏุฉ

#### ุงูุจููุฉ ุงูุชุญุชูุฉ:
- โ `getInfrastructureMetrics()` - ุฌูุจ ุจูุงูุงุช ุงููููุฏุงุช/ุงูููุงุจู/ุงูุทุงูุฉ ุงูุดูุณูุฉ
- โ `getMonitoringMeterReadings()` - ุฌูุจ ูุฑุงุกุงุช ุนุฏุงุฏุงุช ุงููุฑุงูุจุฉ ุงููุฑุชุจุทุฉ ุจุฌูุงุฒ

#### ุงูุชุญูู ุจุงูุนุฏุงุฏ:
- โ `disconnectMeter()` - ูุตู ุงูุนุฏุงุฏ
- โ `reconnectMeter()` - ุฅุนุงุฏุฉ ุชูุตูู ุงูุนุฏุงุฏ
- โ `setTariff()` - ุชุบููุฑ ุงูุชุนุฑูุฉ

#### ุงูุงุชุตุงู:
- โ `connectToWiFi()` - ุฑุจุท ุงูุนุฏุงุฏ ุจุดุจูุฉ WiFi
- โ `enableMQTT()` - ุชูุนูู ุฅุฑุณุงู ุงูุจูุงูุงุช ุนุจุฑ MQTT (ุจุฏูู ุงูููุตุฉ)

#### ุฃูุธูุฉ ุงูุฏูุน:
- โ `setPostpaidMode()` - ุชูุนูู/ุชุนุทูู ุงูุฏูุน ุงูุขุฌู
- โ `setPrepaidMode()` - ุชูุนูู/ุชุนุทูู ุงูุฏูุน ุงููุณุจู
- โ `rechargeBalance()` - ุดุญู ุงูุฑุตูุฏ (ูููุณุจู ุงูุฏูุน - ุฑูุงู)
- โ `getPrepaidBalance()` - ุฌูุจ ูุนูููุงุช ุงูุฑุตูุฏ

#### ุงูุงุฆุชูุงู:
- โ `setCreditLimit()` - ุฅุนุฏุงุฏ ุญุฏ ุงูุงุฆุชูุงู
- โ `getCreditInfo()` - ุฌูุจ ูุนูููุงุช ุงูุงุฆุชูุงู

#### ุงูุชุนุฑูุงุช ุงููุชุนุฏุฏุฉ:
- โ `setMultiTariffSchedule()` - ุฅุนุฏุงุฏ ุฌุฏูู ุงูุชุนุฑูุงุช (ุญุชู 8 ุชุนุฑูุงุช)
- โ `getMultiTariffSchedule()` - ุฌูุจ ุฌุฏูู ุงูุชุนุฑูุงุช
- โ `getPaymentMode()` - ุฌูุจ ููุน ุงูุฏูุน ุงูุญุงูู

---

### ๐ง ุงููุธุงุฆู ุงููุชููุฑุฉ ูู AcrelService

- โ ุฌููุน ุงููุธุงุฆู ุฃุนูุงู ูุน ุฑุจุทูุง ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุญูุธ ุงูุฃูุงูุฑ ูุงููุชุงุฆุฌ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ ุฅุนุฏุงุฏ ูุญููุงุช ุงูุชูุงุฑ ุงูุฎุงุฑุฌูุฉ (`configureExternalCTs()`)

---

## ๐ 2. ุชูุงูู STS (Smart Token System)

### ๐ ูุนูููุงุช ุนุงูุฉ

**ููุน ุงูุชูุงูู:** REST API  
**ุงููููุน:** `server/developer/integrations/sts-api-client.ts`  
**ุงูุฎุฏูุฉ:** `server/developer/integrations/sts-service.ts`

**ููุงุญุธุฉ ูููุฉ:**
- ุงูุชูุงูู ูุน ูุธุงู ุตุฏูู ุงูุฐู ูุจูุน ุงูุนุฏุงุฏุงุช
- ูููุฑ API ููุชุนุงูู ูุน ุนุฏุงุฏุงุช STS
- ุงูุงุชุตุงู ุนุจุฑ REST API

---

### ๐ ููุงุตูุงุช ุนุฏุงุฏุงุช STS

**ุงูุงุณุชุฎุฏุงู:**
- ุนุฏุงุฏุงุช ุงูุฏูุน ุงููุณุจู
- ุชูููุฏ ุฃููุงุฏ (Tokens) ููุดุญู

**ุงูุงุชุตุงู:**
- โ WiFi
- โ RS485
- โ MQTT (ุฅุฐุง ุฃุฑุฏูุง ุจุฏูู ุงูููุตุฉ)
- โ ูุฑุจุท ุจุดุจูุฉ WiFi ุงูุชุงุจุนุฉ ูููุธุงู

**ุญุงูุฉ ุงูุงุชุตุงู:**
- โ ูุนุฑูุฉ ุญุงูุฉ ุงูุงุชุตุงู (ูุชุตู/ูููุทุน ุจุงูู DCU ุนุจุฑ RF)
- โ ููุฉ ุงูุฅุดุงุฑุฉ (Signal Strength)
- โ ุขุฎุฑ ููุช ุงุชุตุงู

---

### ๐ณ ุฃูุธูุฉ ุงูุฏูุน ุงููุฏุนููุฉ

#### 1. โ ุงูุฏูุน ุงูุขุฌู (Postpaid)
- ูุณุชููู ุซู ุชุตุฏุฑ ููุงุชูุฑ
- ูุญุงุณุจ ุจุนุฏ ุงูุงุณุชููุงู

#### 2. โ ุงูุฏูุน ุงููุณุจู (Prepaid)
**โ๏ธ ููุงุญุธุฉ ูููุฉ ุฌุฏุงู:**
- **STS ูููุฏ ูููููุงุช (KWH) ูููุณ ุฑุตูุฏ ููุฏู**
- ุงูููุฏ ุงูุฐู ููููุฏ ูุญุชูู ุนูู ูููููุงุช ุฌุงูุฒุฉ
- ุนูุฏ ุงูุดุญู: ุงููุจูุบ + ุงูุชุนุฑูุฉ โ ูุญุณุจ ุงููููููุงุช โ ูููุฏ ููุฏ ุจุงููููููุงุช
- **ุงููุฑู ุนู ADL200:** ADL200 ุฑุตูุฏ ููุฏู ูุชูุงูุตุ STS ูููููุงุช ุฌุงูุฒุฉ

**ูุซุงู:**
- ุดุญู 100 ุฑูุงู
- ุงูุชุนุฑูุฉ: 0.18 ุฑูุงู/ูููู
- ูุญุณุจ: 100 / 0.18 = 555.56 ูููู
- ูููุฏ ููุฏ ูุญุชูู ุนูู 555.56 ูููู

#### 3. โ ุงูุงุฆุชูุงู (Credit)
- ูุถุน ุงููุดุชุฑู ุชุฃููู
- ูุตุฏุฑ ููุงุชูุฑ ุนูู ุฃุณุงุณ ุงูุฏูุน ุงูุขุฌู
- **ุฅุฐุง ูุตู ุงูุฏูู ุฅูู ูุจูุบ ุงูุงุฆุชูุงู โ ุงูุนุฏุงุฏ ูุทูุฃ ุชููุงุฆูุงู**

---

### โฐ ุงูุชุนุฑูุงุช ุงููุชุนุฏุฏุฉ

- โ ุฏุนู **8 ุชุนุฑูุงุช ูุชุนุฏุฏุฉ** ูู ุงูููู
- โ ุนูุฏ ุงูุดุญู: ูุญุณุจ ุงููููููุงุช ุญุณุจ ุงูุชุนุฑูุฉ ุงูุญุงููุฉ ูู ููุช ุงูุดุญู
- โ ูููู ุชุญุฏูุฏ ุชุนุฑูุฉ ููู ูุชุฑุฉ ุฒูููุฉ

---

### ๐ง ุงููุธุงุฆู ุงููุชููุฑุฉ ูู STSAPIClient

#### ุดุญู ุงูุนุฏุงุฏ:
- โ `chargeMeter()` - ุดุญู ุนุฏุงุฏ STS (ุฅูุดุงุก Token)
  - **ูููุฏ ูููููุงุช** ุญุณุจ ุงูุชุนุฑูุฉ
  - `amount` = ุงููุจูุบ ุจุงูุฑูุงู
  - `tariffId` = ูุนุฑู ุงูุชุนุฑูุฉ (ูุญุณุงุจ ุงููููููุงุช ูู ุงููุจูุบ)
  - `paymentMethod` = ุทุฑููุฉ ุงูุฏูุน

#### ูุฑุงุกุงุช ุงูุนุฏุงุฏ:
- โ `getMeterReading()` - ุณุญุจ ูุฑุงุกุฉ ุงูุนุฏุงุฏ
- โ `getMeterReadings()` - ุฌูุจ ูุฑุงุกุงุช ูุชุนุฏุฏุฉ
- โ `getMeterStatus()` - ูุนุฑูุฉ ุญุงูุฉ ุงูุนุฏุงุฏ (ูุชุตู/ูููุทุน ุจุงูู DCU ุนุจุฑ RF)
- โ `getMeterBalance()` - ูุนุฑูุฉ ุงูุฑุตูุฏ ููู ุจุงูู ูููููุงุช

#### ุฃููุงุฏ ุงูุตูุงูุฉ:
- โ `generateMaintenanceCode()` - ุฅุตุฏุงุฑ ุฃููุงุฏ ุตูุงูุฉ
  - ุฃููุงุน ุงูุฃููุงุฏ: `maintenance`, `repair`, `inspection`

#### ุงูุชุญูู ุจุงูุนุฏุงุฏ:
- โ `disconnectMeter()` - ูุตู ุงูุนุฏุงุฏ
- โ `reconnectMeter()` - ุฅุนุงุฏุฉ ุชูุตูู ุงูุนุฏุงุฏ
- โ `reduceAmperage()` - ุฎูุถ ุงูุฃูุจูุฑ
- โ `increaseAmperage()` - ุฑูุน ุงูุฃูุจูุฑ
- โ `turnOnMeter()` - ุชุดุบูู ุงูุนุฏุงุฏ
- โ `turnOffMeter()` - ุฅุทูุงุก ุงูุนุฏุงุฏ

#### ุงูุชุญูู:
- โ `checkCommandStatus()` - ุงูุชุญูู ูู ุญุงูุฉ ุงูุฃูุฑ
- โ `verifyCharge()` - ุงูุชุญูู ูู ุญุงูุฉ ุงูุดุญู

#### ุฃูุธูุฉ ุงูุฏูุน:
- โ `setPostpaidMode()` - ุชูุนูู/ุชุนุทูู ุงูุฏูุน ุงูุขุฌู
- โ `setPrepaidMode()` - ุชูุนูู/ุชุนุทูู ุงูุฏูุน ุงููุณุจู
- โ `rechargeBalance()` - ุดุญู ุงูุฑุตูุฏ (ูููุฏ ูููููุงุช)
- โ `getPrepaidBalance()` - ุฌูุจ ูุนูููุงุช ุงูุฑุตูุฏ (ูููููุงุช)

#### ุงูุงุฆุชูุงู:
- โ `setCreditLimit()` - ุฅุนุฏุงุฏ ุญุฏ ุงูุงุฆุชูุงู
- โ `getCreditInfo()` - ุฌูุจ ูุนูููุงุช ุงูุงุฆุชูุงู

#### ุงูุชุนุฑูุงุช ุงููุชุนุฏุฏุฉ:
- โ `setMultiTariffSchedule()` - ุฅุนุฏุงุฏ ุฌุฏูู ุงูุชุนุฑูุงุช (ุญุชู 8 ุชุนุฑูุงุช)
- โ `getMultiTariffSchedule()` - ุฌูุจ ุฌุฏูู ุงูุชุนุฑูุงุช
- โ `getPaymentMode()` - ุฌูุจ ููุน ุงูุฏูุน ุงูุญุงูู

---

### ๐ง ุงููุธุงุฆู ุงููุชููุฑุฉ ูู STSService

- โ ุฌููุน ุงููุธุงุฆู ุฃุนูุงู ูุน ุฑุจุทูุง ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุญูุธ ุงูุฃูุงูุฑ ูุงููุชุงุฆุฌ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

---

## ๐ 3. ุชูุงูู ุจูุงุจุงุช ุงูุฏูุน (Payment Gateways)

### ๐ ูุนูููุงุช ุนุงูุฉ

**ุงููููุน:** `server/paymentGatewaysRouter.ts`  
**ุงููุตูู:** `trpc.developer.integrations.paymentGateways.*`

**ููุงุญุธุฉ:**
- Router ูููุตู ูููู ูุฑุชุจุท ูู `developer.integrations`
- ูููู ุชุฑูู ูู ููุงูู ุงูุญุงูู

**ุงููุฏุนูู:**
- โ ุจุทุงูุงุช ุงุฆุชูุงู
- โ ุชุญููู ุจููู
- โ ูุญูุธุฉ ุฅููุชุฑูููุฉ
- โ ุนููุงุช ูุดูุฑุฉ
- โ ุฃุฎุฑู

---

## ๐ 4. ุชูุงูู SMS/WhatsApp (Messaging)

### ๐ ูุนูููุงุช ุนุงูุฉ

**ุงููููุน:** `server/messagingRouter.ts`  
**ุงููุตูู:** `trpc.developer.integrations.messaging.*`

**ููุงุญุธุฉ:**
- Router ูููุตู ูููู ูุฑุชุจุท ูู `developer.integrations`
- ูููู ุชุฑูู ูู ููุงูู ุงูุญุงูู

**ุงููุฏุนูู:**
- โ SMS
- โ WhatsApp
- โ Email
- โ ููุงูุจ ูุงุจูุฉ ููุชุฎุตูุต

---

## ๐ ุฌุฏูู ููุงุฑูุฉ ADL200 ู ADW300 ู STS

| ุงูููุฒุฉ | ADL200 | ADW300 | STS |
|--------|--------|--------|-----|
| **ููุน ุงูุทูุฑ** | Single Phase | Three Phase | - |
| **ุงูุงุณุชุฎุฏุงู** | ุงููุดุชุฑููู | ุงููุฑุงูุจุฉ | ุงููุดุชุฑููู |
| **ุงููุณุจู ุงูุฏูุน** | ุฑุตูุฏ ููุฏู (ุฑูุงู) | ุฑุตูุฏ ููุฏู (ุฑูุงู) | **ูููููุงุช (KWH)** |
| **ุงูุฏูุน ุงูุขุฌู** | โ | โ | โ |
| **ุงูุงุฆุชูุงู** | โ | โ | โ |
| **ุงูุชุนุฑูุงุช ุงููุชุนุฏุฏุฉ** | โ (8 ุชุนุฑูุงุช) | โ (8 ุชุนุฑูุงุช) | โ (8 ุชุนุฑูุงุช) |
| **ูุญููุงุช ุงูุชูุงุฑ** | โ | โ (Built-in/External) | โ |
| **ุญุณุงุณุงุช ุงูุญุฑุงุฑุฉ** | โ | โ (4 ููุงูุฐ) | โ |
| **ููุงุณ ุงูุชุณุฑุจ** | โ | โ | โ |
| **ุญุงูุฉ ุงููุงุทุน** | โ | โ (ูุฑุงุกุฉ ููุท) | โ (ุชุญูู) |
| **ุงูุงุชุตุงู** | WiFi/RS485/MQTT | WiFi/RS485/MQTT | WiFi/RS485/MQTT |

---

## ๐ ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

### ACREL:
```env
ACREL_API_BASE_URL=https://api.acrel.com
ACREL_API_KEY=your_api_key_here
ACREL_API_SECRET=your_api_secret_here
ACREL_API_TIMEOUT=30000
ACREL_API_RETRY_ATTEMPTS=3
```

### STS:
```env
STS_API_BASE_URL=https://api.sts-provider.com
STS_API_KEY=your_api_key_here
STS_API_SECRET=your_api_secret_here
STS_MERCHANT_ID=your_merchant_id_here
STS_API_TIMEOUT=30000
STS_API_RETRY_ATTEMPTS=3
```

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ACREL - ุฅุนุฏุงุฏ ุงูุชุนุฑูุงุช ุงููุชุนุฏุฏุฉ (8 ุชุนุฑูุงุช):
```typescript
const schedule: MultiTariffSchedule = {
  meterId: "meter_001",
  tariffs: [
    {
      tariffId: "tariff_1",
      name: "ุชุนุฑูุฉ ุงูููุงุฑ (ุดูุณูุฉ)",
      startTime: "06:00",
      endTime: "10:00",
      pricePerKWH: 0.12, // ุณุนุฑ ููุฎูุถ ููุงุณุชูุงุฏุฉ ูู ุงูุทุงูุฉ ุงูุดูุณูุฉ
      isActive: true,
    },
    {
      tariffId: "tariff_2",
      name: "ุชุนุฑูุฉ ุงูุตุจุงุญ",
      startTime: "10:00",
      endTime: "14:00",
      pricePerKWH: 0.15,
      isActive: true,
    },
    // ... ุญุชู 8 ุชุนุฑูุงุช
  ],
  effectiveDate: "2026-01-01",
};

await acrelService.setMultiTariffSchedule(meterId, schedule);
```

### STS - ุดุญู ุงูุนุฏุงุฏ (ูููุฏ ูููููุงุช):
```typescript
// ุดุญู 100 ุฑูุงู ุจุชุนุฑูุฉ 0.18 ุฑูุงู/ูููู
const result = await stsService.chargeMeter(meterId, 100, "cash", tariffId);

// ุงููุชูุฌุฉ:
// result.token = "ุงูููุฏ ุงููููุฏ"
// result.kwhGenerated = 555.56 ูููู
```

### ACREL - ุฅุนุฏุงุฏ ูุญููุงุช ุงูุชูุงุฑ ุงูุฎุงุฑุฌูุฉ:
```typescript
// ุฅุนุฏุงุฏ ูุญููุงุช 200 ุฃูุจูุฑุ ูุงุจู ูููุชุญ
await acrelService.configureExternalCTs(
  meterId,
  200,      // CT1
  200,      // CT2
  200,      // CT3
  "split",  // CT1: ูุงุจู ูููุชุญ
  "split",  // CT2: ูุงุจู ูููุชุญ
  "solid"   // CT3: ุญููุฉ ูุบููุฉ
);
```

---

## โ ุงูุญุงูุฉ ุงูููุงุฆูุฉ

- โ ุฌููุน ุงูุชูุงููุงุช ุงูุฎุงุฑุฌูุฉ ูู ูุธุงู ุงููุทูุฑ
- โ ACREL API Client ููุชูู
- โ ACREL Service ููุชูู
- โ STS API Client ููุชูู
- โ STS Service ููุชูู
- โ ุฏุนู ADL200 (Single Phase)
- โ ุฏุนู ADW300 (Three Phase ูุน ูุญููุงุช ุงูุชูุงุฑ)
- โ ุฏุนู ุฌููุน ุฃูุธูุฉ ุงูุฏูุน (ุขุฌูุ ูุณุจูุ ุงุฆุชูุงู)
- โ ุฏุนู ุงูุชุนุฑูุงุช ุงููุชุนุฏุฏุฉ (8 ุชุนุฑูุงุช)
- โ ุฏุนู ูุญููุงุช ุงูุชูุงุฑ ุงูุฎุงุฑุฌูุฉ
- โ ุฏุนู ุฌููุน ุงูุญุณุงุณุงุช ูุงูููุงุณุงุช
- โ ุฏุนู WiFi ู RS485 ู MQTT

---

## ๐ ููุงุญุธุงุช ููุงุฆูุฉ ูููุฉ

1. **ุงูุชูุงููุงุช ุงูุฎุงุฑุฌูุฉ:** ูุฌุจ ุฃู ุชููู ุฏุงุฆูุงู ูู `developer.integrations.*`
2. **ADL200:** ุฑุตูุฏ ููุฏู ูุชูุงูุต
3. **STS:** ูููุฏ ูููููุงุช ูููุณ ุฑุตูุฏ ููุฏู
4. **ADW300:** ูุญุณุจ ุงูุทุงูุฉ ุงููุตุฏุฑุฉ ูุงููุณุชูุฑุฏุฉ
5. **ุงูุชุนุฑูุงุช ุงููุชุนุฏุฏุฉ:** ุญุชู 8 ุชุนุฑูุงุช ูู ุงูููู
6. **ุงูุงุฆุชูุงู:** ุฅุทูุงุก ุชููุงุฆู ุนูุฏ ุงููุตูู ููุญุฏ
7. **ุงูุงุชุตุงู:** ุฌููุน ุงูุนุฏุงุฏุงุช ุชุฏุนู WiFi/RS485/MQTT

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2026-01-06  
**ุงููุทูุฑ:** Auto (Cursor AI)

