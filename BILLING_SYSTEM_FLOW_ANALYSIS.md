# ๐ ุชุญููู ูุธุงู ุงูููุชุฑุฉ ูุฑุจุท ุงูุดุงุดุงุช
## Billing System Flow Analysis

**ุงูุชุงุฑูุฎ:** ุงูุฌูุนุฉุ 10 ููุงูุฑ 2026

---

## ๐ **ุงูุฎูุงุตุฉ ุงูุชูููุฐูุฉ**

ูุธุงู ุงูููุชุฑุฉ ูุชููู ูู **17 ุตูุญุฉ** ูุฑุชุจุทุฉ ุจุจุนุถูุง ุงูุจุนุถ ุนุจุฑ **4 ูุณุงุฑุงุช ุฑุฆูุณูุฉ**:
1. **ุฏูุฑุฉ ุงูููุชุฑุฉ ุงููุงููุฉ** (Billing Cycle)
2. **ุฅุฏุงุฑุฉ ุงูุนููุงุก** (Customer Management)
3. **ุฅุฏุงุฑุฉ ุงูุนุฏุงุฏุงุช** (Meters Management)
4. **ุงููุฏููุนุงุช ูุงูุชุญุตูู** (Payments & Collections)

---

## ๐ฏ **ุงููุณุงุฑ ุงูุฑุฆูุณู: ุฏูุฑุฉ ุงูููุชุฑุฉ ุงููุงููุฉ**

### 1๏ธโฃ **ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ** (BillingDashboard)
**ุงููุณุงุฑ:** `/dashboard/billing`

**ุงููุธุงุฆู:**
- ุนุฑุถ ุฅุญุตุงุฆูุงุช ุดุงููุฉ (ุงูุนููุงุกุ ุงูุนุฏุงุฏุงุชุ ุงูููุงุชูุฑุ ุงููุฏููุนุงุช)
- ุฅุญุตุงุฆูุงุช ุญุณุจ ููุน ุงูุฎุฏูุฉ (ููุฑุจุงุกุ ููุงูุ ุบุงุฒ)
- ุฅุญุตุงุฆูุงุช ุญุณุจ ูุฆุฉ ุงูุนููู (ุณูููุ ุชุฌุงุฑูุ ุตูุงุนูุ ุญูููู)
- ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ
- ูุนุฏู ุงูุชุญุตูู

**ุงูุฑุจุท ูุน ุงูุดุงุดุงุช ุงูุฃุฎุฑู:**
```
BillingDashboard
  โโโ CustomersManagement (ุฅุฏุงุฑุฉ ุงูุนููุงุก)
  โโโ MetersManagement (ุฅุฏุงุฑุฉ ุงูุนุฏุงุฏุงุช)
  โโโ InvoicesManagement (ุงูููุงุชูุฑ)
  โโโ PaymentsManagement (ุงููุฏููุนุงุช)
  โโโ CollectionsAndOverdue (ุงูุชุญุตูู ูุงููุณุชุญูุงุช)
```

---

## ๐ **ูุณุงุฑ ุฏูุฑุฉ ุงูููุชุฑุฉ (Billing Cycle)**

### **ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุชุฑุฉ ููุชุฑุฉ**
**ุงูุดุงุดุฉ:** `BillingPeriodsManagement`  
**ุงููุณุงุฑ:** `/dashboard/billing/periods`

**ุงููุธุงุฆู:**
- ุฅูุดุงุก ูุชุฑุฉ ููุชุฑุฉ ุฌุฏูุฏุฉ (ุดูุฑูุฉ/ุฑุจุน ุณูููุฉ)
- ุชุญุฏูุฏ ุชูุงุฑูุฎ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ
- ุชุญุฏูุฏ ุญุงูุฉ ุงููุชุฑุฉ (reading_phase, billing_phase, closed)

**API ุงููุณุชุฎุฏู:**
```typescript
trpc.billing.createBillingPeriod.useMutation()
trpc.billing.getBillingPeriods.useQuery()
```

---

### **ุงูุฎุทูุฉ 2: ุฅุฏุฎุงู ูุฑุงุกุงุช ุงูุนุฏุงุฏุงุช**
**ุงูุดุงุดุฉ:** `MeterReadingsManagement`  
**ุงููุณุงุฑ:** `/dashboard/billing/readings`

**ุงููุธุงุฆู:**
- ุฅุฏุฎุงู ูุฑุงุกุงุช ุงูุนุฏุงุฏุงุช ููู ุนููู
- ุงุนุชูุงุฏ ุงููุฑุงุกุงุช
- ููุงุฑูุฉ ุงููุฑุงุกุงุช ูุน ุงููุชุฑุงุช ุงูุณุงุจูุฉ
- ุญุณุงุจ ุงูุงุณุชููุงู ุชููุงุฆูุงู

**ุงูุฑุจุท:**
```
MeterReadingsManagement
  โโโ MetersManagement (ุงุฎุชูุงุฑ ุงูุนุฏุงุฏ)
  โโโ CustomersManagement (ุงุฎุชูุงุฑ ุงูุนููู)
  โโโ BillingPeriodsManagement (ุงุฎุชูุงุฑ ุงููุชุฑุฉ)
```

**API ุงููุณุชุฎุฏู:**
```typescript
trpc.billing.getMeterReadings.useQuery()
trpc.billing.createMeterReading.useMutation()
trpc.billing.approveMeterReading.useMutation()
```

**ุจุนุฏ ุงูุงุนุชูุงุฏ:**
```
MeterReadingsManagement (ูุฑุงุกุงุช ูุนุชูุฏุฉ)
  โโโ InvoicesManagement (ุชูููุฏ ุงูููุงุชูุฑ)
```

---

### **ุงูุฎุทูุฉ 3: ุชูููุฏ ุงูููุงุชูุฑ**
**ุงูุดุงุดุฉ:** `InvoicesManagement`  
**ุงููุณุงุฑ:** `/dashboard/billing/invoices`

**ุงููุธุงุฆู:**
- ุนุฑุถ ุงูููุงุชูุฑ ุงููููุฏุฉ ุชููุงุฆูุงู ูู ุงููุฑุงุกุงุช ุงููุนุชูุฏุฉ
- ุงุนุชูุงุฏ ุงูููุงุชูุฑ (Batch Approval)
- ุฅุฑุณุงู ุงูููุงุชูุฑ ููุนููุงุก (SMS/Email)
- ุทุจุงุนุฉ ุงูููุงุชูุฑ
- ุนุฑุถ ุชูุงุตูู ุงููุงุชูุฑุฉ

**ุงูุฑุจุท ูู:**
```
BillingPeriodsManagement (ูุชุฑุฉ ูุนุงูุฉ)
  โโโ MeterReadingsManagement (ูุฑุงุกุงุช ูุนุชูุฏุฉ)
      โโโ InvoicesManagement (ุชูููุฏ ุงูููุงุชูุฑ)
```

**ุงูุฑุจุท ุฅูู:**
```
InvoicesManagement
  โโโ PaymentsManagement (ุชุญุตูู ุฏูุนุฉ ููุงุจู ุงููุงุชูุฑุฉ)
  โโโ CollectionsAndOverdue (ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ)
  โโโ CustomersManagement (ุนุฑุถ ููุงุชูุฑ ุงูุนููู)
```

**API ุงููุณุชุฎุฏู:**
```typescript
trpc.billing.getInvoices.useQuery()
trpc.billing.generateInvoices.useMutation()
trpc.billing.approveInvoices.useMutation()
trpc.billing.sendInvoices.useMutation()
```

**ุงูุฅุฌุฑุงุกุงุช ุงููุชุงุญุฉ ูู ุงููุงุชูุฑุฉ:**
1. **ุนุฑุถ ุงูุชูุงุตูู** (Eye Icon) โ Dialog ูุน ุฌููุน ุชูุงุตูู ุงููุงุชูุฑุฉ
2. **ุทุจุงุนุฉ** (Printer Icon) โ ุทุจุงุนุฉ ุงููุงุชูุฑุฉ
3. **ุชุญุตูู** (DollarSign Icon) โ ุงูุงูุชูุงู ูุตูุญุฉ ุงููุฏููุนุงุช

---

### **ุงูุฎุทูุฉ 4: ุชุญุตูู ุงููุฏููุนุงุช**
**ุงูุดุงุดุฉ:** `PaymentsManagement`  
**ุงููุณุงุฑ:** `/dashboard/billing/payments`

**ุงููุธุงุฆู:**
- ุนุฑุถ ุฌููุน ุงููุฏููุนุงุช
- ุชุญุตูู ุฏูุนุฉ ุฌุฏูุฏุฉ (ูุนููู ุฃู ููุงุจู ูุงุชูุฑุฉ ูุญุฏุฏุฉ)
- ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน (ููุฏูุ ุจุทุงูุฉุ ุชุญููู ุจููู)
- ุงุฎุชูุงุฑ ุงูุตูุฏูู (Cashbox)
- ุฅุตุฏุงุฑ ุฅูุตุงู (Receipt)

**ุงูุฑุจุท ูู:**
```
InvoicesManagement (ุฒุฑ "ุชุญุตูู" ุนูู ุงููุงุชูุฑุฉ)
  โโโ PaymentsManagement (ุชุญุตูู ุฏูุนุฉ)
```

**ุงูุฑุจุท ุฅูู:**
```
PaymentsManagement
  โโโ InvoicesManagement (ุชุญุฏูุซ ุญุงูุฉ ุงููุงุชูุฑุฉ ุจุนุฏ ุงูุฏูุน)
  โโโ CustomersManagement (ุชุญุฏูุซ ุฑุตูุฏ ุงูุนููู)
  โโโ ReceiptsManagement (ุฅุตุฏุงุฑ ุฅูุตุงู)
```

**API ุงููุณุชุฎุฏู:**
```typescript
trpc.billing.getPayments.useQuery()
trpc.billing.createPayment.useMutation()
trpc.billing.getCashboxes.useQuery()
```

**ุงูุชุฏูู ุนูุฏ ุชุญุตูู ุฏูุนุฉ:**
```
1. ุงุฎุชูุงุฑ ุงูุนููู (ูู CustomersManagement)
2. ุงุฎุชูุงุฑ ุงููุงุชูุฑุฉ (ุงุฎุชูุงุฑู - ูู InvoicesManagement)
3. ุฅุฏุฎุงู ุงููุจูุบ
4. ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน (cash, card, bank_transfer)
5. ุงุฎุชูุงุฑ ุงูุตูุฏูู (Cashbox)
6. ุญูุธ ุงูุฏูุนุฉ
7. ุชุญุฏูุซ ุญุงูุฉ ุงููุงุชูุฑุฉ (paid/partial)
8. ุชุญุฏูุซ ุฑุตูุฏ ุงูุนููู
9. ุฅุตุฏุงุฑ ุฅูุตุงู ุชููุงุฆูุงู
```

---

### **ุงูุฎุทูุฉ 5: ูุชุงุจุนุฉ ุงูุชุญุตูู ูุงููุณุชุญูุงุช**
**ุงูุดุงุดุฉ:** `CollectionsAndOverdue`  
**ุงููุณุงุฑ:** `/dashboard/billing/collections`

**ุงููุธุงุฆู:**
- ุนุฑุถ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ
- ูุชุงุจุนุฉ ุงููุณุชุญูุงุช
- ุฅุฑุณุงู ุชุฐููุฑุงุช ููุนููุงุก
- ุชูุงุฑูุฑ ุงูุชุญุตูู

**ุงูุฑุจุท:**
```
CollectionsAndOverdue
  โโโ InvoicesManagement (ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ)
  โโโ CustomersManagement (ุนููุงุก ูุฏููู ูุณุชุญูุงุช)
  โโโ PaymentsManagement (ุชุญุตูู ุงููุณุชุญูุงุช)
```

---

## ๐ฅ **ูุณุงุฑ ุฅุฏุงุฑุฉ ุงูุนููุงุก**

### **1. ูุงุฆูุฉ ุงูุนููุงุก**
**ุงูุดุงุดุฉ:** `CustomersManagement`  
**ุงููุณุงุฑ:** `/dashboard/billing/customers`

**ุงููุธุงุฆู:**
- ุนุฑุถ ุฌููุน ุงูุนููุงุก
- ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ
- ุชุนุฏูู ุจูุงูุงุช ุงูุนููู
- ุชุนุทูู/ุชูุนูู ุงูุนููู
- ุนุฑุถ ุชูุงุตูู ุงูุนููู

**ุงูุฑุจุท:**
```
CustomersManagement
  โโโ CustomerDetails (ุนุฑุถ ุชูุงุตูู ุงูุนููู)
  โโโ MetersManagement (ุนุฏุงุฏุงุช ุงูุนููู)
  โโโ InvoicesManagement (ููุงุชูุฑ ุงูุนููู)
  โโโ PaymentsManagement (ูุฏููุนุงุช ุงูุนููู)
  โโโ CustomerDashboard (ููุญุฉ ุงูุนููู)
```

**API ุงููุณุชุฎุฏู:**
```typescript
trpc.billing.getCustomers.useQuery()
trpc.billing.createCustomer.useMutation()
trpc.billing.updateCustomer.useMutation()
trpc.customerSystem.getCustomerStatus.useQuery()
```

---

### **2. ุชูุงุตูู ุงูุนููู**
**ุงูุดุงุดุฉ:** `CustomerDetails`  
**ุงููุณุงุฑ:** `/dashboard/billing/customers/:id`

**ุงููุธุงุฆู:**
- ุนุฑุถ ูุนูููุงุช ุงูุนููู ุงููุงููุฉ
- ุนุฑุถ ุงูุนุฏุงุฏุงุช ุงููุฑุชุจุทุฉ
- ุนุฑุถ ุงูููุงุชูุฑ
- ุนุฑุถ ุงููุฏููุนุงุช
- ุนุฑุถ ุงูุฑุตูุฏ ุงููุณุชุญู

**ุงูุฑุจุท:**
```
CustomerDetails
  โโโ MetersManagement (ุนุฑุถ/ุฅุฏุงุฑุฉ ุนุฏุงุฏุงุช ุงูุนููู)
  โโโ InvoicesManagement (ุนุฑุถ ููุงุชูุฑ ุงูุนููู)
  โโโ PaymentsManagement (ุชุญุตูู ุฏูุนุฉ ูู ุงูุนููู)
  โโโ CustomerWallets (ูุญูุธุฉ ุงูุนููู)
```

---

### **3. ููุญุฉ ุงูุนููู**
**ุงูุดุงุดุฉ:** `CustomerDashboard`  
**ุงููุณุงุฑ:** `/dashboard/billing/customers/dashboard`

**ุงููุธุงุฆู:**
- ุฅุญุตุงุฆูุงุช ุงูุนููู
- ุงูููุงุชูุฑ ุงูุญุฏูุซุฉ
- ุงููุฏููุนุงุช ุงูุญุฏูุซุฉ
- ุงููุณุชุญูุงุช

**ุงูุฑุจุท:**
```
CustomerDashboard
  โโโ CustomersManagement (ูุงุฆูุฉ ุงูุนููุงุก)
  โโโ InvoicesManagement (ุฌููุน ุงูููุงุชูุฑ)
  โโโ PaymentsManagement (ุฌููุน ุงููุฏููุนุงุช)
  โโโ MeterReadingsManagement (ูุฑุงุกุงุช ุงูุนุฏุงุฏุงุช)
```

---

### **4. ูุญุงูุธ ุงูุนููุงุก**
**ุงูุดุงุดุฉ:** `CustomerWallets`  
**ุงููุณุงุฑ:** `/dashboard/billing/wallets`

**ุงููุธุงุฆู:**
- ุนุฑุถ ุฃุฑุตุฏุฉ ุงููุญุงูุธ
- ุชุญูููุงุช ุจูู ุงููุญุงูุธ
- ุณุฌู ุงูุชุญูููุงุช

**API ุงููุณุชุฎุฏู:**
```typescript
trpc.customerSystem.getCustomerWallets.useQuery()
trpc.customerSystem.createWalletTransaction.useMutation()
```

---

## ๐ง **ูุณุงุฑ ุฅุฏุงุฑุฉ ุงูุนุฏุงุฏุงุช**

### **1. ูุงุฆูุฉ ุงูุนุฏุงุฏุงุช**
**ุงูุดุงุดุฉ:** `MetersManagement`  
**ุงููุณุงุฑ:** `/dashboard/billing/meters`

**ุงููุธุงุฆู:**
- ุนุฑุถ ุฌููุน ุงูุนุฏุงุฏุงุช
- ุฅุถุงูุฉ ุนุฏุงุฏ ุฌุฏูุฏ
- ุชุนุฏูู ุจูุงูุงุช ุงูุนุฏุงุฏ
- ุชุนุทูู/ุชูุนูู ุงูุนุฏุงุฏ
- ุฑุจุท ุงูุนุฏุงุฏ ุจุนููู

**ุงูุฑุจุท:**
```
MetersManagement
  โโโ MeterDetailsExtended (ุชูุงุตูู ุงูุนุฏุงุฏ)
  โโโ MeterCustomerLink (ุฑุจุท ุงูุนุฏุงุฏ ุจุนููู)
  โโโ MetersMap (ุฎุฑูุทุฉ ุงูุนุฏุงุฏุงุช)
  โโโ MeterReadingsManagement (ูุฑุงุกุงุช ุงูุนุฏุงุฏ)
  โโโ InvoicesManagement (ููุงุชูุฑ ุงูุนุฏุงุฏ)
```

**API ุงููุณุชุฎุฏู:**
```typescript
trpc.billing.getMeters.useQuery()
trpc.billing.createMeter.useMutation()
trpc.billing.updateMeter.useMutation()
```

---

### **2. ุฑุจุท ุงูุนุฏุงุฏุงุช ุจุงูุนููุงุก**
**ุงูุดุงุดุฉ:** `MeterCustomerLink`  
**ุงููุณุงุฑ:** `/dashboard/billing/meters/link`

**ุงููุธุงุฆู:**
- ุฑุจุท ุนุฏุงุฏ ุจุนููู
- ููู ุนุฏุงุฏ ูู ุนููู ูุขุฎุฑ
- ุนุฑุถ ุณุฌู ุงูุงุฑุชุจุงุทุงุช

**ุงูุฑุจุท:**
```
MeterCustomerLink
  โโโ MetersManagement (ุงุฎุชูุงุฑ ุงูุนุฏุงุฏ)
  โโโ CustomersManagement (ุงุฎุชูุงุฑ ุงูุนููู)
```

---

### **3. ุฎุฑูุทุฉ ุงูุนุฏุงุฏุงุช**
**ุงูุดุงุดุฉ:** `MetersMap`  
**ุงููุณุงุฑ:** `/dashboard/billing/meters/map`

**ุงููุธุงุฆู:**
- ุนุฑุถ ุงูุนุฏุงุฏุงุช ุนูู ุงูุฎุฑูุทุฉ
- ุงูุจุญุซ ุนู ุนุฏุงุฏ ุจุงููููุน
- ุนุฑุถ ูุนูููุงุช ุงูุนุฏุงุฏ ุนูุฏ ุงูููุฑ

---

### **4. ุชูุงุตูู ุงูุนุฏุงุฏ**
**ุงูุดุงุดุฉ:** `MeterDetailsExtended`  
**ุงููุณุงุฑ:** `/dashboard/billing/meters/:id`

**ุงููุธุงุฆู:**
- ุนุฑุถ ูุนูููุงุช ุงูุนุฏุงุฏ ุงููุงููุฉ
- ุณุฌู ุงููุฑุงุกุงุช
- ุณุฌู ุงูููุงุชูุฑ
- ุงูุญุงูุฉ ุงูุญุงููุฉ

**ุงูุฑุจุท:**
```
MeterDetailsExtended
  โโโ MeterReadingsManagement (ุฅุถุงูุฉ ูุฑุงุกุฉ ุฌุฏูุฏุฉ)
  โโโ InvoicesManagement (ุนุฑุถ ููุงุชูุฑ ุงูุนุฏุงุฏ)
  โโโ CustomersManagement (ุนุฑุถ ูุนูููุงุช ุงูุนููู ุงููุฑุชุจุท)
```

---

## ๐ฐ **ูุณุงุฑ ุงููุฏููุนุงุช ูุงูุชุญุตูู**

### **1. ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช**
**ุงูุดุงุดุฉ:** `PaymentsManagement` (ุชู ุดุฑุญูุง ุฃุนูุงู)

**ุงูุฃุฏูุงุช:**
- **Tab 1: ูุงุฆูุฉ ุงููุฏููุนุงุช**
  - ุนุฑุถ ุฌููุน ุงููุฏููุนุงุช
  - ููุชุฑุฉ ุญุณุจ ุทุฑููุฉ ุงูุฏูุน
  - ููุชุฑุฉ ุญุณุจ ุงูุชุงุฑูุฎ
  - ุทุจุงุนุฉ ุงูุฅูุตุงูุงุช

- **Tab 2: ุฃุฑุตุฏุฉ ุงูุนููุงุก**
  - ุนุฑุถ ุงูุนููุงุก ุงูุฐูู ูุฏููู ูุณุชุญูุงุช
  - ุฅุฌูุงูู ุงูููุงุชูุฑ
  - ุงููุฏููุน
  - ุงููุณุชุญู
  - ุฒุฑ "ุชุญุตูู" ูุจุงุดุฑ

- **Tab 3: ุงูุชูุฑูุฑ ุงููููู**
  - ุฅุฌูุงูู ุงูุชุญุตูู ุงููููู
  - ุญุณุจ ุทุฑููุฉ ุงูุฏูุน
  - ุญุณุจ ุงูุตูุฏูู

---

### **2. ุงูุฅูุตุงูุงุช**
**ุงูุดุงุดุฉ:** `ReceiptsManagement`  
**ุงููุณุงุฑ:** `/dashboard/billing/receipts`

**ุงููุธุงุฆู:**
- ุนุฑุถ ุฌููุน ุงูุฅูุตุงูุงุช
- ุทุจุงุนุฉ ุงูุฅูุตุงู
- ุฅุนุงุฏุฉ ุฅุตุฏุงุฑ ุฅูุตุงู

**ุงูุฑุจุท:**
```
PaymentsManagement (ุจุนุฏ ุชุญุตูู ุฏูุนุฉ)
  โโโ ReceiptsManagement (ุฅุตุฏุงุฑ ุฅูุตุงู ุชููุงุฆูุงู)
```

---

## ๐ **ุงูุฑูุงุจุท ุงูุชูุงุนููุฉ ุจูู ุงูุดุงุดุงุช**

### **1. ูู ุงูููุงุชูุฑ ุฅูู ุงููุฏููุนุงุช:**
```typescript
// ูู InvoicesManagement.tsx
<Button 
  onClick={() => {
    // ุญูุธ ุงููุงุชูุฑุฉ ุงููุญุฏุฏุฉ ูู state
    setSelectedInvoiceForPayment(invoice);
    // ุงูุงูุชูุงู ูุตูุญุฉ ุงููุฏููุนุงุช
    navigate('/dashboard/billing/payments');
  }}
>
  <DollarSign /> ุชุญุตูู
</Button>
```

### **2. ูู ุงูุนููุงุก ุฅูู ุงูููุงุชูุฑ:**
```typescript
// ูู CustomerDetails.tsx
<Card onClick={() => navigate(`/dashboard/billing/invoices?customerId=${customer.id}`)}>
  <p>ุงูููุงุชูุฑ: {customer.totalInvoices}</p>
</Card>
```

### **3. ูู ุงูุนุฏุงุฏุงุช ุฅูู ุงููุฑุงุกุงุช:**
```typescript
// ูู MeterDetailsExtended.tsx
<Button onClick={() => navigate(`/dashboard/billing/readings?meterId=${meter.id}`)}>
  ุฅุถุงูุฉ ูุฑุงุกุฉ
</Button>
```

---

## ๐ **ูุฎุทุท ุงูุชุฏูู ุงููุงูู**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    BillingDashboard                         โ
โ                  (ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ)                      โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
    โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
    โ             โ             โ              โ
    โผ             โผ             โผ              โผ
โโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโ  โโโโโโโโโโโโ
โCustomersโ  โ  Meters  โ  โ Invoicesโ  โ Payments โ
โManagementโ  โManagementโ  โManagementโ  โManagementโ
โโโโโโฌโโโโโ  โโโโโโฌโโโโโโ  โโโโโโฌโโโโโ  โโโโโโฌโโโโโโ
     โ            โ              โ             โ
     โ            โ              โ             โ
     โผ            โผ              โผ             โผ
โโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโ  โโโโโโโโโโโโ
โCustomerโ  โ Meter    โ  โ Billing โ  โ Receipts โ
โDetails โ  โ Details  โ  โ Periods โ  โManagementโ
โโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโฌโโโโโ  โโโโโโโโโโโโ
                               โ
                               โผ
                        โโโโโโโโโโโโโโโโ
                        โMeter Readingsโ
                        โ Management   โ
                        โโโโโโโโฌโโโโโโโโ
                               โ
                               โผ
                        โโโโโโโโโโโโโโโโ
                        โGenerate      โ
                        โInvoices      โ
                        โโโโโโโโฌโโโโโโโโ
                               โ
                               โผ
                        โโโโโโโโโโโโโโโโ
                        โApprove & Sendโ
                        โInvoices      โ
                        โโโโโโโโฌโโโโโโโโ
                               โ
                               โผ
                        โโโโโโโโโโโโโโโโ
                        โ Collect      โ
                        โ Payments     โ
                        โโโโโโโโฌโโโโโโโโ
                               โ
                               โผ
                        โโโโโโโโโโโโโโโโ
                        โ Issue Receiptโ
                        โโโโโโโโโโโโโโโโ
```

---

## ๐ **ุงูุฑุจุท ุจูู APIs ูุงููุงุฌูุงุช**

### **Backend Router: `billingRouter`**

**ุงููุฌููุนุงุช ุงูุฑุฆูุณูุฉ:**
1. **Areas & Squares & Cabinets** - ุงูููุงุทู ูุงููุฑุจุนุงุช ูุงููุงุจููุงุช
2. **Tariffs & Fee Types** - ุงูุชุนุฑูุฉ ูุงูุฑุณูู
3. **Customers** - ุงูุนููุงุก
4. **Meters** - ุงูุนุฏุงุฏุงุช
5. **Billing Periods** - ูุชุฑุงุช ุงูููุชุฑุฉ
6. **Meter Readings** - ูุฑุงุกุงุช ุงูุนุฏุงุฏุงุช
7. **Invoices** - ุงูููุงุชูุฑ
8. **Payments** - ุงููุฏููุนุงุช
9. **Cashboxes & Payment Methods** - ุงูุตูุงุฏูู ูุทุฑู ุงูุฏูุน

### **Frontend Pages โ Backend APIs:**

| ุงูุตูุญุฉ | APIs ุงููุณุชุฎุฏูุฉ |
|--------|---------------|
| `BillingDashboard` | `billing.getCustomers`, `billing.getMeters`, `billing.getInvoices`, `billing.getPayments`, `billing.getBillingPeriods`, `billing.getAreas` |
| `CustomersManagement` | `billing.getCustomers`, `billing.createCustomer`, `billing.updateCustomer`, `billing.deleteCustomer`, `customerSystem.getCustomerStatus` |
| `MetersManagement` | `billing.getMeters`, `billing.createMeter`, `billing.updateMeter`, `billing.deleteMeter` |
| `InvoicesManagement` | `billing.getInvoices`, `billing.generateInvoices`, `billing.approveInvoices`, `billing.sendInvoices` |
| `PaymentsManagement` | `billing.getPayments`, `billing.createPayment`, `billing.getCustomers`, `billing.getInvoices`, `billing.getCashboxes` |
| `MeterReadingsManagement` | `billing.getMeterReadings`, `billing.createMeterReading`, `billing.approveMeterReading` |
| `BillingPeriodsManagement` | `billing.getBillingPeriods`, `billing.createBillingPeriod`, `billing.updateBillingPeriod` |

---

## โ๏ธ **ุงูุชุฏูู ุงูุชููุงุฆู (Auto-Flow)**

### **1. ุชูููุฏ ุงูููุงุชูุฑ ุงูุชููุงุฆู:**
```typescript
// ุนูุฏ ุงุนุชูุงุฏ ูุฑุงุกุฉ ุนุฏุงุฏ
approveMeterReading()
  โโโ ุฅุฐุง ูุงูุช ุฌููุน ูุฑุงุกุงุช ุงููุชุฑุฉ ูุนุชูุฏุฉ
      โโโ generateInvoices() ุชููุงุฆูุงู
```

### **2. ุชุญุฏูุซ ุญุงูุฉ ุงููุงุชูุฑุฉ ุจุนุฏ ุงูุฏูุน:**
```typescript
// ุนูุฏ ุชุญุตูู ุฏูุนุฉ
createPayment({ invoiceId, amount })
  โโโ ุชุญุฏูุซ paidAmount ูู ุงููุงุชูุฑุฉ
  โโโ ุฅุฐุง paidAmount >= totalAmount
      โโโ ุชุญุฏูุซ status = 'paid'
  โโโ ุชุญุฏูุซ ุฑุตูุฏ ุงูุนููู
  โโโ ุฅุตุฏุงุฑ ุฅูุตุงู ุชููุงุฆูุงู
```

### **3. ุชุญุฏูุซ ุญุงูุฉ ุงูุนููู:**
```typescript
// ุจุนุฏ ุฅูุดุงุก/ุชุญุฏูุซ ุงูููุงุชูุฑ
generateInvoices()
  โโโ customerStatusService.updateCustomerStatus()
      โโโ ุญุณุงุจ ุงููุณุชุญูุงุช
      โโโ ุชุญุฏูุซ ุญุงูุฉ ุงูุนููู (active, overdue, suspended)
```

---

## ๐ฏ **ููุงุท ุงูุชุญุณูู ุงูููุชุฑุญุฉ**

### **1. ุฅุถุงูุฉ ุฑูุงุจุท ุชูุงุนููุฉ:**
- ุฅุถุงูุฉ ุฃุฒุฑุงุฑ "ุนุฑุถ ุงูุชูุงุตูู" ูู ูู ุฌุฏูู
- ุฅุถุงูุฉ ุฑูุงุจุท ูุจุงุดุฑุฉ ุจูู ุงูุตูุญุงุช ุงููุชุนููุฉ
- ุฅุถุงูุฉ Breadcrumb Navigation

### **2. ุชุญุณูู ุงูุชููู:**
```typescript
// ูุซุงู: ุฅุถุงูุฉ context ููุชููู
const BillingContext = {
  selectedCustomer: null,
  selectedInvoice: null,
  selectedMeter: null,
  billingPeriod: null,
}

// ุนูุฏ ุงูููุฑ ุนูู ุนููู ูู ูุงุฆูุฉ ุงูููุงุชูุฑ
onClick={() => {
  setBillingContext({ selectedCustomer: invoice.customerId });
  navigate('/dashboard/billing/customers');
}}
```

### **3. ุฅุถุงูุฉ Filters ูุดุชุฑูุฉ:**
```typescript
// ุญูุธ ุงูููุงุชุฑ ูู URL
/dashboard/billing/invoices?customerId=123&status=unpaid&periodId=5

// ุนูุฏ ุงูุงูุชูุงู ูุตูุญุฉ ุฃุฎุฑูุ ุชุญููู ููุณ ุงูููุงุชุฑ
```

---

## โ **ุงูุฎูุงุตุฉ**

ูุธุงู ุงูููุชุฑุฉ **ูุชุฑุงุจุท ุจุดูู ุฌูุฏ** ูุน:
- โ **17 ุตูุญุฉ** ูุฑุชุจุทุฉ ุจุจุนุถูุง
- โ **ุฏูุฑุฉ ููุชุฑุฉ ูุงููุฉ** ูู ุงููุฑุงุกุงุช ุฅูู ุงูุชุญุตูู
- โ **ุฑุจุท ูุงุถุญ** ุจูู ุงูุนููุงุกุ ุงูุนุฏุงุฏุงุชุ ุงูููุงุชูุฑุ ูุงููุฏููุนุงุช
- โ๏ธ **ูุญุชุงุฌ ุชุญุณูู** ูู ุงูุชููู ุงูุชูุงุนูู ูุงูุฑูุงุจุท ุงููุจุงุดุฑุฉ

**ุงูุญุงูุฉ:** โ **ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูุน ุจุนุถ ุงูุชุญุณููุงุช ุงูููุตู ุจูุง**

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** ุงูุฌูุนุฉุ 10 ููุงูุฑ 2026
