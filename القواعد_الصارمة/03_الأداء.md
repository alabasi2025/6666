# ๐ข ููุงุนุฏ ุงูุฃุฏุงุก (Performance Rules)

> **ุงููุฆุฉ:** ุงูุฃุฏุงุก  
> **ุนุฏุฏ ุงูููุงุนุฏ:** 4 ููุงุนุฏ  
> **ูุณุชูู ุงูุฃูููุฉ:** ุนุงูู

---

## ุงููุงุนุฏุฉ 7: ููุน N+1 Query

> **ููุญุธุฑ ุชูุงูุงู ุชูููุฐ ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฏุงุฎู ุญููุงุช `for` ุฃู `forEach` ุฃู `map`.**

**ูุซุงู ูุญุธูุฑ:**
```typescript
// โ ูุญุธูุฑ - N+1 Query
for (const user of users) {
  const orders = await db.select().from(orders).where(eq(orders.userId, user.id));
}
```

**ุงูุญู ุงูุตุญูุญ:**
```typescript
// โ ุตุญูุญ - ุงุณุชุนูุงู ูุงุญุฏ
const userIds = users.map(u => u.id);
const allOrders = await db.select().from(orders).where(inArray(orders.userId, userIds));
```

**ุงูุนููุจุฉ:** ุฑูุถ ุงูุฏูุฌ.

---

## ุงููุงุนุฏุฉ 8: ุชุญุฏูุฏ ุงูุฃุนูุฏุฉ

> **ููุญุธุฑ ุงุณุชุฎุฏุงู `select()` ุจุฏูู ุชุญุฏูุฏ ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ.**

**ูุซุงู ูุญุธูุฑ:**
```typescript
// โ ูุญุธูุฑ - ูุฌูุจ ุฌููุน ุงูุฃุนูุฏุฉ
await db.select().from(users).where(...);
```

**ุงูุญู ุงูุตุญูุญ:**
```typescript
// โ ุตุญูุญ - ูุฌูุจ ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ ููุท
await db.select({ 
  id: users.id, 
  name: users.nameAr,
  phone: users.phone 
}).from(users).where(...);
```

**ุงูุงุณุชุซูุงุกุงุช:**
- ุนูุฏ ุงูุญุงุฌุฉ ุงููุนููุฉ ูุฌููุน ุงูุฃุนูุฏุฉ (ูุน ุชูุซูู ุงูุณุจุจ).

**ุงูุนููุจุฉ:** ุชุญุฐูุฑ ูู ุฃูู ูุฑุฉุ ุฑูุถ ุงูุฏูุฌ ูู ุงููุฑุงุช ุงูุชุงููุฉ.

---

## ุงููุงุนุฏุฉ 9: ุงูููุฑุณุฉ ุงูุฅูุฒุงููุฉ

> **ูู ุนููุฏ ููุณุชุฎุฏู ูู `WHERE` ุฃู `JOIN` ุฃู `ORDER BY` ูุฌุจ ุฃู ูููู ูู ููุฑุณ.**

**ุงูุชุทุจูู:**
- ุชุนุฑูู ุงูููุงุฑุณ ูู `schema.ts` ูููุณ ูู ูููุงุช SQL ูููุตูุฉ.
- ูุฑุงุฌุนุฉ ุฎุทุฉ ุงูุงุณุชุนูุงู (Query Plan) ููุงุณุชุนูุงูุงุช ุงูุจุทูุฆุฉ.

**ูุซุงู:**
```typescript
export const users = mysqlTable("users", {
  id: int("id").primaryKey().autoincrement(),
  phone: varchar("phone", { length: 20 }).notNull(),
  businessId: int("business_id"),
}, (table) => ({
  phoneIdx: index("phone_idx").on(table.phone),
  businessIdx: index("business_idx").on(table.businessId),
}));
```

**ุงูุนููุจุฉ:** ุชุญุฐูุฑ.

---

## ุงููุงุนุฏุฉ 10: ุชุญุณูู React

> **ูู ูููู ููุนุงุฏ ุชุตููุฑู ุฃูุซุฑ ูู 3 ูุฑุงุช ูู ุงูุซุงููุฉ ูุฌุจ ุชุญุณููู.**

**ุงูุฃุฏูุงุช ุงููุทููุจุฉ:**
- `React.memo` ููููููุงุช ุงููุณุชูุฑุฉ.
- `useCallback` ููุฏูุงู ุงูููุฑุฑุฉ ูู props.
- `useMemo` ููุญุณุงุจุงุช ุงูููููุฉ.

**ูุซุงู:**
```typescript
// โ ุตุญูุญ
export const DataTable = React.memo(({ data, columns }) => {
  const sortedData = useMemo(() => sortData(data), [data]);
  const handleClick = useCallback((id) => { ... }, []);
  
  return <Table data={sortedData} onClick={handleClick} />;
});
```

**ุงูุนููุจุฉ:** ุชุญุฐูุฑ.

---

## ููุฎุต ููุงุนุฏ ุงูุฃุฏุงุก

| # | ุงููุงุนุฏุฉ | ุงูุนููุจุฉ |
|:---:|:---|:---:|
| 7 | ููุน N+1 Query | ุฑูุถ |
| 8 | ุชุญุฏูุฏ ุฃุนูุฏุฉ SELECT | ุชุญุฐูุฑ โ ุฑูุถ |
| 9 | ุงูููุฑุณุฉ ุงูุฅูุฒุงููุฉ | ุชุญุฐูุฑ |
| 10 | ุชุญุณูู React (memo, useCallback, useMemo) | ุชุญุฐูุฑ |
