# ๐ฃ ููุงุนุฏ ุงูุฃุฏุงุก ุงููุชูุฏู (Advanced Performance)

> **ุงููุฆุฉ:** ุงูุฃุฏุงุก ุงููุชูุฏู  
> **ุนุฏุฏ ุงูููุงุนุฏ:** 3 ููุงุนุฏ  
> **ูุณุชูู ุงูุฃูููุฉ:** ุนุงูู

---

## ุงููุงุนุฏุฉ 30: ุงูุชุฎุฒูู ุงููุคูุช (Caching Rule)

> **ุงูุจูุงูุงุช ุงููุชูุฑุฑุฉ ูุฌุจ ุชุฎุฒูููุง ูุคูุชุงู ูุชุญุณูู ุงูุฃุฏุงุก.**

**ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุฎุฒูู ุงููุคูุช:**

| ููุน ุงูุจูุงูุงุช | ูุฏุฉ ุงูุชุฎุฒูู | ุงูููุงู |
|:---|:---:|:---|
| ุจูุงูุงุช ุซุงุจุชุฉ (ุฏููุ ุนููุงุช) | 24 ุณุงุนุฉ | Memory + Redis |
| ููุงุฆู (ููุชุฌุงุชุ ูุฆุงุช) | 1 ุณุงุนุฉ | Redis |
| ุจูุงูุงุช ูุณุชุฎุฏู | 15 ุฏูููุฉ | Memory |
| ูุชุงุฆุฌ ุจุญุซ | 5 ุฏูุงุฆู | Redis |
| ุจูุงูุงุช ุญุณุงุณุฉ | ูุง ุชูุฎุฒูู | - |

**ูุซุงู ุนูู ุงูุชุฎุฒูู ุงููุคูุช:**
```typescript
// ุฅุนุฏุงุฏ Cache
const cache = new Map<string, { data: any; expiry: number }>();

async function getCached<T>(
  key: string,
  fetcher: () => Promise<T>,
  ttlSeconds = 300
): Promise<T> {
  const cached = cache.get(key);
  
  if (cached && cached.expiry > Date.now()) {
    return cached.data as T;
  }
  
  const data = await fetcher();
  cache.set(key, {
    data,
    expiry: Date.now() + (ttlSeconds * 1000)
  });
  
  return data;
}

// ุงูุงุณุชุฎุฏุงู
const categories = await getCached(
  'categories:all',
  () => db.select().from(categories),
  3600  // ุณุงุนุฉ ูุงุญุฏุฉ
);
```

**ุงูุนููุจุฉ:** ุชุญุฐูุฑ - ุงูุงุณุชุนูุงูุงุช ุงููุชูุฑุฑุฉ ุจุฏูู cache ุชูุฑุงุฌุน.

---

## ุงููุงุนุฏุฉ 31: ุงูุชุญููู ุงููุณูู (Lazy Loading Rule)

> **ุงูููููุงุช ูุงูุจูุงูุงุช ูุฌุจ ุชุญููููุง ุนูุฏ ุงูุญุงุฌุฉ ููุท.**

**ุชุทุจูู Lazy Loading:**

```typescript
// โ ุตุญูุญ - ุชุญููู ูุณูู ููุตูุญุงุช
const Dashboard = lazy(() => import('./pages/Dashboard'));
const Reports = lazy(() => import('./pages/Reports'));
const Settings = lazy(() => import('./pages/Settings'));

function App() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <Routes>
        <Route path="/dashboard" element={<Dashboard />} />
        <Route path="/reports" element={<Reports />} />
        <Route path="/settings" element={<Settings />} />
      </Routes>
    </Suspense>
  );
}

// โ ุตุญูุญ - ุชุญููู ูุณูู ููุจูุงูุงุช
function UserProfile({ userId }) {
  const { data, isLoading } = useQuery({
    queryKey: ['user', userId],
    queryFn: () => fetchUser(userId),
    enabled: !!userId,  // ูุง ุชุญููู ุฅูุง ุนูุฏ ูุฌูุฏ ID
    staleTime: 5 * 60 * 1000  // 5 ุฏูุงุฆู
  });
}
```

**ุงูุนููุจุฉ:** ุชุญุฐูุฑ - ุงูุตูุญุงุช ุงููุจูุฑุฉ ุจุฏูู lazy loading ุชูุฑุงุฌุน.

---

## ุงููุงุนุฏุฉ 32: ุชุญุณูู ุงูุงุณุชุนูุงูุงุช (Query Optimization Rule)

> **ูู ุงุณุชุนูุงู ูุฌุจ ุฃู ูููู ูุญุณููุงู: ูุญุฏุฏ ุงูุฃุนูุฏุฉุ ูููุฑุณุ ููุฑููู.**

**ููุงุนุฏ ุงูุงุณุชุนูุงูุงุช:**

```typescript
// โ ุฎุทุฃ - ุงุณุชุนูุงู ุบูุฑ ูุญุณูู
const users = await db.select().from(users);  // ูู ุงูุฃุนูุฏุฉ!
const orders = await db.select().from(orders).where(eq(orders.userId, id));  // ุจุฏูู ููุฑุณ!

// โ ุตุญูุญ - ุงุณุชุนูุงู ูุญุณูู
const users = await db
  .select({
    id: users.id,
    name: users.name,
    email: users.email
  })
  .from(users)
  .limit(20)
  .offset(page * 20);

// ูุน ุงูููุฑุณุฉ ูู schema
export const orders = mysqlTable('orders', {
  id: int('id').primaryKey(),
  userId: int('user_id').notNull(),
  // ...
}, (table) => ({
  userIdIdx: index('user_id_idx').on(table.userId)  // ููุฑุณ!
}));
```

**ุงูุนููุจุฉ:** ุฑูุถ ุงูุฏูุฌ - ุงุณุชุนูุงูุงุช ุจุฏูู ุชุญุฏูุฏ ุฃุนูุฏุฉ ุฃู pagination ุชูุฑูุถ.

---

## ููุฎุต ููุงุนุฏ ุงูุฃุฏุงุก ุงููุชูุฏู

| # | ุงููุงุนุฏุฉ | ุงูุนููุจุฉ |
|:---:|:---|:---:|
| 30 | ุงูุชุฎุฒูู ุงููุคูุช (Caching) | ุชุญุฐูุฑ |
| 31 | ุงูุชุญููู ุงููุณูู (Lazy Loading) | ุชุญุฐูุฑ |
| 32 | ุชุญุณูู ุงูุงุณุชุนูุงูุงุช | ุฑูุถ |
